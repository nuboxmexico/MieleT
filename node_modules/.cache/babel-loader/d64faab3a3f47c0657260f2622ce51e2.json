{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/javascript/components/customers/AssignCustomer.jsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from 'axios';\nimport { AddCircleOutline, CloseOutlined } from '@material-ui/icons';\nimport { Box, Chip, Link as MuiLink } from \"@material-ui/core\";\nimport { buildFullName, buildCustomerShowLink } from 'components/customers/utils';\nimport { headers } from 'constants/csrf';\nimport Searcher from 'components/customers/Searcher';\nimport { useTranslation } from 'react-i18next';\n\nfunction AssignCustomer(props) {\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var unitRealState = props.unitRealState;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      customersMapped = _useState2[0],\n      setCustomersMapped = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      editMode = _useState4[0],\n      setEditMode = _useState4[1];\n\n  var selectedCustomerInitialState = (unitRealState === null || unitRealState === void 0 ? void 0 : unitRealState.customer) || {};\n\n  var _useState5 = useState(selectedCustomerInitialState),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectedCustomer = _useState6[0],\n      setSelectedCustomer = _useState6[1];\n\n  function handleAssign() {\n    return _handleAssign.apply(this, arguments);\n  }\n\n  function _handleAssign() {\n    _handleAssign = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _yield$axios$put, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.put(\"/api/v1/customers/\".concat(selectedCustomer.id, \"/assign_unit_real_state/\").concat(unitRealState.id), {\n                headers: headers\n              });\n\n            case 3:\n              _yield$axios$put = _context.sent;\n              data = _yield$axios$put.data;\n              setEditMode(false);\n              setSelectedCustomer(data);\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.prev = 9;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(_context.t0);\n\n            case 12:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 9]]);\n    }));\n    return _handleAssign.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    setSelectedCustomer(selectedCustomerInitialState);\n  }, [unitRealState]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, editMode ? /*#__PURE__*/React.createElement(Box, {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Searcher, {\n    customersMapped: customersMapped,\n    setCustomersMapped: setCustomersMapped,\n    selectedCustomer: selectedCustomer,\n    setSelectedCustomer: setSelectedCustomer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Chip, {\n    disabled: !Object.keys(selectedCustomer).length,\n    component: \"button\",\n    type: \"submit\",\n    style: {\n      borderRadius: \"initial\",\n      marginLeft: \"3px\"\n    },\n    label: t('customer.projectCustomer.assignButton'),\n    onClick: handleAssign,\n    color: \"primary\",\n    variant: \"outlined\",\n    size: \"medium\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(CloseOutlined, {\n    color: \"action\",\n    onClick: function onClick() {\n      return setEditMode(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }\n  })) : /*#__PURE__*/React.createElement(React.Fragment, null, Object.keys(selectedCustomer).length > 0 && /*#__PURE__*/React.createElement(MuiLink, {\n    className: \"force-underline\",\n    href: buildCustomerShowLink(selectedCustomer),\n    target: \"_blank\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 58\n    }\n  }, buildFullName(selectedCustomer)), /*#__PURE__*/React.createElement(AddCircleOutline, {\n    style: {\n      marginLeft: \"5px\"\n    },\n    onClick: function onClick() {\n      return setEditMode(true);\n    },\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 13\n    }\n  })));\n}\n\nexport default AssignCustomer;","map":{"version":3,"sources":["/usr/src/app/javascript/components/customers/AssignCustomer.jsx"],"names":["React","useState","useEffect","axios","AddCircleOutline","CloseOutlined","Box","Chip","Link","MuiLink","buildFullName","buildCustomerShowLink","headers","Searcher","useTranslation","AssignCustomer","props","t","unitRealState","customersMapped","setCustomersMapped","editMode","setEditMode","selectedCustomerInitialState","customer","selectedCustomer","setSelectedCustomer","handleAssign","put","id","data","console","log","Object","keys","length","borderRadius","marginLeft"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\"\nimport axios from 'axios'\nimport {AddCircleOutline, CloseOutlined} from '@material-ui/icons';\nimport {Box, Chip, Link as MuiLink} from \"@material-ui/core\";\nimport {buildFullName, buildCustomerShowLink} from 'components/customers/utils'\nimport {headers} from 'constants/csrf'\nimport Searcher from 'components/customers/Searcher'\nimport { useTranslation } from 'react-i18next';\n\nfunction AssignCustomer(props) {\n  const {t} = useTranslation();\n  const {unitRealState} = props\n  const [customersMapped, setCustomersMapped] = useState([])\n  const [editMode, setEditMode] = useState(false)\n  const selectedCustomerInitialState = unitRealState?.customer || {}\n  const [selectedCustomer, setSelectedCustomer] = useState(selectedCustomerInitialState)\n\n  async function handleAssign() {\n    try {\n      const {data} = await axios.put(`/api/v1/customers/${selectedCustomer.id}/assign_unit_real_state/${unitRealState.id}`, {headers})\n      setEditMode(false)\n      setSelectedCustomer(data)\n    } catch (e) {\n      console.log(e);\n    }\n  }\n\n  useEffect(() => {\n    setSelectedCustomer(selectedCustomerInitialState)\n  }, [unitRealState])\n\n  return (\n    <>\n      {\n        editMode ?\n\n          <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\">\n            <Searcher\n              customersMapped={customersMapped}\n              setCustomersMapped={setCustomersMapped}\n              selectedCustomer={selectedCustomer}\n              setSelectedCustomer={setSelectedCustomer}\n            />\n\n            <Chip\n              disabled={!Object.keys(selectedCustomer).length}\n              component=\"button\"\n              type=\"submit\"\n              style={{borderRadius: \"initial\", marginLeft: \"3px\"}}\n              label={t('customer.projectCustomer.assignButton')}\n              onClick={handleAssign}\n              color=\"primary\"\n              variant=\"outlined\"\n              size=\"medium\" />\n            <CloseOutlined color=\"action\" onClick={() => setEditMode(false)} />\n          </Box>\n          :\n          <>\n            {Object.keys(selectedCustomer).length > 0 && <MuiLink className=\"force-underline\" href={buildCustomerShowLink(selectedCustomer)} target=\"_blank\">{buildFullName(selectedCustomer)}</MuiLink>}\n            <AddCircleOutline style={{marginLeft: \"5px\"}} onClick={() => setEditMode(true)} color=\"primary\" />\n          </>\n      }\n    </>\n  )\n}\n\nexport default AssignCustomer\n"]},"metadata":{},"sourceType":"module"}