{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/javascript/components/finance/modalConfirmation.jsx\";\nimport React from 'react';\nimport { flash_alert } from 'components/App';\nimport axios from 'axios';\nimport { headers } from '../../constants/csrf';\nimport { DialogTitle, DialogContentText, DialogContent, DialogActions, Dialog, Button, Box } from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\nexport default function ModalConfirmation(_ref) {\n  var selectedVisits = _ref.selectedVisits,\n      showModal = _ref.showModal,\n      setShowModal = _ref.setShowModal;\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  function handleClose(e) {\n    e.preventDefault();\n    setShowModal(false);\n  }\n\n  var visitIds = Object.values(selectedVisits).map(function (visits) {\n    return visits.map(function (visit) {\n      return visit.id;\n    });\n  }).flat();\n\n  function updateMassiveVisits() {\n    var body = {\n      visit_ids: visitIds\n    };\n    return axios.post(\"/api/v1/visits/invoiced_visits\", body, {\n      headers: headers\n    }).then(function (response) {\n      flash_alert(t('customer.newService.flashAlert.success'), t('customer.newService.flashAlert.updateSuccess'), \"success\");\n      setShowModal(false);\n      setTimeout(function () {\n        window.location.reload();\n      }, 1000);\n    })[\"catch\"](function (e) {\n      console.log(e);\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    p: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Dialog, {\n    open: showModal,\n    fullWidth: true,\n    maxWidth: \"sm\",\n    onClose: handleClose,\n    \"aria-labelledby\": \"alert-dialog-title\",\n    \"aria-describedby\": \"alert-dialog-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    className: \"payment-dialog-title\",\n    id: \"alert-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  }, \"\".concat(t('finance.confirmModal.billMessage'), \" \").concat(visitIds.length)), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DialogContentText, {\n    id: \"alert-dialog-description\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    sx: {\n      fontSize: 2,\n      fontWeight: 300\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h6\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 19\n    }\n  }, t('finance.confirmModal.alertMessage')))))), /*#__PURE__*/React.createElement(DialogActions, {\n    style: {\n      justifyContent: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    size: \"large\",\n    variant: \"outlined\",\n    onClick: handleClose,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, t('finance.confirmModal.cancel')), /*#__PURE__*/React.createElement(Button, {\n    size: \"large\",\n    variant: \"contained\",\n    onClick: updateMassiveVisits,\n    color: \"primary\",\n    autoFocus: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, t('finance.confirmModal.accept'))))));\n}","map":{"version":3,"sources":["/usr/src/app/javascript/components/finance/modalConfirmation.jsx"],"names":["React","flash_alert","axios","headers","DialogTitle","DialogContentText","DialogContent","DialogActions","Dialog","Button","Box","useTranslation","ModalConfirmation","selectedVisits","showModal","setShowModal","t","handleClose","e","preventDefault","visitIds","Object","values","map","visits","visit","id","flat","updateMassiveVisits","body","visit_ids","post","then","response","setTimeout","window","location","reload","console","log","textAlign","length","fontSize","fontWeight","justifyContent"],"mappings":"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","sourcesContent":["import React from 'react';\nimport {flash_alert} from 'components/App';\nimport axios from 'axios';\nimport {headers} from '../../constants/csrf';\nimport {\n  DialogTitle,\n  DialogContentText,\n  DialogContent,\n  DialogActions,\n  Dialog,\n  Button,\n  Box\n} from '@material-ui/core';\nimport { useTranslation } from 'react-i18next';\n\nexport default function ModalConfirmation({selectedVisits, showModal, setShowModal}) {\n  const {t} = useTranslation();\n  function handleClose(e) {\n    e.preventDefault();\n    setShowModal(false)\n  }\n  const visitIds = Object.values(selectedVisits).map(visits => {\n    return visits.map(visit => visit.id)\n  }).flat()\n\n  function updateMassiveVisits() {\n    const body = {visit_ids: visitIds}\n\n    return axios.post(`/api/v1/visits/invoiced_visits`, body, {headers: headers})\n      .then(response => {\n        flash_alert(t('customer.newService.flashAlert.success'), t('customer.newService.flashAlert.updateSuccess'), \"success\")\n        setShowModal(false)\n        setTimeout(() => {\n          window.location.reload();\n        }, 1000)\n      })\n      .catch(e => {\n        console.log(e);\n      });\n  }\n\n  return (\n    <React.Fragment>\n      <Box p={2}>\n        <Dialog\n          open={showModal}\n          fullWidth={true}\n          maxWidth={\"sm\"}\n          onClose={handleClose}\n          aria-labelledby=\"alert-dialog-title\"\n          aria-describedby=\"alert-dialog-description\"\n        >\n          <Box style={{textAlign: 'center'}}>\n            <DialogTitle className=\"payment-dialog-title\" id=\"alert-dialog-title\">\n              {`${t('finance.confirmModal.billMessage')} ${visitIds.length}`}\n            </DialogTitle>\n            <DialogContent>\n              <DialogContentText id=\"alert-dialog-description\">\n                <Box sx={{fontSize: 2, fontWeight: 300}}>\n                  <h6>\n                    {t('finance.confirmModal.alertMessage')}\n                  </h6>\n                </Box>\n              </DialogContentText>\n            </DialogContent>\n          </Box>\n          <DialogActions style={{justifyContent: \"center\"}} >\n            <Button size=\"large\" variant=\"outlined\" onClick={handleClose} color=\"primary\">\n              {t('finance.confirmModal.cancel')}\n            </Button>\n            <Button size=\"large\" variant=\"contained\" onClick={updateMassiveVisits} color=\"primary\" autoFocus>\n              {t('finance.confirmModal.accept')}\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </Box>\n    </React.Fragment>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}