{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/javascript/components/users/NewUser.jsx\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from \"prop-types\";\nimport axios from 'axios';\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport { flash_alert } from 'components/App';\nimport Users from \"components/users/Users\";\nimport UserForm from \"components/users/UserForm\";\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\nimport { useTranslation } from 'react-i18next';\n\nfunction NewUser(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showPassword = _useState2[0],\n      setShowpassword = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      firstname = _useState4[0],\n      setFirstname = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      lastname = _useState6[0],\n      setLastname = _useState6[1];\n\n  var _useState7 = useState(\"mielePartner\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      password = _useState8[0],\n      setPassword = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      email = _useState10[0],\n      setEmail = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      roleName = _useState12[0],\n      setRoleName = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      country = _useState14[0],\n      setCountry = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      surname = _useState16[0],\n      setSurname = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      cellphone = _useState18[0],\n      setCellphone = _useState18[1];\n\n  var _useState19 = useState(\"\"),\n      _useState20 = _slicedToArray(_useState19, 2),\n      phone = _useState20[0],\n      setPhone = _useState20[1];\n\n  var _useState21 = useState(\"\"),\n      _useState22 = _slicedToArray(_useState21, 2),\n      costCenter = _useState22[0],\n      setCostCenter = _useState22[1];\n\n  var _useState23 = useState(\"\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      roleId = _useState24[0],\n      setRoleId = _useState24[1];\n\n  var _useState25 = useState(\"\"),\n      _useState26 = _slicedToArray(_useState25, 2),\n      worktime = _useState26[0],\n      setWorktime = _useState26[1];\n\n  var _useState27 = useState(\"hidden\"),\n      _useState28 = _slicedToArray(_useState27, 2),\n      passwordClass = _useState28[0],\n      setPasswordClass = _useState28[1];\n\n  var _useState29 = useState(false),\n      _useState30 = _slicedToArray(_useState29, 2),\n      redirect = _useState30[0],\n      setRedirect = _useState30[1];\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      disabled = _React$useState2[0],\n      setDisabled = _React$useState2[1]; // API VALUES\n\n\n  var _useState31 = useState([]),\n      _useState32 = _slicedToArray(_useState31, 2),\n      userUniqueiIds = _useState32[0],\n      setUserUniqueiIds = _useState32[1];\n\n  var _useState33 = useState([]),\n      _useState34 = _slicedToArray(_useState33, 2),\n      costCenters = _useState34[0],\n      setCostCenters = _useState34[1];\n\n  var _useState35 = useState({\n    value: \"\",\n    label: \"\"\n  }),\n      _useState36 = _slicedToArray(_useState35, 2),\n      costCenterValue = _useState36[0],\n      setCostCenterValue = _useState36[1];\n\n  var _useState37 = useState({\n    value: \"\",\n    label: \"\"\n  }),\n      _useState38 = _slicedToArray(_useState37, 2),\n      uniqueiIdsValue = _useState38[0],\n      setUniqueiIdsValue = _useState38[1];\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  useEffect(function () {\n    function fetchCostCentersData(cost_center) {\n      return fetch(\"/api/v1/cost_centers\").then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        var centers = json.data.map(function (center) {\n          if (cost_center == center.code) {\n            setCostCenterValue({\n              value: center.code,\n              label: center.fullname\n            });\n          }\n\n          return {\n            value: center.code,\n            label: center.fullname\n          };\n        });\n        setCostCenters(centers);\n      })[\"catch\"](function (error) {\n        return console.log(error);\n      });\n    }\n\n    function fetchUserUniqueIdsData(role_id) {\n      return fetch(\"/api/v1/user_unique_ids?keywords=tickets\").then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        var user_unique_ids = json.data.map(function (unique_id) {\n          if (role_id == unique_id.uniqueId) {\n            setUniqueiIdsValue({\n              value: unique_id.code,\n              label: unique_id.fullname\n            });\n          }\n\n          return {\n            value: unique_id.uniqueId,\n            label: unique_id.fullname\n          };\n        });\n        setUserUniqueiIds(user_unique_ids);\n      })[\"catch\"](function (error) {\n        return console.log(error);\n      });\n    }\n\n    fetchCostCentersData(\"\");\n    fetchUserUniqueIdsData(\"\");\n  }, []);\n\n  function handleClickShowPassword() {\n    setShowpassword(!showPassword);\n  }\n\n  ;\n\n  function handleMouseDownPassword(e) {\n    e.preventDefault();\n  }\n\n  ;\n\n  function handleSubmit(event, loading_function) {\n    event.preventDefault();\n    var body = new FormData();\n    body.set('firstname', firstname);\n    body.set('lastname', lastname);\n    body.set('email', email);\n    body.set('password', password);\n    body.set('roleName', roleName);\n    body.set('country', country);\n    body.set('surname', surname);\n    body.set('cellphone', cellphone);\n    body.set('phone', phone);\n    body.set('cost_center', costCenter);\n    body.set('role_id', roleId);\n    body.set('worktime', worktime);\n    body.set('disabled', disabled);\n    return axios.post('/api/v1/users', body, {\n      headers: props.headers\n    }).then(function (response) {\n      flash_alert(\"Creado\", \"El usuario ha sido creado satisfactoriamente\", \"success\");\n      setRedirect(true);\n    })[\"catch\"](function (e) {\n      loading_function(false);\n\n      if (e.response.data) {\n        for (var key in e.response.data) {\n          flash_alert(\"Error\", e.response.data[key], \"danger\");\n        }\n      }\n    });\n  }\n\n  var redirect_check = [];\n\n  if (redirect) {\n    redirect_check.push( /*#__PURE__*/React.createElement(Redirect, {\n      key: \"redirect-to-users\",\n      to: \"/users\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(Users, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 50\n      }\n    })));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 2\n    }\n  }, redirect_check, /*#__PURE__*/React.createElement(Paper, {\n    className: \"custom-paper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 7\n    }\n  }, t('users.globalUserForm.newUser')), /*#__PURE__*/React.createElement(UserForm, {\n    handleSubmit: handleSubmit,\n    setShowpassword: setShowpassword,\n    setFirstname: setFirstname,\n    setLastname: setLastname,\n    setPassword: setPassword,\n    setEmail: setEmail,\n    setRedirect: setRedirect,\n    handleClickShowPassword: handleClickShowPassword,\n    handleMouseDownPassword: handleMouseDownPassword,\n    firstname: firstname,\n    lastname: lastname,\n    email: email,\n    showPassword: showPassword,\n    password: password,\n    roleName: roleName,\n    setRoleName: setRoleName,\n    surname: surname,\n    setSurname: setSurname,\n    cellphone: cellphone,\n    setCellphone: setCellphone,\n    phone: phone,\n    setPhone: setPhone,\n    costCenter: costCenter,\n    setCostCenter: setCostCenter,\n    roleId: roleId,\n    setRoleId: setRoleId,\n    worktime: worktime,\n    setWorktime: setWorktime,\n    country: country,\n    setCountry: setCountry,\n    passwordClass: passwordClass,\n    setPasswordClass: setPasswordClass,\n    disabled: disabled,\n    setDisabled: setDisabled // API values\n    ,\n    userUniqueiIds: userUniqueiIds,\n    costCenters: costCenters,\n    costCenterValue: costCenterValue,\n    uniqueiIdsValue: uniqueiIdsValue,\n    setUserUniqueiIds: setUserUniqueiIds,\n    setCostCenters: setCostCenters,\n    setCostCenterValue: setCostCenterValue,\n    setUniqueiIdsValue: setUniqueiIdsValue,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  })));\n}\n\nvar structuredSelector = createStructuredSelector({});\nvar mapDispatchToProps = {};\nexport default connect(structuredSelector, mapDispatchToProps)(NewUser);","map":{"version":3,"sources":["/usr/src/app/javascript/components/users/NewUser.jsx"],"names":["React","useState","useEffect","ReactDOM","PropTypes","axios","Redirect","connect","createStructuredSelector","flash_alert","Users","UserForm","Container","Paper","useTranslation","NewUser","props","showPassword","setShowpassword","firstname","setFirstname","lastname","setLastname","password","setPassword","email","setEmail","roleName","setRoleName","country","setCountry","surname","setSurname","cellphone","setCellphone","phone","setPhone","costCenter","setCostCenter","roleId","setRoleId","worktime","setWorktime","passwordClass","setPasswordClass","redirect","setRedirect","disabled","setDisabled","userUniqueiIds","setUserUniqueiIds","costCenters","setCostCenters","value","label","costCenterValue","setCostCenterValue","uniqueiIdsValue","setUniqueiIdsValue","t","fetchCostCentersData","cost_center","fetch","then","response","json","centers","data","map","center","code","fullname","error","console","log","fetchUserUniqueIdsData","role_id","user_unique_ids","unique_id","uniqueId","handleClickShowPassword","handleMouseDownPassword","e","preventDefault","handleSubmit","event","loading_function","body","FormData","set","post","headers","key","redirect_check","push","structuredSelector","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom'\nimport PropTypes from \"prop-types\"\nimport axios from 'axios';\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\"\nimport { createStructuredSelector } from \"reselect\"\nimport { flash_alert } from 'components/App';\nimport Users from \"components/users/Users\"\nimport UserForm from \"components/users/UserForm\"\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\nimport { useTranslation } from 'react-i18next';\n\nfunction NewUser(props){\n  const [showPassword, setShowpassword] = useState(false);\n  const [firstname, setFirstname] = useState(\"\");\n  const [lastname, setLastname] = useState(\"\");\n  const [password, setPassword] = useState(\"mielePartner\");\n  const [email, setEmail] = useState(\"\");\n  const [roleName, setRoleName] = useState([]);\n  const [country, setCountry] = useState([]);\n  const [surname, setSurname] = useState(\"\");\n  const [cellphone, setCellphone] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [costCenter, setCostCenter] = useState(\"\");\n  const [roleId, setRoleId] = useState(\"\");\n  const [worktime, setWorktime] = useState(\"\");\n  const [passwordClass, setPasswordClass] = useState(\"hidden\");\n  const [redirect, setRedirect] = useState(false);\n  const [disabled, setDisabled] = React.useState(false);\n  // API VALUES\n\n\tconst [userUniqueiIds, setUserUniqueiIds] = useState([]);\n\tconst [costCenters, setCostCenters] = useState([]);\n\tconst [costCenterValue, setCostCenterValue] = useState({value: \"\", label: \"\"});\n\tconst [uniqueiIdsValue, setUniqueiIdsValue] = useState({value: \"\", label: \"\"});\n  const {t} = useTranslation();\n\n  useEffect(() => {\n\t\tfunction fetchCostCentersData(cost_center) {\n\t\t\treturn fetch(`/api/v1/cost_centers`)\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(json => {\n\t\t\t\t\tvar centers = json.data.map(\n\t\t\t\t\t\tfunction(center) {\n\t\t\t\t\t\t\tif(cost_center == center.code){\n\t\t\t\t\t\t\t\tsetCostCenterValue({ value: center.code, label: center.fullname })\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn { value: center.code, label: center.fullname };\n\t\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tsetCostCenters(centers)\n\t\t\t\t})\n\t\t\t\t.catch(error => console.log(error));\n\t\t}\n\t\t\n\t\t function fetchUserUniqueIdsData(role_id) {\n\t\t\treturn fetch(`/api/v1/user_unique_ids?keywords=tickets`)\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(json => {\n\t\t\t\t\tvar user_unique_ids = json.data.map(\n\t\t\t\t\t\tfunction(unique_id) {\n\t\t\t\t\t\t\tif(role_id == unique_id.uniqueId){\n\t\t\t\t\t\t\t\tsetUniqueiIdsValue({ value: unique_id.code, label: unique_id.fullname })\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn { value: unique_id.uniqueId, label: unique_id.fullname };\n\t\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tsetUserUniqueiIds(user_unique_ids)\n\t\t\t\t})\n\t\t\t\t.catch(error => console.log(error));\n\t\t}\n\n\t\t\n    fetchCostCentersData(\"\");\n    fetchUserUniqueIdsData(\"\");\n\t}, []);\n\n\n  function handleClickShowPassword (){\n  \tsetShowpassword(!showPassword);\n  };\n\n  function handleMouseDownPassword(e){\n    e.preventDefault();\n  };\n\n  function handleSubmit(event, loading_function) {\n    event.preventDefault();\n    var body = new FormData();\n    body.set('firstname', firstname);\n    body.set('lastname', lastname);\n    body.set('email', email);\n    body.set('password', password);\n    body.set('roleName', roleName);\n    body.set('country', country);\n    body.set('surname', surname);\n    body.set('cellphone', cellphone);\n    body.set('phone', phone);\n    body.set('cost_center', costCenter);\n    body.set('role_id', roleId);\n    body.set('worktime', worktime);\n    body.set('disabled', disabled);\n\n\t  return axios.post('/api/v1/users', body, { headers: props.headers})\n      \t.then(response => {\n          flash_alert(\"Creado\", \"El usuario ha sido creado satisfactoriamente\", \"success\")\n      \t\tsetRedirect(true);\n      \t})\n        .catch(e => {\n            loading_function(false);\n            if(e.response.data){\n              for (var key in e.response.data) {\n                  flash_alert(\"Error\", e.response.data[key], \"danger\")\n              }\n            }\n        });\n  }\n\tlet redirect_check = []\n\tif (redirect){\n\t\tredirect_check.push(\n\t\t\t<Redirect key=\"redirect-to-users\" to=\"/users\"><Users /></Redirect>\n\t\t);\n\t}\n\n  return (\n\t<React.Fragment>\n    {redirect_check}\n    <Paper className=\"custom-paper\">\n      <h1>{t('users.globalUserForm.newUser')}</h1>\n        <UserForm \n          handleSubmit = {handleSubmit}\n          setShowpassword = {setShowpassword}\n          setFirstname = {setFirstname}\n          setLastname = {setLastname}\n          setPassword = {setPassword}\n          setEmail = {setEmail}\n          setRedirect = {setRedirect}\n          handleClickShowPassword = {handleClickShowPassword}\n          handleMouseDownPassword = {handleMouseDownPassword}\n          firstname = {firstname}\n          lastname = {lastname}\n          email = {email}\n          showPassword = {showPassword}\n          password = {password}\n          roleName ={roleName}\n          setRoleName={setRoleName}\n          surname={surname}\n          setSurname={setSurname}\n          cellphone={cellphone}\n          setCellphone={setCellphone}\n          phone={phone}\n          setPhone={setPhone}\n          costCenter={costCenter}\n          setCostCenter={setCostCenter}\n          roleId={roleId}\n          setRoleId={setRoleId}\n          worktime={worktime}\n          setWorktime={setWorktime}\n          country={country}\n          setCountry={setCountry}\n\t\t\t\t\t  \n\t\t\t\t\tpasswordClass={passwordClass}\n          setPasswordClass={setPasswordClass} \n\n          disabled={disabled}\n          setDisabled={setDisabled}\n          // API values\n\t\t\t\t\tuserUniqueiIds={userUniqueiIds}\n\t\t\t\t\tcostCenters={costCenters}\n\t\t\t\t\tcostCenterValue={costCenterValue}\n\t\t\t\t\tuniqueiIdsValue={uniqueiIdsValue}\n\t\t\t\t\tsetUserUniqueiIds={setUserUniqueiIds}\n\t\t\t\t\tsetCostCenters={setCostCenters}\n\t\t\t\t\tsetCostCenterValue={setCostCenterValue}\n\t\t\t\t\tsetUniqueiIdsValue={setUniqueiIdsValue}\n        />\n      </Paper>\n  \t</React.Fragment>\n  );\n}\n\n\nconst structuredSelector = createStructuredSelector({});\nconst mapDispatchToProps = {};\nexport default connect(structuredSelector, mapDispatchToProps)(NewUser)\n"]},"metadata":{},"sourceType":"module"}