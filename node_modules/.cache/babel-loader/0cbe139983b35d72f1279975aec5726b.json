{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/javascript/components/services/quotations/QuotationDetails.jsx\";\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport { flash_alert } from 'components/App';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport Link from '@material-ui/core/Link';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport TextField from '@material-ui/core/TextField';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button'; //List\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport { csrf, headers, headers_www_form, money_format, product_price, product_price_no_format, quotation_spare_part_price, quotation_spare_part_price_no_format, date_event_format, date_format_without_time, date_difference_in_hours, api_token, site_url, payment_channel_label } from \"constants/csrf\";\nimport { is_TM, is_CS } from \"constants/user_functions\";\nimport { FileIcon, defaultStyles } from 'react-file-icon';\nimport mime from \"mime-to-extensions\";\nimport MaterialTable from 'react-data-table-component';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport AddSparePartDialog from \"components/services/AddSparePartDialog\";\nimport DeleteSparePartDialog from \"components/services/DeleteSparePartDialog\";\nimport EditSparePartDialog from \"components/services/EditSparePartDialog\";\nimport QuotationProductWarranty from \"components/services/quotations/QuotationProductWarranty\"; // Dialog\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle'; // translation\n\nimport { useTranslation } from 'react-i18next';\nimport i18next from 'i18next';\nvar useStyles = makeStyles(function (theme) {\n  return {\n    wrapper: {\n      margin: theme.spacing(1),\n      position: 'relative'\n    },\n    buttonProgress: {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      marginTop: -12,\n      marginLeft: -12\n    }\n  };\n});\n\nfunction QuotationDetails(props) {\n  var _this = this;\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      quotation = _useState2[0],\n      setQuotation = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      requested_spare_parts = _useState4[0],\n      setRequestedSpareParts = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      used_spare_parts = _useState6[0],\n      setUsedSpareParts = _useState6[1]; // Valores de cotizaciÃ³n\n\n\n  var _useState7 = useState(0.0),\n      _useState8 = _slicedToArray(_useState7, 2),\n      spare_parts_amount = _useState8[0],\n      setSparepartsAmount = _useState8[1];\n\n  var _useState9 = useState(0.0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      laborAmount = _useState10[0],\n      setlaborAmount = _useState10[1];\n\n  var _useState11 = useState(0.0),\n      _useState12 = _slicedToArray(_useState11, 2),\n      viaticAmout = _useState12[0],\n      setviaticAmout = _useState12[1];\n\n  var _useState13 = useState(0.0),\n      _useState14 = _slicedToArray(_useState13, 2),\n      subtotalAmount = _useState14[0],\n      setsubtotalAmount = _useState14[1];\n\n  var _useState15 = useState(0.0),\n      _useState16 = _slicedToArray(_useState15, 2),\n      ivaAmount = _useState16[0],\n      setivaAmount = _useState16[1];\n\n  var _useState17 = useState(0.0),\n      _useState18 = _slicedToArray(_useState17, 2),\n      totalAmount = _useState18[0],\n      settotalAmount = _useState18[1]; // Comentarios\n\n\n  var _useState19 = useState(\"\"),\n      _useState20 = _slicedToArray(_useState19, 2),\n      TMbackground = _useState20[0],\n      setTMBackground = _useState20[1];\n\n  var _useState21 = useState(\"\"),\n      _useState22 = _slicedToArray(_useState21, 2),\n      FSbackground = _useState22[0],\n      setFSBackground = _useState22[1];\n\n  var _useState23 = useState(\"\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      Cbackground = _useState24[0],\n      setCBackground = _useState24[1];\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1]; // CustomerProcuctsWarranties\n\n\n  var _useState25 = useState([]),\n      _useState26 = _slicedToArray(_useState25, 2),\n      customer_product_warranties = _useState26[0],\n      setCustomerpProductWarranties = _useState26[1];\n\n  var _useState27 = useState([]),\n      _useState28 = _slicedToArray(_useState27, 2),\n      visit_customer_products = _useState28[0],\n      setVisitCustomerProducts = _useState28[1];\n\n  var classes = useStyles(); // Change viatic Dialog\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      openViaticDialog = _React$useState4[0],\n      setOpenViaticDialog = _React$useState4[1];\n\n  var handleClickOpenViaticDialog = function handleClickOpenViaticDialog() {\n    setOpenViaticDialog(true);\n  };\n\n  var handleCloseViaticDialog = function handleCloseViaticDialog() {\n    setOpenViaticDialog(false);\n  };\n\n  useEffect(function () {\n    if (props.quotation) {\n      props.quotation.viatic_amount > 0 && setviaticAmout(props.quotation.viatic_amount);\n      setQuotation(props.quotation);\n      props.quotation.visit && setVisitCustomerProducts(props.quotation.visit.visit_customer_products); //setRequestedSpareParts(props.quotation.requested_spare_parts)\n      //setUsedSpareParts(props.quotation.used_spare_parts)\n      //setTMBackground(props.quotation.tm_background)\n      //setFSBackground(props.quotation.cs_background)\n      //setCBackground(props.quotation.customer_background)\n      //setlaborAmount(props.quotation.labor_amount)\n\n      setsubtotalAmount(props.quotation.subtotal_amount);\n      setivaAmount(props.quotation.iva_amount);\n      settotalAmount(props.quotation.total_amount);\n      var customer_product_warranties_t = (props.quotation.visit && props.quotation.visit.customer_products || props.customer_products).map(function (customer_product) {\n        var quotation_product_t = props.quotation.quotation_customer_products.find(function (quotation_customer_product) {\n          return quotation_customer_product.customer_product_id == customer_product.id;\n        });\n        var visit_customer_product = props.quotation.visit.visit_customer_products.find(function (visit_customer_product) {\n          return visit_customer_product.customer_product_id == customer_product.id;\n        });\n        var quotation_product = !quotation_product_t && visit_customer_product || quotation_product_t;\n        return {\n          id: customer_product.id,\n          warranty: quotation_product != undefined && quotation_product.warranty || (customer_product.warranty !== undefined ? customer_product.warranty == \"Si\" ? \"Si\" : \"No\" : \"No\"),\n          amount: quotation_product != undefined && (quotation_product.amount && quotation_product.amount || 0) || 0\n        };\n      });\n      setCustomerpProductWarranties(customer_product_warranties_t);\n      setTotals(customer_product_warranties_t, props.quotation.requested_spare_parts, props.quotation.used_spare_parts);\n    }\n  }, [props.quotation, viaticAmout]);\n  useEffect(function () {\n    if (props.quotation) {\n      setRequestedSpareParts(props.quotation.requested_spare_parts);\n      setUsedSpareParts(props.quotation.used_spare_parts);\n      setTMBackground(props.quotation.tm_background);\n      setFSBackground(props.quotation.cs_background);\n      setCBackground(props.quotation.customer_background);\n      setlaborAmount(props.quotation.labor_amount);\n    }\n  }, [props.quotation]);\n  useEffect(function () {\n    props.viaticAmout > 0 && viaticAmout == 0.0 && setviaticAmout(props.viaticAmout);\n  }, [props.viaticAmout]);\n  var spare_part_columns = [{\n    name: i18next.t('globalTables.sparePartColumns.tnr'),\n    selector: 'spare_part.tnr',\n    sortable: true,\n    hide: 'sm'\n  }, {\n    name: i18next.t('globalTables.sparePartColumns.name'),\n    selector: 'spare_part.name',\n    sortable: true,\n    hide: 'md'\n  }, {\n    name: i18next.t('globalTables.sparePartColumns.quantity'),\n    selector: 'quantity',\n    sortable: true,\n    hide: 'md'\n  }, {\n    name: i18next.t('globalTables.sparePartColumns.individualPrice'),\n    selector: 'quantity',\n    sortable: true,\n    hide: 'md',\n    cell: function cell(row) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 9\n        }\n      }, quotation_spare_part_price(row, props.country));\n    }\n  }, {\n    name: i18next.t('globalTables.sparePartColumns.totalPrice'),\n    selector: 'quantity',\n    sortable: true,\n    hide: 'md',\n    cell: function cell(row) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 9\n        }\n      }, quotation_spare_part_price(row, props.country, row.quantity));\n    }\n  }, {\n    name: i18next.t('globalTables.sparePartColumns.warranty'),\n    selector: 'warranty',\n    sortable: true,\n    hide: 'md'\n  }, {\n    name: i18next.t('globalTables.sparePartColumns.actions'),\n    selector: 'id',\n    grow: true,\n    minWidth: \"190px\",\n    cell: function cell(row) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(EditSparePartDialog, {\n        key: \"EditSparePartDialog\" + row.id,\n        quotation_id: row.quotation_id,\n        service_id: row.service_id,\n        service_spare_part_id: row.id,\n        tnr: row.spare_part.tnr,\n        name: row.spare_part.name,\n        quantity: row.quantity,\n        requested_quantity: row.requested_quantity,\n        price: quotation_spare_part_price_no_format(row, props.country),\n        original_price: product_price_no_format(row.spare_part, props.country),\n        from: \"quotation\",\n        headers: headers,\n        callbacks: handlesave,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(DeleteSparePartDialog, {\n        key: \"DeleteSparePartDialog\" + row.id,\n        quotation_id: row.quotation_id,\n        service_id: row.service_id,\n        service_spare_part_id: row.id,\n        tnr: row.spare_part.tnr,\n        name: row.spare_part.name,\n        from: \"quotation\",\n        headers: headers,\n        callbacks: handlesave,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 11\n        }\n      }));\n    }\n  }];\n  var used_spare_part_columns = [{\n    name: i18next.t('globalTables.sparePartColumns.tnr'),\n    selector: 'spare_part.tnr',\n    sortable: true,\n    hide: 'sm'\n  }, {\n    name: i18next.t('globalTables.sparePartColumns.name'),\n    selector: 'spare_part.name',\n    sortable: true,\n    hide: 'md'\n  }, {\n    name: i18next.t('globalTables.sparePartColumns.quantity'),\n    selector: 'quantity',\n    sortable: true,\n    hide: 'md'\n  }, {\n    name: i18next.t('globalTables.sparePartColumns.individualPrice'),\n    selector: 'quantity',\n    sortable: true,\n    hide: 'md',\n    cell: function cell(row) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 252,\n          columnNumber: 9\n        }\n      }, quotation_spare_part_price(row, props.country));\n    }\n  }, {\n    name: i18next.t('globalTables.sparePartColumns.totalPrice'),\n    selector: 'quantity',\n    sortable: true,\n    hide: 'md',\n    cell: function cell(row) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 9\n        }\n      }, quotation_spare_part_price(row, props.country, row.quantity));\n    }\n  }, {\n    name: i18next.t('globalTables.sparePartColumns.warranty'),\n    selector: 'warranty',\n    sortable: true,\n    hide: 'md'\n  }, {\n    name: i18next.t('globalTables.sparePartColumns.actions'),\n    selector: 'id',\n    grow: true,\n    minWidth: \"190px\",\n    cell: function cell(row) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(EditSparePartDialog, {\n        key: \"EditSparePartDialog\" + row.id,\n        quotation_id: row.quotation_id,\n        service_id: row.service_id,\n        service_spare_part_id: row.id,\n        tnr: row.spare_part.tnr,\n        name: row.spare_part.name,\n        quantity: row.quantity,\n        requested_quantity: row.requested_quantity,\n        price: quotation_spare_part_price_no_format(row, props.country),\n        original_price: product_price_no_format(row.spare_part, props.country),\n        from: \"quotation\",\n        headers: headers,\n        callbacks: props.callbacks,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }\n      }));\n    }\n  }];\n\n  function handlesave() {\n    saveQuotation(\"save_from_spare_part\");\n  }\n\n  function saveQuotation(save_type) {\n    var body = new FormData();\n    props.setLoading(true);\n    setLoading(true);\n    body.set('id', quotation.id);\n    body.set('service_id', props.serviceID);\n    body.set('save_type', save_type);\n    body.set('tm_background', TMbackground);\n    body.set('cs_background', FSbackground);\n    body.set('customer_background', Cbackground);\n    body.set('spare_parts_amount', spare_parts_amount);\n    body.set('labor_amount', laborAmount);\n    body.set('viatic_amount', viaticAmout);\n    body.set('subtotal_amount', subtotalAmount);\n    body.set('iva_amount', ivaAmount);\n    body.set('total_amount', totalAmount);\n    customer_product_warranties.forEach(function (customer_product_warranty) {\n      body.append('customer_product_warranties[]', JSON.stringify(customer_product_warranty));\n    });\n    var emails = props.email;\n\n    if (props.email2) {\n      emails = emails + \",\".concat(props.email);\n    }\n\n    body.set('emails', emails);\n    return axios.patch(\"/api/v1/quotations/\".concat(quotation.id), body, {\n      headers: headers_www_form\n    }).then(function (response) {\n      flash_alert(\"\", t('services.quotes.flashAlert.quoteUpdateSuccess'), \"success\");\n      props.callbacks();\n      props.setLoading(false);\n      setLoading(false);\n    })[\"catch\"](function (e) {\n      console.log(e);\n\n      if (e.response.data) {\n        props.setLoading(false);\n        setLoading(false);\n        flash_alert(\"Error\", t('services.quotes.flashAlert.quoteCouldNotBeGenerated'), \"danger\");\n      }\n    });\n  }\n\n  function setCustomerProductWarrantyFromChild(customer_product_id, warranty, amount) {\n    if (customer_product_warranties.length > 0) {\n      var customer_product_warrant_changed = 0;\n      customer_product_warrant_changed = customer_product_warranties.findIndex(function (customer_product_warranty) {\n        return customer_product_warranty.id == customer_product_id;\n      });\n\n      var new_object = _toConsumableArray(customer_product_warranties);\n\n      new_object[customer_product_warrant_changed] && (new_object[customer_product_warrant_changed].amount = parseInt(amount));\n\n      if (warranty != null) {\n        new_object[customer_product_warrant_changed] && (new_object[customer_product_warrant_changed].warranty = warranty);\n      }\n\n      setCustomerpProductWarranties(new_object);\n      setTotals(new_object);\n    }\n  }\n\n  function setTotals(customer_product_warranties_l) {\n    var requested_spare_parts_t = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var used_spare_parts_t = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n    var laborAmount_l = customer_product_warranties_l.map(function (item) {\n      return item.amount;\n    }).reduce(function (prev, curr) {\n      return prev + curr;\n    }, 0);\n    var viaticAmout_l = viaticAmout;\n    var spare_parts_amount_t = 0;\n    var requested_spare_parts_select = requested_spare_parts_t ? requested_spare_parts_t : requested_spare_parts;\n    requested_spare_parts_select.map(function (spare_part) {\n      spare_parts_amount_t += quotation_spare_part_price_no_format(spare_part, props.country, spare_part.quantity);\n    });\n    var subtotalAmount_l = laborAmount_l + viaticAmout + spare_parts_amount_t;\n    var ivaAmount_l = subtotalAmount_l * props.countryIVA;\n    var totalAmount_l = subtotalAmount_l * (props.countryIVA + 1);\n    setSparepartsAmount(spare_parts_amount_t);\n    setlaborAmount(laborAmount_l);\n    setviaticAmout(viaticAmout_l);\n    setsubtotalAmount(subtotalAmount_l);\n    setivaAmount(ivaAmount_l);\n    settotalAmount(totalAmount_l);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    \"class\": \"quotation-product-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 11\n    }\n  }, props.customer_products.map(function (customer_product) {\n    var listId = \"list-quotation-products-\".concat(quotation.id, \"-\").concat(customer_product.id);\n    var customer_product_used_spare_parts = used_spare_parts.filter(function (used_spare_part) {\n      return used_spare_part.customer_product_id == customer_product.id && used_spare_part.quotation_id == quotation.id;\n    });\n    var customer_product_requested_spare_parts = requested_spare_parts.filter(function (requested_spare_part) {\n      return requested_spare_part.customer_product_id == customer_product.id && requested_spare_part.quotation_id == quotation.id;\n    });\n    return /*#__PURE__*/React.createElement(Grid, {\n      \"class\": \"quotation-product-grid\",\n      key: listId,\n      item: true,\n      xs: 12,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      container: true,\n      spacing: 1,\n      direction: \"row\",\n      justify: \"space-between\",\n      alignItems: \"center\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 6,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"quotation-product-name\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 23\n      }\n    }, customer_product.product.name), /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 102\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"quotation-products-ids\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 23\n      }\n    }, \"TNR: \", customer_product.product.tnr, \" - ID: \", customer_product.serial_id)), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      sm: 6,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(QuotationProductWarranty, {\n      serviceID: props.serviceID,\n      customer_product_warranties: customer_product_warranties,\n      visit_customer_products: visit_customer_products,\n      customer_product: customer_product,\n      quotation: quotation,\n      service_type: props.service_type,\n      country: props.country,\n      zipcode: props.zipcode,\n      administrative_demarcation: props.administrative_demarcation,\n      setCustomerProductWarrantyFromChild: setCustomerProductWarrantyFromChild,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"quotation-sparepart-subtitle\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 23\n      }\n    }, t('services.quotes.detailsTab.usedSpareParts')), customer_product_used_spare_parts && /*#__PURE__*/React.createElement(MaterialTable, {\n      noHeader: true,\n      columns: used_spare_part_columns,\n      data: customer_product_used_spare_parts,\n      progressComponent: /*#__PURE__*/React.createElement(CircularProgress, {\n        size: 75,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 48\n        }\n      }),\n      responsive: true,\n      highlightOnHover: true,\n      striped: true,\n      noDataComponent: i18next.t('globalText.NoDataComponent'),\n      paginationComponentOptions: {\n        rowsPerPageText: i18next.t('globalText.rowsPerPageText'),\n        rangeSeparatorText: i18next.t('globalText.rangeSeparatorText'),\n        noRowsPerPage: false,\n        selectAllRowsItem: false,\n        selectAllRowsItemText: i18next.t('globalText.selectAllRowsItemText')\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 421,\n        columnNumber: 27\n      }\n    })), /*#__PURE__*/React.createElement(Grid, {\n      item: true,\n      xs: 12,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"quotation-sparepart-subtitle\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 23\n      }\n    }, t('services.quotes.detailsTab.requestSpareParts'), \"\\xA0\\xA0\\xA0\", /*#__PURE__*/React.createElement(AddSparePartDialog, {\n      key: \"AddSparePartDialog-\".concat(customer_product.id),\n      quotation_id: quotation.id,\n      customer_product_id: customer_product.id,\n      tnr: customer_product.product.tnr,\n      name: customer_product.product.name,\n      from: \"quotation\",\n      headers: headers,\n      callbacks: handlesave,\n      status: \"requested\" // ADD SPARE PARTS\n      ,\n      userLoading: props.userLoading,\n      canAddSparePart: props.canAddSparePart,\n      displayProducTable: props.displayProducTable,\n      classes: props.classes,\n      filterText: props.filterText,\n      changeFilterText: props.changeFilterText,\n      handleClear: props.handleClear,\n      handleAddSparePart: props.handleAddSparePart,\n      products_columns: props.products_columns,\n      products: props.products,\n      total: props.total,\n      handleProductsPerRowsChange: props.handleProductsPerRowsChange,\n      handleProductsPageChange: props.handleProductsPageChange,\n      handleProductRowChange: props.handleProductRowChange,\n      selectedSparePartsRows: props.selectedSparePartsRows,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 25\n      }\n    })), customer_product_requested_spare_parts && /*#__PURE__*/React.createElement(MaterialTable, {\n      noHeader: true,\n      columns: spare_part_columns,\n      data: customer_product_requested_spare_parts,\n      progressComponent: /*#__PURE__*/React.createElement(CircularProgress, {\n        size: 75,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 46\n        }\n      }),\n      responsive: true,\n      highlightOnHover: true,\n      striped: true,\n      noDataComponent: i18next.t('globalText.NoDataComponent'),\n      paginationComponentOptions: {\n        rowsPerPageText: i18next.t('globalText.rowsPerPageText'),\n        rangeSeparatorText: i18next.t('globalText.rangeSeparatorText'),\n        noRowsPerPage: false,\n        selectAllRowsItem: false,\n        selectAllRowsItemText: i18next.t('globalText.selectAllRowsItemText')\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 25\n      }\n    }))));\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    className: \"visit-price-table-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"service-subtitle mg-bottom-30\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 11\n    }\n  }, t('services.quotes.detailsTab.visitAmount')), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 11\n    }\n  }, t('services.quotes.detailsTab.sparePartsAmount'), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 61\n    }\n  }, money_format(props.country, spare_parts_amount))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 496,\n      columnNumber: 11\n    }\n  }, t('services.quotes.detailsTab.viaticAmount'), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    className: \"btn-no-padding\",\n    onClick: handleClickOpenViaticDialog,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 17\n    }\n  }, \"edit\")), money_format(props.country, viaticAmout))), /*#__PURE__*/React.createElement(Dialog, {\n    open: openViaticDialog,\n    onClose: handleCloseViaticDialog,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 13\n    }\n  }, t('services.quotes.detailsTab.editViatics.title')), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DialogContentText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 15\n    }\n  }, t('services.quotes.detailsTab.editViatics.viaticMessage')), /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    label: t('services.quotes.detailsTab.editViatics.tagLabel'),\n    name: \"viatic_amount\",\n    value: viaticAmout,\n    onChange: function onChange(e) {\n      return setviaticAmout(Number(e.target.value));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 523,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleCloseViaticDialog,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 15\n    }\n  }, t('services.quotes.detailsTab.editViatics.okButton')))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 530,\n      columnNumber: 11\n    }\n  }, t('services.quotes.detailsTab.laborAmount'), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 531,\n      columnNumber: 59\n    }\n  }, money_format(props.country, laborAmount))), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 534,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 535,\n      columnNumber: 11\n    }\n  }, t('services.quotes.detailsTab.subTotalAmount'), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 536,\n      columnNumber: 61\n    }\n  }, money_format(props.country, subtotalAmount))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 11\n    }\n  }, t('services.quotes.detailsTab.ivaAmount'), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 540,\n      columnNumber: 57\n    }\n  }, money_format(props.country, ivaAmount))), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 543,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 11\n    }\n  }, t('services.quotes.detailsTab.totalAmount'), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 59\n    }\n  }, money_format(props.country, Number(totalAmount))))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 550,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 551,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    multiline: true,\n    rows: 8,\n    label: t('services.quotes.detailsTab.tmBackground'),\n    name: \"background\",\n    value: TMbackground,\n    onChange: function onChange(e) {\n      return setTMBackground(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 552,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 554,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    multiline: true,\n    rows: 8,\n    label: t('services.quotes.detailsTab.fsBackground'),\n    name: \"background\",\n    value: FSbackground,\n    onChange: function onChange(e) {\n      return setFSBackground(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 555,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 557,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    multiline: true,\n    rows: 8,\n    label: t('services.quotes.detailsTab.cBackground'),\n    name: \"background\",\n    value: Cbackground,\n    onChange: function onChange(e) {\n      return setCBackground(e.target.value);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 558,\n      columnNumber: 15\n    }\n  })))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 563,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return saveQuotation(\"save\");\n    },\n    className: \"quotation-link mg-r-15\",\n    id: \"save-quotation-btn\",\n    variant: \"outlined\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 565,\n      columnNumber: 11\n    }\n  }, is_CS(props.current_user) ? t('services.quotes.detailsTab.saveButton') : \"Guardar Observaciones\"), is_CS(props.current_user) && /*#__PURE__*/React.createElement(Button, {\n    id: \"send-quotation\",\n    disabled: loading,\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: function onClick() {\n      return saveQuotation(\"save_and_send\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 570,\n      columnNumber: 13\n    }\n  }, t('services.quotes.detailsTab.saveAndSendButton'), loading && /*#__PURE__*/React.createElement(CircularProgress, {\n    size: 24,\n    className: classes.buttonProgress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 572,\n      columnNumber: 27\n    }\n  })))));\n}\n\nvar structuredSelector = createStructuredSelector({});\nvar mapDispatchToProps = {};\nexport default connect(structuredSelector, mapDispatchToProps)(QuotationDetails);","map":{"version":3,"sources":["/usr/src/app/javascript/components/services/quotations/QuotationDetails.jsx"],"names":["React","useState","useEffect","axios","connect","createStructuredSelector","flash_alert","InputLabel","FormControl","MenuItem","Select","Link","Checkbox","TextField","createStyles","makeStyles","CircularProgress","Paper","Grid","Button","List","ListItem","ListItemIcon","ListItemSecondaryAction","ListItemText","ListItemAvatar","csrf","headers","headers_www_form","money_format","product_price","product_price_no_format","quotation_spare_part_price","quotation_spare_part_price_no_format","date_event_format","date_format_without_time","date_difference_in_hours","api_token","site_url","payment_channel_label","is_TM","is_CS","FileIcon","defaultStyles","mime","MaterialTable","Skeleton","AddSparePartDialog","DeleteSparePartDialog","EditSparePartDialog","QuotationProductWarranty","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","useTranslation","i18next","useStyles","theme","wrapper","margin","spacing","position","buttonProgress","top","left","marginTop","marginLeft","QuotationDetails","props","t","quotation","setQuotation","requested_spare_parts","setRequestedSpareParts","used_spare_parts","setUsedSpareParts","spare_parts_amount","setSparepartsAmount","laborAmount","setlaborAmount","viaticAmout","setviaticAmout","subtotalAmount","setsubtotalAmount","ivaAmount","setivaAmount","totalAmount","settotalAmount","TMbackground","setTMBackground","FSbackground","setFSBackground","Cbackground","setCBackground","loading","setLoading","customer_product_warranties","setCustomerpProductWarranties","visit_customer_products","setVisitCustomerProducts","classes","openViaticDialog","setOpenViaticDialog","handleClickOpenViaticDialog","handleCloseViaticDialog","viatic_amount","visit","subtotal_amount","iva_amount","total_amount","customer_product_warranties_t","customer_products","map","customer_product","quotation_product_t","quotation_customer_products","find","quotation_customer_product","customer_product_id","id","visit_customer_product","quotation_product","warranty","undefined","amount","setTotals","tm_background","cs_background","customer_background","labor_amount","spare_part_columns","name","selector","sortable","hide","cell","row","country","quantity","grow","minWidth","quotation_id","service_id","spare_part","tnr","requested_quantity","handlesave","used_spare_part_columns","callbacks","saveQuotation","save_type","body","FormData","set","serviceID","forEach","customer_product_warranty","append","JSON","stringify","emails","email","email2","patch","then","response","e","console","log","data","setCustomerProductWarrantyFromChild","length","customer_product_warrant_changed","findIndex","new_object","parseInt","customer_product_warranties_l","requested_spare_parts_t","used_spare_parts_t","laborAmount_l","item","reduce","prev","curr","viaticAmout_l","spare_parts_amount_t","requested_spare_parts_select","subtotalAmount_l","ivaAmount_l","countryIVA","totalAmount_l","listId","customer_product_used_spare_parts","filter","used_spare_part","customer_product_requested_spare_parts","requested_spare_part","product","serial_id","service_type","zipcode","administrative_demarcation","rowsPerPageText","rangeSeparatorText","noRowsPerPage","selectAllRowsItem","selectAllRowsItemText","userLoading","canAddSparePart","displayProducTable","filterText","changeFilterText","handleClear","handleAddSparePart","products_columns","products","total","handleProductsPerRowsChange","handleProductsPageChange","handleProductRowChange","selectedSparePartsRows","Number","target","value","current_user","structuredSelector","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport axios from 'axios';\nimport {connect} from \"react-redux\"\nimport {createStructuredSelector} from \"reselect\";\nimport {flash_alert} from 'components/App';\n\n\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport Link from '@material-ui/core/Link';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport TextField from '@material-ui/core/TextField';\n\nimport {createStyles, makeStyles} from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button'\n\n//List\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport {csrf, headers, headers_www_form, money_format, product_price, product_price_no_format, quotation_spare_part_price, quotation_spare_part_price_no_format, date_event_format, date_format_without_time, date_difference_in_hours, api_token, site_url, payment_channel_label} from \"constants/csrf\"\nimport {is_TM, is_CS} from \"constants/user_functions\"\nimport {FileIcon, defaultStyles} from 'react-file-icon';\nimport mime from \"mime-to-extensions\";\n\nimport MaterialTable from 'react-data-table-component';\nimport Skeleton from '@material-ui/lab/Skeleton';\nimport AddSparePartDialog from \"components/services/AddSparePartDialog\";\nimport DeleteSparePartDialog from \"components/services/DeleteSparePartDialog\";\nimport EditSparePartDialog from \"components/services/EditSparePartDialog\";\nimport QuotationProductWarranty from \"components/services/quotations/QuotationProductWarranty\";\n\n// Dialog\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\n// translation\nimport {useTranslation} from 'react-i18next';\nimport i18next from 'i18next';\n\nconst useStyles = makeStyles((theme) => ({\n\n  wrapper: {\n    margin: theme.spacing(1),\n    position: 'relative',\n  },\n  buttonProgress: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    marginTop: -12,\n    marginLeft: -12,\n  },\n}));\n\nfunction QuotationDetails(props) {\n  const {t} = useTranslation();\n  const [quotation, setQuotation] = useState({});\n  const [requested_spare_parts, setRequestedSpareParts] = useState([]);\n  const [used_spare_parts, setUsedSpareParts] = useState([]);\n  // Valores de cotizaciÃ³n\n  const [spare_parts_amount, setSparepartsAmount] = useState(0.0);\n\n  const [laborAmount, setlaborAmount] = useState(0.0);\n  const [viaticAmout, setviaticAmout] = useState(0.0);\n  const [subtotalAmount, setsubtotalAmount] = useState(0.0);\n  const [ivaAmount, setivaAmount] = useState(0.0);\n  const [totalAmount, settotalAmount] = useState(0.0);\n  // Comentarios\n  const [TMbackground, setTMBackground] = useState(\"\");\n  const [FSbackground, setFSBackground] = useState(\"\");\n  const [Cbackground, setCBackground] = useState(\"\");\n\n  const [loading, setLoading] = React.useState(false);\n  // CustomerProcuctsWarranties\n  const [customer_product_warranties, setCustomerpProductWarranties] = useState([]);\n  const [visit_customer_products, setVisitCustomerProducts] = useState([]);\n\n  const classes = useStyles();\n\n  // Change viatic Dialog\n  const [openViaticDialog, setOpenViaticDialog] = React.useState(false);\n\n\n\n  const handleClickOpenViaticDialog = () => {\n    setOpenViaticDialog(true);\n  };\n\n  const handleCloseViaticDialog = () => {\n    setOpenViaticDialog(false);\n  };\n\n  useEffect(() => {\n    if (props.quotation) {\n      props.quotation.viatic_amount > 0 && setviaticAmout(props.quotation.viatic_amount)\n      setQuotation(props.quotation)\n      props.quotation.visit && setVisitCustomerProducts(props.quotation.visit.visit_customer_products);\n      //setRequestedSpareParts(props.quotation.requested_spare_parts)\n      //setUsedSpareParts(props.quotation.used_spare_parts)\n      //setTMBackground(props.quotation.tm_background)\n      //setFSBackground(props.quotation.cs_background)\n      //setCBackground(props.quotation.customer_background)\n      //setlaborAmount(props.quotation.labor_amount)\n      setsubtotalAmount(props.quotation.subtotal_amount)\n      setivaAmount(props.quotation.iva_amount)\n      settotalAmount(props.quotation.total_amount)\n\n      let customer_product_warranties_t = (props.quotation.visit && props.quotation.visit.customer_products || props.customer_products).map(\n        (customer_product) => {\n          let quotation_product_t = props.quotation.quotation_customer_products.find(quotation_customer_product => quotation_customer_product.customer_product_id == customer_product.id);\n          let visit_customer_product = props.quotation.visit.visit_customer_products.find(visit_customer_product => visit_customer_product.customer_product_id == customer_product.id)\n\n          let quotation_product = (!quotation_product_t && visit_customer_product || quotation_product_t)\n\n          return {\n            id: customer_product.id,\n            warranty: (quotation_product != undefined && quotation_product.warranty || (customer_product.warranty !== undefined ? (customer_product.warranty == \"Si\" ? \"Si\" : \"No\") : \"No\")),\n            amount: (quotation_product != undefined && (quotation_product.amount && quotation_product.amount || 0) || (0)),\n          }\n        }\n      )\n      setCustomerpProductWarranties(customer_product_warranties_t)\n\n      setTotals(customer_product_warranties_t, props.quotation.requested_spare_parts, props.quotation.used_spare_parts);\n\n    }\n  }, [props.quotation, viaticAmout]);\n\n\n\n  useEffect(() => {\n    if (props.quotation) {\n\n      setRequestedSpareParts(props.quotation.requested_spare_parts)\n      setUsedSpareParts(props.quotation.used_spare_parts)\n      setTMBackground(props.quotation.tm_background)\n      setFSBackground(props.quotation.cs_background)\n      setCBackground(props.quotation.customer_background)\n      setlaborAmount(props.quotation.labor_amount)\n\n\n\n    }\n  }, [props.quotation]);\n\n\n  useEffect(() => {\n    props.viaticAmout > 0 && viaticAmout == 0.0 && setviaticAmout(props.viaticAmout)\n  }, [props.viaticAmout]);\n\n  const spare_part_columns = [\n    {\n      name: i18next.t('globalTables.sparePartColumns.tnr'),\n      selector: 'spare_part.tnr',\n      sortable: true,\n      hide: 'sm',\n    },\n    {\n      name: i18next.t('globalTables.sparePartColumns.name'),\n      selector: 'spare_part.name',\n      sortable: true,\n      hide: 'md',\n    },\n    {\n      name: i18next.t('globalTables.sparePartColumns.quantity'),\n      selector: 'quantity',\n      sortable: true,\n      hide: 'md',\n    },\n    {\n      name: i18next.t('globalTables.sparePartColumns.individualPrice'),\n      selector: 'quantity',\n      sortable: true,\n      hide: 'md',\n      cell: row => (\n        <span>\n          {(quotation_spare_part_price(row, props.country))}\n        </span>\n      ),\n    },\n\n    {\n      name: i18next.t('globalTables.sparePartColumns.totalPrice'),\n      selector: 'quantity',\n      sortable: true,\n      hide: 'md',\n      cell: row => (\n        <span>\n          {(quotation_spare_part_price(row, props.country, row.quantity))}\n        </span>\n      ),\n    },\n    {\n      name: i18next.t('globalTables.sparePartColumns.warranty'),\n      selector: 'warranty',\n      sortable: true,\n      hide: 'md',\n    },\n    {\n      name: i18next.t('globalTables.sparePartColumns.actions'),\n      selector: 'id',\n      grow: true,\n      minWidth: \"190px\",\n      cell: row => (\n        <span>\n          <EditSparePartDialog key={\"EditSparePartDialog\" + row.id} quotation_id={row.quotation_id} service_id={row.service_id} service_spare_part_id={row.id} tnr={row.spare_part.tnr} name={row.spare_part.name} quantity={row.quantity} requested_quantity={row.requested_quantity} price={quotation_spare_part_price_no_format(row, props.country)} original_price={product_price_no_format(row.spare_part, props.country)} from={\"quotation\"} headers={headers} callbacks={handlesave} />\n          <DeleteSparePartDialog key={\"DeleteSparePartDialog\" + row.id} quotation_id={row.quotation_id} service_id={row.service_id} service_spare_part_id={row.id} tnr={row.spare_part.tnr} name={row.spare_part.name} from={\"quotation\"} headers={headers} callbacks={handlesave} />\n        </span>\n      ),\n    }\n  ];\n\n\n\n  const used_spare_part_columns = [\n    {\n      name: i18next.t('globalTables.sparePartColumns.tnr'),\n      selector: 'spare_part.tnr',\n      sortable: true,\n      hide: 'sm',\n    },\n    {\n      name: i18next.t('globalTables.sparePartColumns.name'),\n      selector: 'spare_part.name',\n      sortable: true,\n      hide: 'md',\n    },\n    {\n      name: i18next.t('globalTables.sparePartColumns.quantity'),\n      selector: 'quantity',\n      sortable: true,\n      hide: 'md',\n    },\n    {\n      name: i18next.t('globalTables.sparePartColumns.individualPrice'),\n      selector: 'quantity',\n      sortable: true,\n      hide: 'md',\n      cell: row => (\n        <span>\n          {(quotation_spare_part_price(row, props.country))}\n        </span>\n      ),\n    },\n\n\n    {\n      name: i18next.t('globalTables.sparePartColumns.totalPrice'),\n      selector: 'quantity',\n      sortable: true,\n      hide: 'md',\n      cell: row => (\n        <span>\n          {(quotation_spare_part_price(row, props.country, row.quantity))}\n        </span>\n      ),\n    },\n    {\n      name: i18next.t('globalTables.sparePartColumns.warranty'),\n      selector: 'warranty',\n      sortable: true,\n      hide: 'md',\n    },\n    {\n      name: i18next.t('globalTables.sparePartColumns.actions'),\n      selector: 'id',\n      grow: true,\n      minWidth: \"190px\",\n      cell: row => (\n        <span>\n          <EditSparePartDialog key={\"EditSparePartDialog\" + row.id} quotation_id={row.quotation_id} service_id={row.service_id} service_spare_part_id={row.id} tnr={row.spare_part.tnr} name={row.spare_part.name} quantity={row.quantity} requested_quantity={row.requested_quantity} price={quotation_spare_part_price_no_format(row, props.country)} original_price={product_price_no_format(row.spare_part, props.country)} from={\"quotation\"} headers={headers} callbacks={props.callbacks} />\n        </span>\n      ),\n    }\n  ];\n\n\n  function handlesave() {\n    saveQuotation(\"save_from_spare_part\");\n  }\n\n  function saveQuotation(save_type) {\n    var body = new FormData();\n    props.setLoading(true);\n    setLoading(true)\n    body.set('id', quotation.id);\n    body.set('service_id', props.serviceID);\n    body.set('save_type', save_type);\n    body.set('tm_background', TMbackground);\n    body.set('cs_background', FSbackground);\n    body.set('customer_background', Cbackground);\n\n    body.set('spare_parts_amount', spare_parts_amount);\n    body.set('labor_amount', laborAmount);\n    body.set('viatic_amount', viaticAmout);\n    body.set('subtotal_amount', subtotalAmount);\n    body.set('iva_amount', ivaAmount);\n    body.set('total_amount', totalAmount);\n    customer_product_warranties.forEach((customer_product_warranty) => {\n      body.append('customer_product_warranties[]', JSON.stringify(customer_product_warranty));\n    });\n\n    let emails = props.email\n    if (props.email2) {\n      emails = emails + `,${props.email}`\n    }\n\n    body.set('emails', emails);\n\n    return axios.patch(`/api/v1/quotations/${quotation.id}`, body, {headers: headers_www_form})\n      .then(response => {\n        flash_alert(\"\", t('services.quotes.flashAlert.quoteUpdateSuccess'), \"success\");\n        props.callbacks()\n        props.setLoading(false);\n        setLoading(false)\n      })\n      .catch(e => {\n        console.log(e);\n        if (e.response.data) {\n          props.setLoading(false);\n          setLoading(false)\n          flash_alert(\"Error\", t('services.quotes.flashAlert.quoteCouldNotBeGenerated'), \"danger\")\n\n        }\n      });\n  }\n\n\n  function setCustomerProductWarrantyFromChild(customer_product_id, warranty, amount) {\n    if (customer_product_warranties.length > 0) {\n      let customer_product_warrant_changed = 0\n      customer_product_warrant_changed = customer_product_warranties.findIndex(customer_product_warranty => customer_product_warranty.id == customer_product_id)\n      let new_object = [...customer_product_warranties];\n      new_object[customer_product_warrant_changed] && (new_object[customer_product_warrant_changed].amount = parseInt(amount))\n      if (warranty != null) {\n        new_object[customer_product_warrant_changed] && (new_object[customer_product_warrant_changed].warranty = warranty)\n      }\n      setCustomerpProductWarranties(new_object)\n      setTotals(new_object);\n    }\n\n  }\n\n  function setTotals(customer_product_warranties_l, requested_spare_parts_t = null, used_spare_parts_t = null) {\n    let laborAmount_l = customer_product_warranties_l.map(item => item.amount).reduce((prev, curr) => prev + curr, 0)\n    let viaticAmout_l = viaticAmout\n    let spare_parts_amount_t = 0;\n\n    let requested_spare_parts_select = (requested_spare_parts_t ? requested_spare_parts_t : requested_spare_parts)\n\n    requested_spare_parts_select.map((spare_part) => {\n      spare_parts_amount_t += quotation_spare_part_price_no_format(spare_part, props.country, spare_part.quantity)\n    })\n\n    let subtotalAmount_l = laborAmount_l + viaticAmout + spare_parts_amount_t\n    let ivaAmount_l = subtotalAmount_l * props.countryIVA\n    let totalAmount_l = subtotalAmount_l * (props.countryIVA + 1)\n\n    setSparepartsAmount(spare_parts_amount_t)\n    setlaborAmount(laborAmount_l)\n    setviaticAmout(viaticAmout_l)\n    setsubtotalAmount(subtotalAmount_l)\n    setivaAmount(ivaAmount_l)\n    settotalAmount(totalAmount_l)\n\n  }\n\n  return (\n    <React.Fragment>\n      <Grid container spacing={3}>\n        <Grid item xs={12}>\n          <Grid container spacing={3} class=\"quotation-product-container\">\n            {props.customer_products.map((customer_product) => {\n              const listId = `list-quotation-products-${quotation.id}-${customer_product.id}`;\n              const customer_product_used_spare_parts = used_spare_parts.filter(used_spare_part => (used_spare_part.customer_product_id == customer_product.id && used_spare_part.quotation_id == quotation.id))\n              const customer_product_requested_spare_parts = requested_spare_parts.filter(requested_spare_part => (requested_spare_part.customer_product_id == customer_product.id && requested_spare_part.quotation_id == quotation.id))\n              return (\n                <Grid class=\"quotation-product-grid\" key={listId} item xs={12}>\n                  <Grid container spacing={1} direction=\"row\"\n                    justify=\"space-between\"\n                    alignItems=\"center\">\n                    <Grid item xs={12} sm={6}>\n                      <span className=\"quotation-product-name\">{customer_product.product.name}</span><br />\n                      <span className=\"quotation-products-ids\">\n                        TNR: {customer_product.product.tnr} - ID: {customer_product.serial_id}\n                      </span>\n                    </Grid>\n                    <Grid item xs={12} sm={6}>\n                      <QuotationProductWarranty\n                        serviceID={props.serviceID}\n                        customer_product_warranties={customer_product_warranties}\n                        visit_customer_products={visit_customer_products}\n                        customer_product={customer_product}\n                        quotation={quotation}\n                        service_type={props.service_type}\n                        country={props.country}\n                        zipcode={props.zipcode}\n                        administrative_demarcation={props.administrative_demarcation}\n                        setCustomerProductWarrantyFromChild={setCustomerProductWarrantyFromChild}\n                      />\n\n                    </Grid>\n                    <Grid item xs={12}>\n                      <p className=\"quotation-sparepart-subtitle\">{t('services.quotes.detailsTab.usedSpareParts')}\n\n                      </p>\n                      {\n                        customer_product_used_spare_parts &&                         \n                          <MaterialTable\n                            noHeader={true}\n                            columns={used_spare_part_columns}\n                            data={customer_product_used_spare_parts}\n                            progressComponent={<CircularProgress size={75} />}\n                            responsive={true}\n                            highlightOnHover={true}\n                            striped={true}\n                            noDataComponent={i18next.t('globalText.NoDataComponent')}\n                            paginationComponentOptions={{rowsPerPageText: i18next.t('globalText.rowsPerPageText'), rangeSeparatorText: i18next.t('globalText.rangeSeparatorText'), noRowsPerPage: false, selectAllRowsItem: false, selectAllRowsItemText: i18next.t('globalText.selectAllRowsItemText') }}\n                          />\n                      }\n\n                    </Grid>\n                    <Grid item xs={12} >\n                      <p className=\"quotation-sparepart-subtitle\">{t('services.quotes.detailsTab.requestSpareParts')}\n                        &nbsp;&nbsp;&nbsp;\n                        <AddSparePartDialog\n                          key={`AddSparePartDialog-${customer_product.id}`}\n                          quotation_id={quotation.id}\n                          customer_product_id={customer_product.id}\n                          tnr={customer_product.product.tnr}\n                          name={customer_product.product.name}\n                          from={\"quotation\"} headers={headers}\n                          callbacks={handlesave}\n                          status={\"requested\"}\n                          // ADD SPARE PARTS\n\n                          userLoading={props.userLoading}\n                          canAddSparePart={props.canAddSparePart}\n                          displayProducTable={props.displayProducTable}\n                          classes={props.classes}\n                          filterText={props.filterText}\n                          changeFilterText={props.changeFilterText}\n                          handleClear={props.handleClear}\n                          handleAddSparePart={props.handleAddSparePart}\n                          products_columns={props.products_columns}\n                          products={props.products}\n                          total={props.total}\n                          handleProductsPerRowsChange={props.handleProductsPerRowsChange}\n                          handleProductsPageChange={props.handleProductsPageChange}\n                          handleProductRowChange={props.handleProductRowChange}\n                          selectedSparePartsRows={props.selectedSparePartsRows}\n                        />\n                      </p>\n                      {customer_product_requested_spare_parts && \n                        <MaterialTable\n                          noHeader={true}\n                          columns={spare_part_columns}\n                          data={customer_product_requested_spare_parts}\n                          progressComponent={<CircularProgress size={75} />}\n                          responsive={true}\n                          highlightOnHover={true}\n                          striped={true}\n                          noDataComponent={i18next.t('globalText.NoDataComponent')}\n                          paginationComponentOptions={{rowsPerPageText: i18next.t('globalText.rowsPerPageText'), rangeSeparatorText: i18next.t('globalText.rangeSeparatorText'), noRowsPerPage: false, selectAllRowsItem: false, selectAllRowsItemText: i18next.t('globalText.selectAllRowsItemText') }}\n                        />\n                      }\n                    </Grid>\n                  </Grid>\n                </Grid>\n              );\n            })}\n          </Grid>\n        </Grid>\n\n        <Grid item xs={12} className=\"visit-price-table-container\">\n          <p className=\"service-subtitle mg-bottom-30\">{t('services.quotes.detailsTab.visitAmount')}</p>\n\n\n          <p>\n          {t('services.quotes.detailsTab.sparePartsAmount')}<span className=\"pull-right\">{money_format(props.country, spare_parts_amount)}</span>\n          </p>\n\n\n          <p>\n          {t('services.quotes.detailsTab.viaticAmount')}\n            <span className=\"pull-right\">\n              <Button color=\"primary\" className=\"btn-no-padding\" onClick={handleClickOpenViaticDialog}>\n                <i className=\"material-icons\">edit</i>\n              </Button>\n              {money_format(props.country, viaticAmout)}\n            </span>\n          </p>\n\n\n\n          <Dialog open={openViaticDialog} onClose={handleCloseViaticDialog} aria-labelledby=\"form-dialog-title\">\n            <DialogTitle id=\"form-dialog-title\">{t('services.quotes.detailsTab.editViatics.title')}</DialogTitle>\n            <DialogContent>\n              <DialogContentText>\n                {t('services.quotes.detailsTab.editViatics.viaticMessage')}\n              </DialogContentText>\n              <TextField\n                fullWidth\n                variant=\"outlined\"\n                label={t('services.quotes.detailsTab.editViatics.tagLabel')}\n                name=\"viatic_amount\"\n                value={viaticAmout}\n                onChange={(e) => setviaticAmout(Number(e.target.value))}\n              />\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={handleCloseViaticDialog} color=\"primary\">\n              {t('services.quotes.detailsTab.editViatics.okButton')}\n              </Button>\n            </DialogActions>\n          </Dialog>\n\n          <p>\n            {t('services.quotes.detailsTab.laborAmount')} <span className=\"pull-right\">{money_format(props.country, laborAmount)}</span>\n          </p>\n\n          <hr />\n          <p>\n            {t('services.quotes.detailsTab.subTotalAmount')}<span className=\"pull-right\">{money_format(props.country, subtotalAmount)}</span>\n          </p>\n\n          <p>\n            {t('services.quotes.detailsTab.ivaAmount')} <span className=\"pull-right\">{money_format(props.country, ivaAmount)}</span>\n          </p>\n\n          <hr />\n\n          <p>\n            {t('services.quotes.detailsTab.totalAmount')} <span className=\"pull-right\">{money_format(props.country, Number(totalAmount))}</span>\n          </p>\n        </Grid>\n        <Grid item xs={12}>\n          <Grid container spacing={2}>\n            <Grid item xs={12} sm={6}>\n              <TextField fullWidth variant=\"outlined\" multiline rows={8} label={t('services.quotes.detailsTab.tmBackground')} name=\"background\" value={TMbackground} onChange={(e) => setTMBackground(e.target.value)} />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField fullWidth variant=\"outlined\" multiline rows={8} label={t('services.quotes.detailsTab.fsBackground')} name=\"background\" value={FSbackground} onChange={(e) => setFSBackground(e.target.value)} />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField fullWidth variant=\"outlined\" multiline rows={8} label={t('services.quotes.detailsTab.cBackground')} name=\"background\" value={Cbackground} onChange={(e) => setCBackground(e.target.value)} />\n            </Grid>\n          </Grid>\n        </Grid>\n\n        <Grid item xs={12}>\n\n          <Button onClick={() => saveQuotation(\"save\")} className=\"quotation-link mg-r-15\" id=\"save-quotation-btn\" variant=\"outlined\" color=\"primary\">\n            {is_CS(props.current_user) ? t('services.quotes.detailsTab.saveButton') : \"Guardar Observaciones\"}\n          </Button>\n          {\n            is_CS(props.current_user) &&\n            <Button id=\"send-quotation\" disabled={loading} variant=\"contained\" color=\"primary\" onClick={() => saveQuotation(\"save_and_send\")}>\n                {t('services.quotes.detailsTab.saveAndSendButton')}\n              {loading && <CircularProgress size={24} className={classes.buttonProgress} />}\n            </Button>\n          }\n        </Grid>\n\n      </Grid>\n    </React.Fragment>\n  );\n\n}\n\nconst structuredSelector = createStructuredSelector({\n});\nconst mapDispatchToProps = {};\n\nexport default connect(structuredSelector, mapDispatchToProps)(QuotationDetails)\n\n"]},"metadata":{},"sourceType":"module"}