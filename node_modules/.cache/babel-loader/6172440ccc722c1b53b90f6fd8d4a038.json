{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/javascript/components/services/visits/VisitPaymentDetail.jsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport { flash_alert } from 'components/App';\nimport WarnIconValidate from 'components/services/common/WarnIconValidate';\nimport ModalConfirmationAmounts from 'components/services/common/ModalConfirmationAmounts';\nimport CurrencyTextField from '@unicef/material-ui-currency-textfield';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport Box from '@material-ui/core/Box'; // Custom hooks\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button'; // Dates\n\nimport DateFnsUtils from '@date-io/date-fns';\nimport esLocale from \"date-fns/locale/es\";\nimport { MuiPickersUtilsProvider, KeyboardDatePicker } from '@material-ui/pickers';\nimport { DropzoneArea } from 'material-ui-dropzone'; //List\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport { headers, headers_www_form, money_format, payment_channel_label, check_payment_method_name } from \"constants/csrf\";\nimport { FileIcon, defaultStyles } from 'react-file-icon';\nimport mime from \"mime-to-extensions\";\nimport MaterialTable from 'react-data-table-component';\nimport Skeleton from '@material-ui/lab/Skeleton'; // Card\n\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea'; // Dialog\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Image from 'material-ui-image';\nimport { SRLWrapper } from \"simple-react-lightbox\";\nimport { Modal } from '@material-ui/core';\nimport { useTranslation } from \"react-i18next\";\nimport { CURRENCY_SYMBOLS, DECIMAL_PLACES } from 'constants/currency';\nimport i18next from 'i18next';\nvar payment_options = [\"Online\", \"Transferencia\", \"Por Teléfono\", \"Cliente realiza depósito bancario\", \"Cliente paga en domicilio\", \"Garantía producto/manufactura\", \"Garantía Reparación/Instalación\", \"Instalaci costo\", \"Visita en cortesía\", \"Segunda visita Póliza\"];\nvar skip_payment_options = [\"Cliente paga en domicilio\", \"Garantía producto/manufactura\", \"Garantía Reparación/Instalación\", \"Instalación sin costo\", \"Visita en cortesía\", \"Segunda visita Póliza\"];\nvar consumable_columns = [{\n  name: 'TNR',\n  selector: 'consumable.tnr',\n  sortable: true\n}, {\n  name: 'Nombre',\n  selector: 'consumable.name',\n  sortable: true,\n  hide: 'sm'\n}, {\n  name: 'Cantidad requerida',\n  selector: 'quantity',\n  sortable: true\n}, {\n  name: 'Precio',\n  selector: 'amount',\n  sortable: true\n}];\n\nfunction VisitPaymentDetail(props) {\n  var _props$visit$new_amou,\n      _props$visit$new_amou2,\n      _props$visit$new_amou3,\n      _props$visit$new_amou4,\n      _props$visit$new_amou5,\n      _props$visit$new_amou6,\n      _props$visit$new_amou7,\n      _this = this,\n      _React$createElement;\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      files = _useState2[0],\n      setFiles = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedPaymentDate = _useState4[0],\n      setSelectedPaymentDate = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      customerPaymentDate = _useState6[0],\n      setCustomerPaymentDate = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      paymentLink = _useState8[0],\n      setPaymentLink = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      visitPaymentMethod = _useState10[0],\n      setVisitPaymentMethod = _useState10[1];\n\n  var _useState11 = useState(false),\n      _useState12 = _slicedToArray(_useState11, 2),\n      paymentLinkBoolean = _useState12[0],\n      setPaymentLinkBoolean = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      paymentFiles = _useState14[0],\n      setPaymentFiles = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      signatures = _useState16[0],\n      setSignatures = _useState16[1];\n\n  var _useState17 = useState(false),\n      _useState18 = _slicedToArray(_useState17, 2),\n      validated_payment = _useState18[0],\n      setValidatedPayment = _useState18[1]; // Delete image dialog\n\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      openDeleteImageDialog = _React$useState2[0],\n      setOpenDeleteImageDialog = _React$useState2[1];\n\n  var _React$useState3 = React.useState(\"\"),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      currentDeleteImage = _React$useState4[0],\n      setCurrentDeleteImage = _React$useState4[1]; // MOdal\n\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      showModalAmountConfirmation = _useState20[0],\n      setShowModalAmountConfirmation = _useState20[1]; // Visit totals\n\n\n  var _useState21 = useState(props.hourAmout),\n      _useState22 = _slicedToArray(_useState21, 2),\n      hourAmout = _useState22[0],\n      setHourAmout = _useState22[1];\n\n  var _useState23 = useState(props.feeAmount),\n      _useState24 = _slicedToArray(_useState23, 2),\n      feeAmount = _useState24[0],\n      setFeeAmount = _useState24[1];\n\n  var _useState25 = useState(props.consumableAmount),\n      _useState26 = _slicedToArray(_useState25, 2),\n      consumableAmount = _useState26[0],\n      setConsumableAmount = _useState26[1];\n\n  var _useState27 = useState(props.laborAmount),\n      _useState28 = _slicedToArray(_useState27, 2),\n      laborAmount = _useState28[0],\n      setLaborAmount = _useState28[1];\n\n  var _useState29 = useState(props.viaticAmout),\n      _useState30 = _slicedToArray(_useState29, 2),\n      viaticAmout = _useState30[0],\n      setViaticAmout = _useState30[1];\n\n  var _useState31 = useState(\"\"),\n      _useState32 = _slicedToArray(_useState31, 2),\n      totalhours = _useState32[0],\n      setTotalhours = _useState32[1];\n\n  var _useState33 = useState(props.ivaAmount),\n      _useState34 = _slicedToArray(_useState33, 2),\n      ivaAmount = _useState34[0],\n      setIVAAmount = _useState34[1];\n\n  var _useState35 = useState(props.subtotalAmount),\n      _useState36 = _slicedToArray(_useState35, 2),\n      subtotalAmount = _useState36[0],\n      setSubtotalAmount = _useState36[1];\n\n  var _useState37 = useState(props.totalAmount),\n      _useState38 = _slicedToArray(_useState37, 2),\n      totalAmount = _useState38[0],\n      setTotalAmount = _useState38[1];\n\n  var newFeeAmountInitial = ((_props$visit$new_amou = props.visit.new_amounts) === null || _props$visit$new_amou === void 0 ? void 0 : _props$visit$new_amou.fee_amount) || props.feeAmount;\n  var newLaborAmountInitial = ((_props$visit$new_amou2 = props.visit.new_amounts) === null || _props$visit$new_amou2 === void 0 ? void 0 : _props$visit$new_amou2.labor_amount) || props.laborAmount;\n  var newConsumableAmountInitial = ((_props$visit$new_amou3 = props.visit.new_amounts) === null || _props$visit$new_amou3 === void 0 ? void 0 : _props$visit$new_amou3.consumable_amount) || props.consumableAmount;\n  var newViaticAmountInitial = ((_props$visit$new_amou4 = props.visit.new_amounts) === null || _props$visit$new_amou4 === void 0 ? void 0 : _props$visit$new_amou4.viatic_value) || props.visit.viatic_amount;\n  var newSubtotalAmountInitial = ((_props$visit$new_amou5 = props.visit.new_amounts) === null || _props$visit$new_amou5 === void 0 ? void 0 : _props$visit$new_amou5.sub_total_amount) || props.subtotalAmount;\n  var newTotalAmountInitial = ((_props$visit$new_amou6 = props.visit.new_amounts) === null || _props$visit$new_amou6 === void 0 ? void 0 : _props$visit$new_amou6.total_amount) || props.totalAmount;\n  var newIVAAmountInitial = ((_props$visit$new_amou7 = props.visit.new_amounts) === null || _props$visit$new_amou7 === void 0 ? void 0 : _props$visit$new_amou7.iva_amount) || props.ivaAmount;\n\n  var _useState39 = useState(newLaborAmountInitial),\n      _useState40 = _slicedToArray(_useState39, 2),\n      newLaborAmount = _useState40[0],\n      setNewLaborAmount = _useState40[1];\n\n  var _useState41 = useState(newFeeAmountInitial),\n      _useState42 = _slicedToArray(_useState41, 2),\n      newFeeAmount = _useState42[0],\n      setNewFeeAmount = _useState42[1];\n\n  var _useState43 = useState(newViaticAmountInitial),\n      _useState44 = _slicedToArray(_useState43, 2),\n      newViaticAmount = _useState44[0],\n      setNewViaticAmount = _useState44[1];\n\n  var _useState45 = useState(newIVAAmountInitial),\n      _useState46 = _slicedToArray(_useState45, 2),\n      newIvaAmount = _useState46[0],\n      setNewIvaAmount = _useState46[1];\n\n  var _useState47 = useState(newSubtotalAmountInitial),\n      _useState48 = _slicedToArray(_useState47, 2),\n      newSubtotalAmount = _useState48[0],\n      setNewSubtotalAmount = _useState48[1];\n\n  var _useState49 = useState(newTotalAmountInitial),\n      _useState50 = _slicedToArray(_useState49, 2),\n      newTotalAmount = _useState50[0],\n      setNewTotalAmount = _useState50[1];\n\n  var _useState51 = useState(newConsumableAmountInitial),\n      _useState52 = _slicedToArray(_useState51, 2),\n      newConsumableAmount = _useState52[0],\n      setNewConsumableAmount = _useState52[1];\n\n  var _useState53 = useState(props.zipcode),\n      _useState54 = _slicedToArray(_useState53, 2),\n      zipcode = _useState54[0],\n      setZipcode = _useState54[1];\n\n  var _useState55 = useState(false),\n      _useState56 = _slicedToArray(_useState55, 2),\n      blockNewAmounts = _useState56[0],\n      setBlockNewAmounts = _useState56[1];\n\n  var _useState57 = useState(true),\n      _useState58 = _slicedToArray(_useState57, 2),\n      firstLoad = _useState58[0],\n      setFirstLoad = _useState58[1];\n\n  var service_type = props.service_type,\n      subcategory = props.subcategory,\n      administrativeDemarcation = props.administrative_demarcation_fn,\n      country = props.country;\n  var serviceID = props.visit.service_id;\n\n  var _useState59 = useState(props.visit.assigned_quotation_id),\n      _useState60 = _slicedToArray(_useState59, 2),\n      assignedQuotationId = _useState60[0],\n      setAssignedQuotationId = _useState60[1];\n\n  var _useState61 = useState(props.visit.spare_parts_amount),\n      _useState62 = _slicedToArray(_useState61, 2),\n      sparePartsAmount = _useState62[0],\n      setSparePartsAmount = _useState62[1];\n\n  var rolesCanEditAmounts = ['administrador', 'field service'];\n\n  function getUsedSpareParts(product_ids, visit_id) {\n    var params = {\n      visit_id: visit_id\n    };\n    var promises = [];\n    product_ids.forEach(function (product_id) {\n      promises.push(axios.get(\"/api/v1/customer_products/\".concat(product_id, \"/customer_product_used_spare_parts\"), {\n        params: params\n      }));\n    });\n    axios.all(promises).then(axios.spread(function () {\n      for (var _len = arguments.length, responses = new Array(_len), _key = 0; _key < _len; _key++) {\n        responses[_key] = arguments[_key];\n      }\n\n      var data = responses.map(function (response) {\n        return response.data;\n      }).flat();\n\n      if (data.length > 0) {\n        var usedSparePartPrices = data.map(function (usedSparePart) {\n          return usedSparePart.service_spare_part.price;\n        });\n        setNewConsumableAmount(usedSparePartPrices.reduce(function (p, c) {\n          return p + c;\n        }));\n        setFirstLoad(false);\n      }\n    }))[\"catch\"](function (errors) {\n      console.log({\n        errors: errors\n      });\n    });\n  }\n\n  useEffect(function () {\n    var currentRoles = props.currentUser.get_roles_names.split(',').map(function (roleName) {\n      return roleName.toLowerCase();\n    });\n    console.log({\n      currentRoles: currentRoles\n    });\n\n    if (rolesCanEditAmounts.some(function (roleCanEdit) {\n      return currentRoles.includes(roleCanEdit);\n    })) {\n      console.log('Can edit');\n      return;\n    } else {\n      console.log('Cant edit');\n      setBlockNewAmounts(true);\n    }\n  }, []);\n  useEffect(function () {\n    getUsedSpareParts(props.visit.customer_products.map(function (customer_product) {\n      return customer_product.id;\n    }), props.visit.id);\n    setFirstLoad(false);\n  }, []);\n  useEffect(function () {\n    var _props$visit, _props$visit$new_amou8;\n\n    setBlockNewAmounts(!!((_props$visit = props.visit) !== null && _props$visit !== void 0 && (_props$visit$new_amou8 = _props$visit.new_amounts) !== null && _props$visit$new_amou8 !== void 0 && _props$visit$new_amou8.updated_at));\n  }, [props.visit]);\n  useEffect(function () {\n    setZipcode(props.zipcode);\n  }, [props.zipcode]);\n  useEffect(function () {\n    var _props$visit$new_amou9;\n\n    if (props.visit.no_payment && !!!props.visit.assigned_quotation_id) return;\n    if (blockNewAmounts) return;\n    if ((_props$visit$new_amou9 = props.visit.new_amounts) !== null && _props$visit$new_amou9 !== void 0 && _props$visit$new_amou9.updated_at) return; // if (firstLoad) return;\n\n    fetchServiceTotal(country, props.visit.customer_products.map(function (product) {\n      return product.id;\n    }), zipcode, (administrativeDemarcation === null || administrativeDemarcation === void 0 ? void 0 : administrativeDemarcation.admin_name_3) || '', true);\n  }, [newFeeAmount, newLaborAmount, newConsumableAmount, zipcode, newViaticAmount]);\n\n  var handleClickOpenImageDialog = function handleClickOpenImageDialog(image_id) {\n    setCurrentDeleteImage(image_id);\n    setOpenDeleteImageDialog(true);\n  };\n\n  var handleCloseImageDialog = function handleCloseImageDialog() {\n    setOpenDeleteImageDialog(false);\n  };\n\n  var handleDeleteImage = function handleDeleteImage() {\n    setOpenDeleteImageDialog(false);\n    return axios[\"delete\"](\"/api/v1/file_resources/\".concat(currentDeleteImage), {\n      headers: headers\n    }).then(function (response) {\n      var payment_files_t = paymentFiles.filter(function (file) {\n        return String(file.id) != String(currentDeleteImage);\n      });\n      setPaymentFiles(payment_files_t);\n      flash_alert(\"Eliminado!\", t('services.visits.flashAlert.couldDeleteFile'), \"success\");\n    })[\"catch\"](function (e) {\n      flash_alert(\"Error!\", t('services.visits.flashAlert.couldNotDeleteFile'), \"danger\");\n    });\n  };\n\n  function fetchServiceTotal(country_code, products_ids, zipcode_t, administrative_demarcation_name_t) {\n    var from_consumables = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    var from_policy = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n    var event_local = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n    console.log(event_local);\n\n    if (event_local) {\n      var time_diff = date_difference_in_hours(event.start, event.end);\n    }\n\n    if (products_ids.length > 0) {\n      var params = {\n        viatic_value: newViaticAmount,\n        fee_amount: newFeeAmount,\n        labor_price: newLaborAmount,\n        country: country_code,\n        products_ids: products_ids.join(','),\n        service_type: service_type || '',\n        subcategory: subcategory,\n        zipcode: zipcode_t || '',\n        administrative_demarcation_name: administrative_demarcation_name_t || '',\n        quotation_id: assignedQuotationId\n      };\n\n      if (event_local) {\n        params.time_diff = time_diff;\n      }\n\n      return axios.get(\"/api/v1/services/\".concat(serviceID, \"/total_price\"), {\n        params: params\n      }).then(function (_ref) {\n        var json = _ref.data;\n\n        if (json.data) {\n          setTotalhours(json.data.total_hours);\n\n          if (service_type == 'Póliza de Mantenimiento') {} else {\n            if (newConsumableAmount > 0) {\n              var subTotal = json.data.subtotal_amount + newConsumableAmount;\n              var iva = subTotal * json.data.iva;\n              setNewSubtotalAmount(subTotal);\n              setNewIvaAmount(iva);\n              setNewTotalAmount((json.data.subtotal_amount + newConsumableAmount) * (json.data.iva + 1));\n            } else {\n              setNewSubtotalAmount(json.data.subtotal_amount);\n              setNewIvaAmount(json.data.iva_amount);\n              setNewTotalAmount(json.data.total_amount);\n            }\n          }\n        } else {\n          console.log(\"No hay precio.\");\n        }\n      })[\"catch\"](function (error) {\n        return console.log(error);\n      });\n    }\n  }\n\n  useEffect(function () {\n    if (props.selectedPaymentDate) {\n      var aux = new Date(Date.parse(props.selectedPaymentDate));\n      aux.setDate(aux.getDate() + 1);\n      setSelectedPaymentDate(aux);\n    }\n  }, [props.selectedPaymentDate]);\n  useEffect(function () {\n    setCustomerPaymentDate(Date.parse(props.customerPaymentDate));\n  }, [props.customerPaymentDate]);\n  useEffect(function () {\n    setCustomerPaymentDate(props.paymentDate);\n  }, [props.paymentDate]);\n  useEffect(function () {\n    setValidatedPayment(props.validated_payment);\n  }, [props.validated_payment]);\n  useEffect(function () {\n    if (props.visit) {\n      props.visit.payment_date && setSelectedPaymentDate(props.visit.payment_date);\n\n      if (props.paymentData[0] == undefined) {\n        setCustomerPaymentDate(props.visit.customer_payment_date);\n      }\n\n      setVisitPaymentMethod(props.visit.payment_channel);\n      setPaymentFiles(props.visit.payment_resources);\n      setSignatures(props.visit.signatures);\n\n      if (!props.noPaymentCheck) {\n        setValidatedPayment(props.visit.validated_payment || props.visit.payment_state == \"paid\");\n      }\n\n      if (props.visit.no_payment && !!!props.visit.assigned_quotation_id) {\n        setTotalAmount(0);\n        setTotalhours(0);\n        setHourAmout(0);\n        setFeeAmount(0);\n        setLaborAmount(0);\n        setIVAAmount(0);\n        setSubtotalAmount(0);\n        setViaticAmout(0);\n        setConsumableAmount(0);\n        setNewIvaAmount(0);\n        setNewTotalAmount(0);\n        setNewSubtotalAmount(0);\n        setNewLaborAmount(0);\n        setNewFeeAmount(0);\n        setNewViaticAmount(0);\n        setNewConsumableAmount(0);\n        setBlockNewAmounts(true); //los consumibles faltan\n      } else {\n        console.log({\n          visit: props.visit\n        });\n        props.visit.total_amount && setTotalAmount(props.visit.total_amount);\n        props.visit.total_hours && setTotalhours(props.visit.total_hours);\n        props.visit.hour_amount && setHourAmout(props.visit.hour_amount);\n        props.visit.fee_amount && setFeeAmount(props.visit.fee_amount);\n        props.visit.labor_amount && setLaborAmount(props.visit.labor_amount);\n        props.visit.iva_amount && setIVAAmount(props.visit.iva_amount);\n        props.visit.subtotal_amount && setSubtotalAmount(props.visit.subtotal_amount);\n        props.visit.viatic_amount && setViaticAmout(props.visit.viatic_amount);\n      }\n    }\n  }, [props.visit]);\n\n  var handlePaymentDateChange = function handlePaymentDateChange(date) {\n    setSelectedPaymentDate(date);\n  };\n\n  var handleCustomerPaymentDateChange = function handleCustomerPaymentDateChange(date) {\n    setCustomerPaymentDate(date);\n  };\n\n  function onServiceChangeFiles(_x) {\n    return _onServiceChangeFiles.apply(this, arguments);\n  }\n\n  function _onServiceChangeFiles() {\n    _onServiceChangeFiles = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var dT;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (e.length > 0) {\n                dT = [];\n                e.forEach( /*#__PURE__*/function () {\n                  var _ref6 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(item) {\n                    return _regeneratorRuntime.wrap(function _callee$(_context) {\n                      while (1) {\n                        switch (_context.prev = _context.next) {\n                          case 0:\n                            _context.next = 2;\n                            return getBase64(item).then(function (encFile) {\n                              dT.push(encFile);\n                              setFiles(dT);\n                            })[\"catch\"](function (error) {\n                              return console.log(\"error\");\n                            });\n\n                          case 2:\n                          case \"end\":\n                            return _context.stop();\n                        }\n                      }\n                    }, _callee);\n                  }));\n\n                  return function (_x2) {\n                    return _ref6.apply(this, arguments);\n                  };\n                }());\n              }\n\n            case 1:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _onServiceChangeFiles.apply(this, arguments);\n  }\n\n  ;\n\n  function handleMessage(message, type) {\n    if (type == \"error\") {\n      flash_alert(\"\", t('services.visits.flashAlert.fileExceedLimit'), \"error\");\n    }\n  }\n\n  function getBase64(file) {\n    return new Promise(function (resolve, reject) {\n      var reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onload = function () {\n        return resolve({\n          uri_64: reader.result,\n          name: file.name,\n          mime: file.type\n        });\n      };\n\n      reader.onerror = function (error) {\n        return reject(error);\n      };\n    });\n  }\n\n  function handleValidatePaymentSubmit(event) {\n    event.preventDefault();\n\n    if (files.length > 0 || paymentFiles.length > 0 || skip_payment_options.includes(visitPaymentMethod)) {\n      if (!props.loading) {\n        props.setLoading(true);\n      }\n\n      saveVisit(t('services.visits.flashAlert.paymentValidated'));\n    } else {\n      flash_alert(\"Error\", t('services.visits.flashAlert.attachProofOfPayment'), \"danger\");\n    }\n  }\n\n  function saveVisit(update_message) {\n    var body = new FormData();\n    body.set('payment_date', selectedPaymentDate);\n    body.set('customer_payment_date', customerPaymentDate);\n    body.set('payment_channel', payment_channel_label(visitPaymentMethod));\n    files.forEach(function (file) {\n      body.append('payment_files[]', JSON.stringify(file));\n    });\n    return axios.patch(\"/api/v1/visits/\".concat(props.visit.id), body, {\n      headers: headers_www_form\n    }).then(function (response) {\n      flash_alert(t('services.visits.flashAlert.visitUpdatedSuccessfully'), update_message, \"success\");\n      setFiles([]); //callbacks\n\n      props.callbacks();\n      props.setLoading(false);\n    })[\"catch\"](function (e) {\n      if (e.response.data) {\n        props.setLoading(false);\n\n        for (var key in e.response.data) {\n          flash_alert(\"Error\", e.response.data[key], \"danger\");\n        }\n      }\n    });\n  }\n\n  function saveNewAmounts(update_message) {\n    var body = new FormData();\n\n    var newAmounts = _defineProperty({\n      fee_amount: newFeeAmount,\n      labor_amount: newLaborAmount,\n      total_amount: newTotalAmount,\n      consumable_amount: newConsumableAmount,\n      iva_amount: newIvaAmount,\n      sub_total_amount: newSubtotalAmount\n    }, \"total_amount\", newTotalAmount);\n\n    body.set('new_amounts', JSON.stringify(newAmounts));\n    return axios.patch(\"/api/v1/visits/\".concat(props.visit.id), body, {\n      headers: headers_www_form\n    }).then(function (response) {\n      flash_alert(t('services.visits.flashAlert.visitUpdatedSuccessfully'), update_message, \"success\");\n      setFiles([]); //callbacks\n\n      props.callbacks();\n      props.setLoading(false);\n    })[\"catch\"](function (e) {\n      if (e.response.data) {\n        props.setLoading(false);\n\n        for (var key in e.response.data) {\n          flash_alert(\"Error\", e.response.data[key], \"danger\");\n        }\n      }\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ModalConfirmationAmounts, {\n    newTotalAmount: money_format(props.country, newTotalAmount),\n    showModal: showModalAmountConfirmation,\n    setShowModal: setShowModalAmountConfirmation,\n    saveNewAmounts: saveNewAmounts,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"service-subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 488,\n      columnNumber: 11\n    }\n  }, t('services.visits.payments.paymentsDetails')), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    className: props.noPaymentCheck && !validated_payment ? \"hidden\" : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 489,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"mdl-navigation__link service-price-table-value service-price-table-value-check \".concat(props.paymentData[0] != undefined && props.paymentData[0].status == \"completed\" || validated_payment ? \"green-label\" : \"red-label\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 15\n    }\n  }, props.paymentData[0] != undefined && props.paymentData[0].status == \"completed\" || validated_payment ? /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 125\n    }\n  }, \"done\") : /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 492,\n      columnNumber: 166\n    }\n  }, \"close\"), props.paymentData[0] != undefined && props.paymentData[0].status == \"completed\" || validated_payment ? t('services.visits.payments.paidVisit') : t('services.visits.payments.unpaidVisit'))), props.customer.names != undefined && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 497,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 498,\n      columnNumber: 17\n    }\n  }, t('services.visits.payments.name')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 17\n    }\n  }, props.customer.names + \" \" + props.customer.lastname + \" \" + props.customer.surname)), props.customer.rut && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 504,\n      columnNumber: 17\n    }\n  }, t('services.visits.payments.rut')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 505,\n      columnNumber: 17\n    }\n  }, props.customer.rut)), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 509,\n      columnNumber: 13\n    }\n  }, props.paymentData[0] != undefined && customerPaymentDate != \"\" && /*#__PURE__*/React.createElement(MuiPickersUtilsProvider, {\n    utils: DateFnsUtils,\n    locale: esLocale,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 511,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(KeyboardDatePicker, {\n    disabled: true,\n    className: \"payment-date-input\",\n    id: \"date-payment-dialog\",\n    label: \"Fecha de pago\",\n    format: \"dd/MM/yyyy\",\n    value: customerPaymentDate,\n    onChange: handleCustomerPaymentDateChange,\n    KeyboardButtonProps: {\n      'aria-label': 'change date'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 512,\n      columnNumber: 19\n    }\n  })), props.paymentData[0] == undefined && /*#__PURE__*/React.createElement(MuiPickersUtilsProvider, {\n    utils: DateFnsUtils,\n    locale: esLocale,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 527,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(KeyboardDatePicker, {\n    className: \"payment-date-input\",\n    id: \"date-payment-dialog\",\n    label: \"Fecha de pago\",\n    format: \"dd/MM/yyyy\",\n    value: customerPaymentDate,\n    onChange: handleCustomerPaymentDateChange,\n    KeyboardButtonProps: {\n      'aria-label': 'change date'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 528,\n      columnNumber: 19\n    }\n  }))), props.paymentData[0] && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 546,\n      columnNumber: 17\n    }\n  }, t('services.visits.payments.paymentData.payHour')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 547,\n      columnNumber: 17\n    }\n  }, props.paymentTime)), props.paymentData[0] != undefined && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 551,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 552,\n      columnNumber: 17\n    }\n  }, t('services.visits.payments.paymentData.amount')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 553,\n      columnNumber: 17\n    }\n  }, props.paymentData[0] != undefined && money_format(props.country, props.paymentData[0].amount), props.paymentData[0] == undefined && validated_payment && money_format(props.country, props.totalAmount))), props.paymentData[0] != undefined && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 560,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 561,\n      columnNumber: 17\n    }\n  }, t('services.visits.payments.paymentData.referenceNumber')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 562,\n      columnNumber: 17\n    }\n  }, props.paymentData[0].transaction_id)), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 567,\n      columnNumber: 15\n    }\n  }, t('services.visits.payments.paymentData.paymentMethod')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 568,\n      columnNumber: 15\n    }\n  }, props.paymentData[0] != undefined && props.paymentData[0].payment_method_id == 1 && props.paymentType //(payment_channel_label(props.paymentChannel) + \" - \" + props.paymentData[0].payment_method_name)}\n  , props.paymentData[0] != undefined && props.paymentData[0].payment_method_id != 1 && check_payment_method_name(props.paymentChannel, props.paymentData[0].payment_method_name), props.paymentData[0] == undefined && validated_payment && \"Si. Manual\"), props.paymentData[0] == undefined && /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    className: \"MuiFormControl-fullWidth\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 575,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    id: \"service_type-simple-select-outlined-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 576,\n      columnNumber: 19\n    }\n  }, t('services.visits.payments.paymentData.paymentSelect')), /*#__PURE__*/React.createElement(Select, {\n    labelId: \"service_type-simple-select-outlined-label\",\n    id: \"service_type-simple-select-outlined\",\n    value: payment_channel_label(visitPaymentMethod),\n    onChange: function onChange(e) {\n      return setVisitPaymentMethod(e.target.value);\n    },\n    label: \"Tipo de Servicio\",\n    name: \"service_type\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 577,\n      columnNumber: 19\n    }\n  }, payment_options.map(function (value) {\n    return /*#__PURE__*/React.createElement(MenuItem, {\n      key: \"service_type-\" + value,\n      value: value,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 23\n      }\n    }, value);\n  })))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 593,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 594,\n      columnNumber: 15\n    }\n  }, t('services.visits.payments.paymentData.bill?'), \" \", /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 594,\n      columnNumber: 109\n    }\n  }, props.invoiceCheck))), props.invoiceCheck === \"si\" && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 598,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 599,\n      columnNumber: 17\n    }\n  }, t('services.visits.payments.paymentData.billAddress')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 600,\n      columnNumber: 17\n    }\n  }, \"\".concat(props.street_type_fn, \" \").concat(props.street_name_fn, \", \").concat(props.ext_number_fn, \" \").concat(props.int_number_fn, \", \").concat(props.administrative_demarcation_fn != null ? props.administrative_demarcation_fn.admin3_admin1 : props.state_fn).concat(props.zipcode_fn != \"\" ? \", Código Postal: \" + props.zipcode_fn : \"\"))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 606,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MuiPickersUtilsProvider, {\n    utils: DateFnsUtils,\n    locale: esLocale,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 607,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(KeyboardDatePicker, {\n    className: \"payment-date-input\",\n    id: \"date-payment-dialog\",\n    label: props.service_type == \"Reparaciones en Taller\" ? \"Fecha limite para revisión\" : \"Fecha límite de pago\",\n    format: \"dd/MM/yyyy\",\n    value: selectedPaymentDate,\n    onChange: handlePaymentDateChange,\n    KeyboardButtonProps: {\n      'aria-label': 'change date'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 608,\n      columnNumber: 17\n    }\n  }))), new Date() >= (selectedPaymentDate ? selectedPaymentDate : props.selectedPaymentDate) && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 624,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-value warning-text mdl-navigation__link limit-payment-date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 625,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 626,\n      columnNumber: 21\n    }\n  }, \"warning\"), \" \", t('services.visits.payments.limitPaymentDate'))))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    className: props.noPaymentCheck ? \"\" : \"hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 632,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 633,\n      columnNumber: 13\n    }\n  }, props.noPaymentOption != \"No requiere pago\" && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 635,\n      columnNumber: 17\n    }\n  }, t('services.visits.payments.noPaymentOption')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2 \".concat(props.noPaymentOption == \"No requiere pago\" ? \"green-label\" : \"\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 637,\n      columnNumber: 15\n    }\n  }, props.noPaymentOption == \"No requiere pago\" && /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 637,\n      columnNumber: 171\n    }\n  }, \"done\"), props.noPaymentOption)))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    className: \"service-price-table-container visit-price-table-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 643,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 644,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 645,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      color: '#fff',\n      fontSize: '11px',\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 646,\n      columnNumber: 15\n    }\n  }, \"descripcion\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 647,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"light-w\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 648,\n      columnNumber: 15\n    }\n  }, t('services.visits.payments.summaryTable.hourAmount')), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"light-w\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 649,\n      columnNumber: 15\n    }\n  }, t('services.visits.payments.summaryTable.sparePartsAmount')), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"light-w\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 650,\n      columnNumber: 15\n    }\n  }, t('services.visits.payments.summaryTable.feeAmount')), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"light-w\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 651,\n      columnNumber: 15\n    }\n  }, t('services.visits.payments.summaryTable.consumableAmount')), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"light-w\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 652,\n      columnNumber: 15\n    }\n  }, t('services.visits.payments.summaryTable.laborAmount')), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"light-w\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 653,\n      columnNumber: 15\n    }\n  }, t('services.visits.payments.summaryTable.viaticAmount')), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 654,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"light-w\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 655,\n      columnNumber: 15\n    }\n  }, t('services.visits.payments.summaryTable.subTotalAmount')), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"light-w\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 656,\n      columnNumber: 15\n    }\n  }, t('services.visits.payments.summaryTable.ivaAmount')), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 657,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 658,\n      columnNumber: 15\n    }\n  }, t('services.visits.payments.summaryTable.totalAmount'))), /*#__PURE__*/React.createElement(Grid, {\n    style: {\n      textAlign: 'right'\n    },\n    item: true,\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 661,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      fontSize: '11px',\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 662,\n      columnNumber: 15\n    }\n  }, t('services.visits.payments.summaryTable.startingAmount')), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 663,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 664,\n      columnNumber: 15\n    }\n  }, money_format(props.country, hourAmout)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 665,\n      columnNumber: 15\n    }\n  }, money_format(props.country, sparePartsAmount)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 666,\n      columnNumber: 15\n    }\n  }, money_format(props.country, feeAmount)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 667,\n      columnNumber: 15\n    }\n  }, money_format(props.country, consumableAmount)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 668,\n      columnNumber: 15\n    }\n  }, money_format(props.country, laborAmount)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 669,\n      columnNumber: 15\n    }\n  }, money_format(props.country, viaticAmout)), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 670,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 671,\n      columnNumber: 15\n    }\n  }, money_format(props.country, subtotalAmount)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 672,\n      columnNumber: 15\n    }\n  }, money_format(props.country, ivaAmount)), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 673,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 674,\n      columnNumber: 15\n    }\n  }, money_format(props.country, Number(totalAmount)))), /*#__PURE__*/React.createElement(Grid, {\n    style: {\n      textAlign: 'right'\n    },\n    item: true,\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 677,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    style: {\n      fontSize: '11px',\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 678,\n      columnNumber: 15\n    }\n  }, t('services.visits.payments.summaryTable.visitAmount')), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 679,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 680,\n      columnNumber: 15\n    }\n  }, money_format(props.country, hourAmout)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 681,\n      columnNumber: 15\n    }\n  }, money_format(props.country, sparePartsAmount)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 682,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(WarnIconValidate, {\n    oldValue: feeAmount,\n    newValue: newFeeAmount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 683,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(CurrencyTextField, {\n    style: {\n      width: '80px',\n      maxHeight: '24px'\n    },\n    currencySymbol: CURRENCY_SYMBOLS[country],\n    disabled: blockNewAmounts,\n    decimalPlaces: DECIMAL_PLACES[country],\n    onBlur: function onBlur(_ref2) {\n      var value = _ref2.target.value;\n      return setNewFeeAmount(Number(value.split(',').join('')));\n    },\n    digitGroupSeparator: \",\",\n    value: newFeeAmount,\n    size: \"small\",\n    outputFormat: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 684,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 695,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(WarnIconValidate, {\n    oldValue: consumableAmount,\n    newValue: newConsumableAmount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 696,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(CurrencyTextField, {\n    style: {\n      width: '80px',\n      maxHeight: '24px'\n    },\n    currencySymbol: CURRENCY_SYMBOLS[country],\n    disabled: blockNewAmounts,\n    decimalPlaces: DECIMAL_PLACES[country],\n    onBlur: function onBlur(_ref3) {\n      var value = _ref3.target.value;\n      return setNewConsumableAmount(Number(value.split(',').join('')));\n    },\n    digitGroupSeparator: \",\",\n    value: newConsumableAmount,\n    size: \"small\",\n    outputFormat: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 697,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 708,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(WarnIconValidate, {\n    oldValue: laborAmount,\n    newValue: newLaborAmount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 709,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(CurrencyTextField, {\n    style: {\n      width: '80px',\n      maxHeight: '24px'\n    },\n    currencySymbol: CURRENCY_SYMBOLS[country],\n    disabled: blockNewAmounts,\n    decimalPlaces: DECIMAL_PLACES[country],\n    digitGroupSeparator: \",\",\n    onBlur: function onBlur(_ref4) {\n      var value = _ref4.target.value;\n      return setNewLaborAmount(Number(value.split(',').join('')));\n    },\n    value: newLaborAmount,\n    size: \"small\",\n    outputFormat: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 710,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 721,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(WarnIconValidate, {\n    oldValue: viaticAmout,\n    newValue: newViaticAmount,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 722,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(CurrencyTextField, {\n    style: {\n      width: '80px',\n      maxHeight: '24px'\n    },\n    currencySymbol: CURRENCY_SYMBOLS[country],\n    disabled: blockNewAmounts,\n    decimalPlaces: DECIMAL_PLACES[country],\n    digitGroupSeparator: \",\",\n    onBlur: function onBlur(_ref5) {\n      var value = _ref5.target.value;\n      return setNewViaticAmount(Number(value.split(',').join('')));\n    },\n    value: newViaticAmount,\n    size: \"small\",\n    outputFormat: \"number\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 723,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 734,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 735,\n      columnNumber: 15\n    }\n  }, money_format(props.country, newSubtotalAmount)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 736,\n      columnNumber: 15\n    }\n  }, money_format(props.country, newIvaAmount)), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 737,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 738,\n      columnNumber: 15\n    }\n  }, money_format(props.country, Number(newTotalAmount))))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      textAlign: 'right',\n      marginTop: '8px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 741,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: function onClick() {\n      return setShowModalAmountConfirmation(true);\n    },\n    disabled: blockNewAmounts,\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 742,\n      columnNumber: 13\n    }\n  }, t('services.visits.payments.summaryTable.validateAmount')))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 745,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"panel-custom-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 746,\n      columnNumber: 11\n    }\n  }, t('services.visits.payments.consumables')), /*#__PURE__*/React.createElement(MaterialTable, (_React$createElement = {\n    noHeader: true,\n    columns: consumable_columns,\n    data: props.selectedConsumables,\n    progressComponent: /*#__PURE__*/React.createElement(CircularProgress, {\n      size: 75,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 751,\n        columnNumber: 32\n      }\n    }),\n    responsive: true,\n    highlightOnHover: true,\n    striped: true,\n    contextMessage: {\n      singular: 'producto',\n      plural: 'productos',\n      message: 'seleccionados'\n    }\n  }, _defineProperty(_React$createElement, \"highlightOnHover\", true), _defineProperty(_React$createElement, \"striped\", true), _defineProperty(_React$createElement, \"noDataComponent\", i18next.t('globalText.NoDataComponent')), _defineProperty(_React$createElement, \"paginationComponentOptions\", {\n    rowsPerPageText: i18next.t('globalText.rowsPerPageText'),\n    rangeSeparatorText: i18next.t('globalText.rangeSeparatorText'),\n    noRowsPerPage: false,\n    selectAllRowsItem: false,\n    selectAllRowsItemText: i18next.t('globalText.selectAllRowsItemText')\n  }), _defineProperty(_React$createElement, \"__self\", this), _defineProperty(_React$createElement, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 747,\n    columnNumber: 11\n  }), _React$createElement))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 762,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"panel-custom-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 763,\n      columnNumber: 11\n    }\n  }, t('services.visits.payments.spareParts')), /*#__PURE__*/React.createElement(Skeleton, {\n    animation: \"wave\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 764,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Skeleton, {\n    animation: \"wave\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 765,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Skeleton, {\n    animation: \"wave\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 766,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    className: \"mg-b-50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 768,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"panel-custom-title panel-custom-title-padding\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 769,\n      columnNumber: 11\n    }\n  }, t('services.visits.payments.receptionData')), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 770,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 771,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 772,\n      columnNumber: 15\n    }\n  }, t('services.visits.payments.nameAndSignature')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2 panel-custom-title-padding panel-custom-title-display-inline\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 773,\n      columnNumber: 15\n    }\n  }, props.visit.person_accountable && props.visit.person_accountable || t('globalText.noInfo')), /*#__PURE__*/React.createElement(SRLWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 775,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 776,\n      columnNumber: 17\n    }\n  }, signatures && signatures.length > 0 && signatures.map(function (image, index) {\n    var listId = \"signatures-\".concat(image.id);\n    return /*#__PURE__*/React.createElement(Grid, {\n      key: listId,\n      item: true,\n      xs: 6,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 782,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 783,\n        columnNumber: 27\n      }\n    }, /*#__PURE__*/React.createElement(CardActionArea, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 784,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: image.resource_url,\n      className: \"mdl-navigation__link file-image-link\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 785,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: image.resource_url,\n      className: \"file-image\",\n      srl_gallery_image: \"true\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 786,\n        columnNumber: 33\n      }\n    })))));\n  }) || /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 798,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 799,\n      columnNumber: 23\n    }\n  }, t('services.visits.payments.noSignature')))))))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 807,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"service-subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 808,\n      columnNumber: 11\n    }\n  }, t('services.visits.payments.backupData')), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 809,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DropzoneArea, {\n    name: \"services_files\",\n    dropzoneText: t('services.visits.payments.fileUploadInstructions'),\n    onChange: onServiceChangeFiles,\n    showPreviews: true,\n    showPreviewsInDropzone: false,\n    useChipsForPreview: true,\n    previewGridProps: {\n      container: {\n        spacing: 1,\n        direction: 'row'\n      }\n    },\n    previewChipProps: {\n      classes: {\n        root: props.classes.previewChip\n      }\n    },\n    previewText: t('services.visits.payments.selectedFiles'),\n    filesLimit: 10,\n    showAlerts: false,\n    maxFileSize: 10000000,\n    alertSnackbarProps: {\n      anchorOrigin: {\n        vertical: 'top',\n        horizontal: 'right'\n      }\n    },\n    onAlert: handleMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 810,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 828,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"service-subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 829,\n      columnNumber: 11\n    }\n  }, t('services.visits.payments.uploadFiles')), /*#__PURE__*/React.createElement(List, {\n    dense: true,\n    className: props.classes.root,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 830,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(SRLWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 831,\n      columnNumber: 13\n    }\n  }, paymentFiles && paymentFiles.map(function (serviceFile) {\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: \"serviceFile\" + serviceFile.id,\n      button: true,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 834,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(ListItemAvatar, {\n      className: \"service-payment-icon\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 835,\n        columnNumber: 21\n      }\n    }, serviceFile.mime.includes(\"image\") && /*#__PURE__*/React.createElement(\"a\", {\n      href: serviceFile.resource_url,\n      className: \"mdl-navigation__link file-image-link\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 839,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: serviceFile.resource_url,\n      className: \"file-image\",\n      srl_gallery_image: \"true\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 840,\n        columnNumber: 27\n      }\n    })) || /*#__PURE__*/React.createElement(FileIcon, Object.assign({\n      size: 2,\n      extension: mime.extension(serviceFile.mime)\n    }, defaultStyles[mime.extension(serviceFile.mime)], {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 847,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"new-service-link\",\n      href: serviceFile.resource_url,\n      target: \"_blank\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 855,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: \"small\",\n      color: \"primary\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 856,\n        columnNumber: 23\n      }\n    }, serviceFile.name, \" \", serviceFile.description != \"\" ? \"- \" + serviceFile.description : \"\")), /*#__PURE__*/React.createElement(ListItemSecondaryAction, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 860,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      size: \"small\",\n      color: \"primary\",\n      onClick: function onClick() {\n        return handleClickOpenImageDialog(serviceFile.id);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 862,\n        columnNumber: 23\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      className: \"material-icons\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 863,\n        columnNumber: 25\n      }\n    }, \"delete\"))));\n  })))), /*#__PURE__*/React.createElement(Dialog, {\n    open: openDeleteImageDialog,\n    onClose: handleCloseImageDialog,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 872,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 873,\n      columnNumber: 11\n    }\n  }, t('services.visits.payments.deleteFile.deleteImage')), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 874,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DialogContentText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 875,\n      columnNumber: 13\n    }\n  }, t('services.visits.payments.deleteFile.confirmMessage'))), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 879,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleCloseImageDialog,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 880,\n      columnNumber: 13\n    }\n  }, t('services.visits.payments.deleteFile.no')), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleDeleteImage,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 883,\n      columnNumber: 13\n    }\n  }, t('services.visits.payments.deleteFile.yes')))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 888,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 889,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    id: \"service-save-payment\",\n    size: \"large\",\n    type: \"submit\",\n    variant: \"outlined\",\n    color: \"primary\",\n    onClick: handleValidatePaymentSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 890,\n      columnNumber: 11\n    }\n  }, t('services.visits.payments.validatePayment')), props.loading && /*#__PURE__*/React.createElement(CircularProgress, {\n    size: 24,\n    className: props.classes.buttonProgress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 893,\n      columnNumber: 29\n    }\n  }))));\n}\n\nvar structuredSelector = createStructuredSelector({\n  currentUser: function currentUser(state) {\n    return state.current_user;\n  }\n});\nvar mapDispatchToProps = {};\nexport default connect(structuredSelector, mapDispatchToProps)(VisitPaymentDetail);","map":{"version":3,"sources":["/usr/src/app/javascript/components/services/visits/VisitPaymentDetail.jsx"],"names":["React","useState","useEffect","axios","connect","createStructuredSelector","flash_alert","WarnIconValidate","ModalConfirmationAmounts","CurrencyTextField","InputLabel","FormControl","MenuItem","Select","Box","CircularProgress","Grid","Button","DateFnsUtils","esLocale","MuiPickersUtilsProvider","KeyboardDatePicker","DropzoneArea","List","ListItem","ListItemSecondaryAction","ListItemAvatar","headers","headers_www_form","money_format","payment_channel_label","check_payment_method_name","FileIcon","defaultStyles","mime","MaterialTable","Skeleton","Card","CardActionArea","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Image","SRLWrapper","Modal","useTranslation","CURRENCY_SYMBOLS","DECIMAL_PLACES","i18next","payment_options","skip_payment_options","consumable_columns","name","selector","sortable","hide","VisitPaymentDetail","props","t","files","setFiles","selectedPaymentDate","setSelectedPaymentDate","customerPaymentDate","setCustomerPaymentDate","paymentLink","setPaymentLink","visitPaymentMethod","setVisitPaymentMethod","paymentLinkBoolean","setPaymentLinkBoolean","paymentFiles","setPaymentFiles","signatures","setSignatures","validated_payment","setValidatedPayment","openDeleteImageDialog","setOpenDeleteImageDialog","currentDeleteImage","setCurrentDeleteImage","showModalAmountConfirmation","setShowModalAmountConfirmation","hourAmout","setHourAmout","feeAmount","setFeeAmount","consumableAmount","setConsumableAmount","laborAmount","setLaborAmount","viaticAmout","setViaticAmout","totalhours","setTotalhours","ivaAmount","setIVAAmount","subtotalAmount","setSubtotalAmount","totalAmount","setTotalAmount","newFeeAmountInitial","visit","new_amounts","fee_amount","newLaborAmountInitial","labor_amount","newConsumableAmountInitial","consumable_amount","newViaticAmountInitial","viatic_value","viatic_amount","newSubtotalAmountInitial","sub_total_amount","newTotalAmountInitial","total_amount","newIVAAmountInitial","iva_amount","newLaborAmount","setNewLaborAmount","newFeeAmount","setNewFeeAmount","newViaticAmount","setNewViaticAmount","newIvaAmount","setNewIvaAmount","newSubtotalAmount","setNewSubtotalAmount","newTotalAmount","setNewTotalAmount","newConsumableAmount","setNewConsumableAmount","zipcode","setZipcode","blockNewAmounts","setBlockNewAmounts","firstLoad","setFirstLoad","service_type","subcategory","administrativeDemarcation","administrative_demarcation_fn","country","serviceID","service_id","assigned_quotation_id","assignedQuotationId","setAssignedQuotationId","spare_parts_amount","sparePartsAmount","setSparePartsAmount","rolesCanEditAmounts","getUsedSpareParts","product_ids","visit_id","params","promises","forEach","product_id","push","get","all","then","spread","responses","data","map","response","flat","length","usedSparePartPrices","usedSparePart","service_spare_part","price","reduce","p","c","errors","console","log","currentRoles","currentUser","get_roles_names","split","roleName","toLowerCase","some","roleCanEdit","includes","customer_products","customer_product","id","updated_at","no_payment","fetchServiceTotal","product","admin_name_3","handleClickOpenImageDialog","image_id","handleCloseImageDialog","handleDeleteImage","payment_files_t","filter","file","String","e","country_code","products_ids","zipcode_t","administrative_demarcation_name_t","from_consumables","from_policy","event_local","time_diff","date_difference_in_hours","event","start","end","labor_price","join","administrative_demarcation_name","quotation_id","json","total_hours","subTotal","subtotal_amount","iva","error","aux","Date","parse","setDate","getDate","paymentDate","payment_date","paymentData","undefined","customer_payment_date","payment_channel","payment_resources","noPaymentCheck","payment_state","hour_amount","handlePaymentDateChange","date","handleCustomerPaymentDateChange","onServiceChangeFiles","dT","item","getBase64","encFile","handleMessage","message","type","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","uri_64","result","onerror","handleValidatePaymentSubmit","preventDefault","loading","setLoading","saveVisit","update_message","body","FormData","set","append","JSON","stringify","patch","callbacks","key","saveNewAmounts","newAmounts","status","customer","names","lastname","surname","rut","paymentTime","amount","transaction_id","payment_method_id","paymentType","paymentChannel","payment_method_name","target","value","invoiceCheck","street_type_fn","street_name_fn","ext_number_fn","int_number_fn","admin3_admin1","state_fn","zipcode_fn","noPaymentOption","color","fontSize","textAlign","Number","width","maxHeight","marginTop","selectedConsumables","singular","plural","rowsPerPageText","rangeSeparatorText","noRowsPerPage","selectAllRowsItem","selectAllRowsItemText","person_accountable","image","index","listId","resource_url","container","spacing","direction","classes","root","previewChip","anchorOrigin","vertical","horizontal","serviceFile","extension","description","buttonProgress","structuredSelector","state","current_user","mapDispatchToProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,wBAAT,QAAyC,UAAzC;AACA,SAASC,WAAT,QAA4B,gBAA5B;AACA,OAAOC,gBAAP,MAA6B,6CAA7B;AACA,OAAOC,wBAAP,MAAqC,qDAArC;AAGA,OAAOC,iBAAP,MAA8B,wCAA9B;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,GAAP,MAAgB,uBAAhB,C,CAEA;;AACA,OAAOC,gBAAP,MAA6B,oCAA7B;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,MAAP,MAAmB,0BAAnB,C,CACA;;AACA,OAAOC,YAAP,MAAyB,mBAAzB;AACA,OAAOC,QAAP,MAAqB,oBAArB;AACA,SACEC,uBADF,EAEEC,kBAFF,QAGO,sBAHP;AAIA,SAASC,YAAT,QAA6B,sBAA7B,C,CAEA;;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,QAAP,MAAqB,4BAArB;AACA,OAAOC,uBAAP,MAAoC,2CAApC;AACA,OAAOC,cAAP,MAA2B,kCAA3B;AACA,SAASC,OAAT,EAAkBC,gBAAlB,EAAoCC,YAApC,EAAkDC,qBAAlD,EAAyEC,yBAAzE,QAA0G,gBAA1G;AAEA,SAASC,QAAT,EAAmBC,aAAnB,QAAwC,iBAAxC;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AAEA,OAAOC,aAAP,MAA0B,4BAA1B;AACA,OAAOC,QAAP,MAAqB,2BAArB,C,CAEA;;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,cAAP,MAA2B,kCAA3B,C,CACA;;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,aAAP,MAA0B,iCAA1B;AACA,OAAOC,iBAAP,MAA8B,qCAA9B;AACA,OAAOC,WAAP,MAAwB,+BAAxB;AACA,OAAOC,KAAP,MAAkB,mBAAlB;AAEA,SAASC,UAAT,QAA2B,uBAA3B;AACA,SAASC,KAAT,QAAsB,mBAAtB;AACA,SAASC,cAAT,QAA+B,eAA/B;AACA,SAASC,gBAAT,EAA2BC,cAA3B,QAAiD,oBAAjD;AACA,OAAOC,OAAP,MAAoB,SAApB;AAEA,IAAMC,eAAe,GAAG,CAAC,QAAD,EAAW,eAAX,EAA4B,cAA5B,EAA4C,mCAA5C,EAAiF,2BAAjF,EAA8G,+BAA9G,EAA+I,iCAA/I,EAAkL,iBAAlL,EAAqM,oBAArM,EAA2N,uBAA3N,CAAxB;AAEA,IAAMC,oBAAoB,GAAG,CAAC,2BAAD,EAA8B,+BAA9B,EAA+D,iCAA/D,EAAkG,uBAAlG,EAA2H,oBAA3H,EAAiJ,uBAAjJ,CAA7B;AAEA,IAAMC,kBAAkB,GAAG,CACzB;AACEC,EAAAA,IAAI,EAAE,KADR;AAEEC,EAAAA,QAAQ,EAAE,gBAFZ;AAGEC,EAAAA,QAAQ,EAAE;AAHZ,CADyB,EAMzB;AACEF,EAAAA,IAAI,EAAE,QADR;AAEEC,EAAAA,QAAQ,EAAE,iBAFZ;AAGEC,EAAAA,QAAQ,EAAE,IAHZ;AAIEC,EAAAA,IAAI,EAAE;AAJR,CANyB,EAYzB;AACEH,EAAAA,IAAI,EAAE,oBADR;AAEEC,EAAAA,QAAQ,EAAE,UAFZ;AAGEC,EAAAA,QAAQ,EAAE;AAHZ,CAZyB,EAiBzB;AACEF,EAAAA,IAAI,EAAE,QADR;AAEEC,EAAAA,QAAQ,EAAE,QAFZ;AAGEC,EAAAA,QAAQ,EAAE;AAHZ,CAjByB,CAA3B;;AA2BA,SAASE,kBAAT,CAA4BC,KAA5B,EAAmC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AACjC,wBAAcZ,cAAc,EAA5B;AAAA,MAAQa,CAAR,mBAAQA,CAAR;;AACA,kBAA0B3D,QAAQ,CAAC,EAAD,CAAlC;AAAA;AAAA,MAAO4D,KAAP;AAAA,MAAcC,QAAd;;AAEA,mBAAsD7D,QAAQ,CAAC,EAAD,CAA9D;AAAA;AAAA,MAAO8D,mBAAP;AAAA,MAA4BC,sBAA5B;;AACA,mBAAsD/D,QAAQ,CAAC,EAAD,CAA9D;AAAA;AAAA,MAAOgE,mBAAP;AAAA,MAA4BC,sBAA5B;;AACA,mBAAsCjE,QAAQ,CAAC,EAAD,CAA9C;AAAA;AAAA,MAAOkE,WAAP;AAAA,MAAoBC,cAApB;;AACA,mBAAoDnE,QAAQ,CAAC,EAAD,CAA5D;AAAA;AAAA,MAAOoE,kBAAP;AAAA,MAA2BC,qBAA3B;;AACA,oBAAoDrE,QAAQ,CAAC,KAAD,CAA5D;AAAA;AAAA,MAAOsE,kBAAP;AAAA,MAA2BC,qBAA3B;;AAEA,oBAAwCvE,QAAQ,CAAC,EAAD,CAAhD;AAAA;AAAA,MAAOwE,YAAP;AAAA,MAAqBC,eAArB;;AACA,oBAAoCzE,QAAQ,CAAC,EAAD,CAA5C;AAAA;AAAA,MAAO0E,UAAP;AAAA,MAAmBC,aAAnB;;AAEA,oBAAiD3E,QAAQ,CAAC,KAAD,CAAzD;AAAA;AAAA,MAAO4E,iBAAP;AAAA,MAA0BC,mBAA1B,kBAbiC,CAejC;;;AACA,wBAA0D9E,KAAK,CAACC,QAAN,CAAe,KAAf,CAA1D;AAAA;AAAA,MAAO8E,qBAAP;AAAA,MAA8BC,wBAA9B;;AACA,yBAAoDhF,KAAK,CAACC,QAAN,CAAe,EAAf,CAApD;AAAA;AAAA,MAAOgF,kBAAP;AAAA,MAA2BC,qBAA3B,uBAjBiC,CAmBjC;;;AACA,oBAAsEjF,QAAQ,CAAC,KAAD,CAA9E;AAAA;AAAA,MAAOkF,2BAAP;AAAA,MAAoCC,8BAApC,kBApBiC,CAsBjC;;;AACA,oBAAkCnF,QAAQ,CAAC0D,KAAK,CAAC0B,SAAP,CAA1C;AAAA;AAAA,MAAOA,SAAP;AAAA,MAAkBC,YAAlB;;AACA,oBAAkCrF,QAAQ,CAAC0D,KAAK,CAAC4B,SAAP,CAA1C;AAAA;AAAA,MAAOA,SAAP;AAAA,MAAkBC,YAAlB;;AACA,oBAAgDvF,QAAQ,CAAC0D,KAAK,CAAC8B,gBAAP,CAAxD;AAAA;AAAA,MAAOA,gBAAP;AAAA,MAAyBC,mBAAzB;;AACA,oBAAsCzF,QAAQ,CAAC0D,KAAK,CAACgC,WAAP,CAA9C;AAAA;AAAA,MAAOA,WAAP;AAAA,MAAoBC,cAApB;;AACA,oBAAsC3F,QAAQ,CAAC0D,KAAK,CAACkC,WAAP,CAA9C;AAAA;AAAA,MAAOA,WAAP;AAAA,MAAoBC,cAApB;;AACA,oBAAoC7F,QAAQ,CAAC,EAAD,CAA5C;AAAA;AAAA,MAAO8F,UAAP;AAAA,MAAmBC,aAAnB;;AAEA,oBAAkC/F,QAAQ,CAAC0D,KAAK,CAACsC,SAAP,CAA1C;AAAA;AAAA,MAAOA,SAAP;AAAA,MAAkBC,YAAlB;;AACA,oBAA4CjG,QAAQ,CAAC0D,KAAK,CAACwC,cAAP,CAApD;AAAA;AAAA,MAAOA,cAAP;AAAA,MAAuBC,iBAAvB;;AACA,oBAAsCnG,QAAQ,CAAC0D,KAAK,CAAC0C,WAAP,CAA9C;AAAA;AAAA,MAAOA,WAAP;AAAA,MAAoBC,cAApB;;AAEA,MAAMC,mBAAmB,GAAG,0BAAA5C,KAAK,CAAC6C,KAAN,CAAYC,WAAZ,gFAAyBC,UAAzB,KAAuC/C,KAAK,CAAC4B,SAAzE;AACA,MAAMoB,qBAAqB,GAAG,2BAAAhD,KAAK,CAAC6C,KAAN,CAAYC,WAAZ,kFAAyBG,YAAzB,KAAyCjD,KAAK,CAACgC,WAA7E;AACA,MAAMkB,0BAA0B,GAAG,2BAAAlD,KAAK,CAAC6C,KAAN,CAAYC,WAAZ,kFAAyBK,iBAAzB,KAA8CnD,KAAK,CAAC8B,gBAAvF;AACA,MAAMsB,sBAAsB,GAAG,2BAAApD,KAAK,CAAC6C,KAAN,CAAYC,WAAZ,kFAAyBO,YAAzB,KAAyCrD,KAAK,CAAC6C,KAAN,CAAYS,aAApF;AAEA,MAAMC,wBAAwB,GAAG,2BAAAvD,KAAK,CAAC6C,KAAN,CAAYC,WAAZ,kFAAyBU,gBAAzB,KAA6CxD,KAAK,CAACwC,cAApF;AACA,MAAMiB,qBAAqB,GAAG,2BAAAzD,KAAK,CAAC6C,KAAN,CAAYC,WAAZ,kFAAyBY,YAAzB,KAAyC1D,KAAK,CAAC0C,WAA7E;AACA,MAAMiB,mBAAmB,GAAG,2BAAA3D,KAAK,CAAC6C,KAAN,CAAYC,WAAZ,kFAAyBc,UAAzB,KAAuC5D,KAAK,CAACsC,SAAzE;;AAEA,oBAA4ChG,QAAQ,CAAC0G,qBAAD,CAApD;AAAA;AAAA,MAAOa,cAAP;AAAA,MAAuBC,iBAAvB;;AACA,oBAAwCxH,QAAQ,CAACsG,mBAAD,CAAhD;AAAA;AAAA,MAAOmB,YAAP;AAAA,MAAqBC,eAArB;;AACA,oBAA8C1H,QAAQ,CAAC8G,sBAAD,CAAtD;AAAA;AAAA,MAAOa,eAAP;AAAA,MAAwBC,kBAAxB;;AACA,oBAAwC5H,QAAQ,CAACqH,mBAAD,CAAhD;AAAA;AAAA,MAAOQ,YAAP;AAAA,MAAqBC,eAArB;;AACA,oBAAkD9H,QAAQ,CAACiH,wBAAD,CAA1D;AAAA;AAAA,MAAOc,iBAAP;AAAA,MAA0BC,oBAA1B;;AACA,oBAA4ChI,QAAQ,CAACmH,qBAAD,CAApD;AAAA;AAAA,MAAOc,cAAP;AAAA,MAAuBC,iBAAvB;;AACA,oBAAsDlI,QAAQ,CAAC4G,0BAAD,CAA9D;AAAA;AAAA,MAAOuB,mBAAP;AAAA,MAA4BC,sBAA5B;;AAEA,oBAA8BpI,QAAQ,CAAC0D,KAAK,CAAC2E,OAAP,CAAtC;AAAA;AAAA,MAAOA,OAAP;AAAA,MAAgBC,UAAhB;;AACA,oBAA8CtI,QAAQ,CAAC,KAAD,CAAtD;AAAA;AAAA,MAAOuI,eAAP;AAAA,MAAwBC,kBAAxB;;AACA,oBAAkCxI,QAAQ,CAAC,IAAD,CAA1C;AAAA;AAAA,MAAOyI,SAAP;AAAA,MAAkBC,YAAlB;;AAEA,MAAQC,YAAR,GAAyGjF,KAAzG,CAAQiF,YAAR;AAAA,MAAsBC,WAAtB,GAAyGlF,KAAzG,CAAsBkF,WAAtB;AAAA,MAAkEC,yBAAlE,GAAyGnF,KAAzG,CAAmCoF,6BAAnC;AAAA,MAA6FC,OAA7F,GAAyGrF,KAAzG,CAA6FqF,OAA7F;AACA,MAAMC,SAAS,GAAGtF,KAAK,CAAC6C,KAAN,CAAY0C,UAA9B;;AACA,oBAAsDjJ,QAAQ,CAAC0D,KAAK,CAAC6C,KAAN,CAAY2C,qBAAb,CAA9D;AAAA;AAAA,MAAOC,mBAAP;AAAA,MAA4BC,sBAA5B;;AACA,oBAAgDpJ,QAAQ,CAAC0D,KAAK,CAAC6C,KAAN,CAAY8C,kBAAb,CAAxD;AAAA;AAAA,MAAOC,gBAAP;AAAA,MAAyBC,mBAAzB;;AAEA,MAAMC,mBAAmB,GAAG,CAAC,eAAD,EAAkB,eAAlB,CAA5B;;AAEA,WAASC,iBAAT,CAA2BC,WAA3B,EAAwCC,QAAxC,EAAkD;AAChD,QAAMC,MAAM,GAAG;AACbD,MAAAA,QAAQ,EAARA;AADa,KAAf;AAIA,QAAIE,QAAQ,GAAG,EAAf;AAEAH,IAAAA,WAAW,CAACI,OAAZ,CAAoB,UAAAC,UAAU,EAAI;AAChCF,MAAAA,QAAQ,CAACG,IAAT,CAAc9J,KAAK,CAAC+J,GAAN,qCAAuCF,UAAvC,yCAAuF;AAAEH,QAAAA,MAAM,EAANA;AAAF,OAAvF,CAAd;AACD,KAFD;AAIA1J,IAAAA,KAAK,CAACgK,GAAN,CAAUL,QAAV,EAAoBM,IAApB,CAAyBjK,KAAK,CAACkK,MAAN,CAAa,YAAkB;AAAA,wCAAdC,SAAc;AAAdA,QAAAA,SAAc;AAAA;;AACtD,UAAMC,IAAI,GAAGD,SAAS,CAACE,GAAV,CAAc,UAAAC,QAAQ,EAAI;AACrC,eAAOA,QAAQ,CAACF,IAAhB;AACD,OAFY,EAEVG,IAFU,EAAb;;AAGA,UAAIH,IAAI,CAACI,MAAL,GAAc,CAAlB,EAAqB;AACnB,YAAMC,mBAAmB,GAAGL,IAAI,CAACC,GAAL,CAAS,UAAAK,aAAa;AAAA,iBAAIA,aAAa,CAACC,kBAAd,CAAiCC,KAArC;AAAA,SAAtB,CAA5B;AACA1C,QAAAA,sBAAsB,CAACuC,mBAAmB,CAACI,MAApB,CAA2B,UAACC,CAAD,EAAIC,CAAJ;AAAA,iBAAUD,CAAC,GAAGC,CAAd;AAAA,SAA3B,CAAD,CAAtB;AACAvC,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACD;AACF,KATwB,CAAzB,WASU,UAAAwC,MAAM,EAAI;AAClBC,MAAAA,OAAO,CAACC,GAAR,CAAY;AAAEF,QAAAA,MAAM,EAANA;AAAF,OAAZ;AACD,KAXD;AAYD;;AAEDjL,EAAAA,SAAS,CAAC,YAAM;AACd,QAAMoL,YAAY,GAAG3H,KAAK,CAAC4H,WAAN,CAAkBC,eAAlB,CAAkCC,KAAlC,CAAwC,GAAxC,EAA6CjB,GAA7C,CAAiD,UAAAkB,QAAQ;AAAA,aAAIA,QAAQ,CAACC,WAAT,EAAJ;AAAA,KAAzD,CAArB;AACAP,IAAAA,OAAO,CAACC,GAAR,CAAY;AAAEC,MAAAA,YAAY,EAAZA;AAAF,KAAZ;;AACA,QAAI7B,mBAAmB,CAACmC,IAApB,CAAyB,UAAAC,WAAW;AAAA,aAAIP,YAAY,CAACQ,QAAb,CAAsBD,WAAtB,CAAJ;AAAA,KAApC,CAAJ,EAAiF;AAC/ET,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACA;AACD,KAHD,MAGO;AACLD,MAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACA5C,MAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACD;AAEF,GAXQ,EAWN,EAXM,CAAT;AAaAvI,EAAAA,SAAS,CAAC,YAAM;AACdwJ,IAAAA,iBAAiB,CAAC/F,KAAK,CAAC6C,KAAN,CAAYuF,iBAAZ,CAA8BvB,GAA9B,CAAkC,UAAAwB,gBAAgB;AAAA,aAAIA,gBAAgB,CAACC,EAArB;AAAA,KAAlD,CAAD,EAA6EtI,KAAK,CAAC6C,KAAN,CAAYyF,EAAzF,CAAjB;AACAtD,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACD,GAHQ,EAGN,EAHM,CAAT;AAKAzI,EAAAA,SAAS,CAAC,YAAM;AAAA;;AACduI,IAAAA,kBAAkB,CAAC,CAAC,kBAAC9E,KAAK,CAAC6C,KAAP,mEAAC,aAAaC,WAAd,mDAAC,uBAA0ByF,UAA3B,CAAF,CAAlB;AACD,GAFQ,EAEN,CAACvI,KAAK,CAAC6C,KAAP,CAFM,CAAT;AAIAtG,EAAAA,SAAS,CAAC,YAAM;AACdqI,IAAAA,UAAU,CAAC5E,KAAK,CAAC2E,OAAP,CAAV;AAED,GAHQ,EAGN,CAAC3E,KAAK,CAAC2E,OAAP,CAHM,CAAT;AAKApI,EAAAA,SAAS,CAAC,YAAM;AAAA;;AACd,QAAIyD,KAAK,CAAC6C,KAAN,CAAY2F,UAAZ,IAA0B,CAAE,CAAC,CAACxI,KAAK,CAAC6C,KAAN,CAAY2C,qBAA9C,EAAsE;AACtE,QAAIX,eAAJ,EAAqB;AACrB,kCAAI7E,KAAK,CAAC6C,KAAN,CAAYC,WAAhB,mDAAI,uBAAyByF,UAA7B,EAAyC,OAH3B,CAId;;AACAE,IAAAA,iBAAiB,CAACpD,OAAD,EACfrF,KAAK,CAAC6C,KAAN,CAAYuF,iBAAZ,CAA8BvB,GAA9B,CAAkC,UAAC6B,OAAD;AAAA,aAAaA,OAAO,CAACJ,EAArB;AAAA,KAAlC,CADe,EAEf3D,OAFe,EAGd,CAAAQ,yBAAyB,SAAzB,IAAAA,yBAAyB,WAAzB,YAAAA,yBAAyB,CAAEwD,YAA3B,KAA2C,EAH7B,EAIf,IAJe,CAAjB;AAKD,GAVQ,EAUN,CAAC5E,YAAD,EAAeF,cAAf,EAA+BY,mBAA/B,EAAoDE,OAApD,EAA6DV,eAA7D,CAVM,CAAT;;AAYA,MAAM2E,0BAA0B,GAAG,SAA7BA,0BAA6B,CAACC,QAAD,EAAc;AAC/CtH,IAAAA,qBAAqB,CAACsH,QAAD,CAArB;AACAxH,IAAAA,wBAAwB,CAAC,IAAD,CAAxB;AACD,GAHD;;AAKA,MAAMyH,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;AACnCzH,IAAAA,wBAAwB,CAAC,KAAD,CAAxB;AACD,GAFD;;AAIA,MAAM0H,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC9B1H,IAAAA,wBAAwB,CAAC,KAAD,CAAxB;AACA,WAAO7E,KAAK,UAAL,kCAAuC8E,kBAAvC,GAA6D;AAAEtD,MAAAA,OAAO,EAAEA;AAAX,KAA7D,EACJyI,IADI,CACC,UAAAK,QAAQ,EAAI;AAChB,UAAIkC,eAAe,GAAGlI,YAAY,CAACmI,MAAb,CAAoB,UAAAC,IAAI;AAAA,eAAIC,MAAM,CAACD,IAAI,CAACZ,EAAN,CAAN,IAAmBa,MAAM,CAAC7H,kBAAD,CAA7B;AAAA,OAAxB,CAAtB;AACAP,MAAAA,eAAe,CAACiI,eAAD,CAAf;AACArM,MAAAA,WAAW,CAAC,YAAD,EAAesD,CAAC,CAAC,4CAAD,CAAhB,EAAgE,SAAhE,CAAX;AACD,KALI,WAME,UAAAmJ,CAAC,EAAI;AACVzM,MAAAA,WAAW,CAAC,QAAD,EAAWsD,CAAC,CAAC,+CAAD,CAAZ,EAA+D,QAA/D,CAAX;AAED,KATI,CAAP;AAUD,GAZD;;AAcA,WAASwI,iBAAT,CAA2BY,YAA3B,EAAyCC,YAAzC,EAAuDC,SAAvD,EAAkEC,iCAAlE,EAAwK;AAAA,QAAnEC,gBAAmE,uEAAhD,KAAgD;AAAA,QAAzCC,WAAyC,uEAA3B,KAA2B;AAAA,QAApBC,WAAoB,uEAAN,IAAM;AACtKlC,IAAAA,OAAO,CAACC,GAAR,CAAYiC,WAAZ;;AACA,QAAIA,WAAJ,EAAiB;AACf,UAAIC,SAAS,GAAGC,wBAAwB,CAACC,KAAK,CAACC,KAAP,EAAcD,KAAK,CAACE,GAApB,CAAxC;AACD;;AAED,QAAIV,YAAY,CAACtC,MAAb,GAAsB,CAA1B,EAA6B;AAC3B,UAAMd,MAAM,GAAG;AACb7C,QAAAA,YAAY,EAAEY,eADD;AAEblB,QAAAA,UAAU,EAAEgB,YAFC;AAGbkG,QAAAA,WAAW,EAAEpG,cAHA;AAIbwB,QAAAA,OAAO,EAAEgE,YAJI;AAKbC,QAAAA,YAAY,EAAEA,YAAY,CAACY,IAAb,CAAkB,GAAlB,CALD;AAMbjF,QAAAA,YAAY,EAAEA,YAAY,IAAI,EANjB;AAObC,QAAAA,WAAW,EAAEA,WAPA;AAQbP,QAAAA,OAAO,EAAE4E,SAAS,IAAI,EART;AASbY,QAAAA,+BAA+B,EAAEX,iCAAiC,IAAI,EATzD;AAUbY,QAAAA,YAAY,EAAE3E;AAVD,OAAf;;AAaA,UAAIkE,WAAJ,EAAiB;AACfzD,QAAAA,MAAM,CAAC0D,SAAP,GAAmBA,SAAnB;AACD;;AAED,aAAOpN,KAAK,CAAC+J,GAAN,4BAA8BjB,SAA9B,mBAAuD;AAAEY,QAAAA,MAAM,EAANA;AAAF,OAAvD,EACJO,IADI,CACC,gBAAoB;AAAA,YAAX4D,IAAW,QAAjBzD,IAAiB;;AACxB,YAAIyD,IAAI,CAACzD,IAAT,EAAe;AACbvE,UAAAA,aAAa,CAACgI,IAAI,CAACzD,IAAL,CAAU0D,WAAX,CAAb;;AAEA,cAAIrF,YAAY,IAAI,yBAApB,EAA+C,CAC9C,CADD,MACO;AACL,gBAAIR,mBAAmB,GAAG,CAA1B,EAA6B;AAC3B,kBAAM8F,QAAQ,GAAGF,IAAI,CAACzD,IAAL,CAAU4D,eAAV,GAA4B/F,mBAA7C;AACA,kBAAMgG,GAAG,GAAGF,QAAQ,GAAGF,IAAI,CAACzD,IAAL,CAAU6D,GAAjC;AACAnG,cAAAA,oBAAoB,CAACiG,QAAD,CAApB;AACAnG,cAAAA,eAAe,CAACqG,GAAD,CAAf;AACAjG,cAAAA,iBAAiB,CAAC,CAAC6F,IAAI,CAACzD,IAAL,CAAU4D,eAAV,GAA4B/F,mBAA7B,KAAqD4F,IAAI,CAACzD,IAAL,CAAU6D,GAAV,GAAgB,CAArE,CAAD,CAAjB;AACD,aAND,MAMO;AACLnG,cAAAA,oBAAoB,CAAC+F,IAAI,CAACzD,IAAL,CAAU4D,eAAX,CAApB;AACApG,cAAAA,eAAe,CAACiG,IAAI,CAACzD,IAAL,CAAUhD,UAAX,CAAf;AACAY,cAAAA,iBAAiB,CAAC6F,IAAI,CAACzD,IAAL,CAAUlD,YAAX,CAAjB;AACD;AACF;AACF,SAjBD,MAiBO;AACL+D,UAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACD;AACF,OAtBI,WAuBE,UAAAgD,KAAK;AAAA,eAAIjD,OAAO,CAACC,GAAR,CAAYgD,KAAZ,CAAJ;AAAA,OAvBP,CAAP;AAwBD;AACF;;AAGDnO,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIyD,KAAK,CAACI,mBAAV,EAA+B;AAE7B,UAAIuK,GAAG,GAAG,IAAIC,IAAJ,CAASA,IAAI,CAACC,KAAL,CAAW7K,KAAK,CAACI,mBAAjB,CAAT,CAAV;AACAuK,MAAAA,GAAG,CAACG,OAAJ,CAAYH,GAAG,CAACI,OAAJ,KAAgB,CAA5B;AACA1K,MAAAA,sBAAsB,CAACsK,GAAD,CAAtB;AACD;AACF,GAPQ,EAON,CAAC3K,KAAK,CAACI,mBAAP,CAPM,CAAT;AASA7D,EAAAA,SAAS,CAAC,YAAM;AACdgE,IAAAA,sBAAsB,CAACqK,IAAI,CAACC,KAAL,CAAW7K,KAAK,CAACM,mBAAjB,CAAD,CAAtB;AACD,GAFQ,EAEN,CAACN,KAAK,CAACM,mBAAP,CAFM,CAAT;AAIA/D,EAAAA,SAAS,CAAC,YAAM;AACdgE,IAAAA,sBAAsB,CAACP,KAAK,CAACgL,WAAP,CAAtB;AACD,GAFQ,EAEN,CAAChL,KAAK,CAACgL,WAAP,CAFM,CAAT;AAKAzO,EAAAA,SAAS,CAAC,YAAM;AACd4E,IAAAA,mBAAmB,CAACnB,KAAK,CAACkB,iBAAP,CAAnB;AACD,GAFQ,EAEN,CAAClB,KAAK,CAACkB,iBAAP,CAFM,CAAT;AAIA3E,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIyD,KAAK,CAAC6C,KAAV,EAAiB;AACf7C,MAAAA,KAAK,CAAC6C,KAAN,CAAYoI,YAAZ,IAA4B5K,sBAAsB,CAACL,KAAK,CAAC6C,KAAN,CAAYoI,YAAb,CAAlD;;AACA,UAAIjL,KAAK,CAACkL,WAAN,CAAkB,CAAlB,KAAwBC,SAA5B,EAAuC;AACrC5K,QAAAA,sBAAsB,CAACP,KAAK,CAAC6C,KAAN,CAAYuI,qBAAb,CAAtB;AACD;;AACDzK,MAAAA,qBAAqB,CAACX,KAAK,CAAC6C,KAAN,CAAYwI,eAAb,CAArB;AACAtK,MAAAA,eAAe,CAACf,KAAK,CAAC6C,KAAN,CAAYyI,iBAAb,CAAf;AACArK,MAAAA,aAAa,CAACjB,KAAK,CAAC6C,KAAN,CAAY7B,UAAb,CAAb;;AAEA,UAAI,CAAChB,KAAK,CAACuL,cAAX,EAA2B;AACzBpK,QAAAA,mBAAmB,CAACnB,KAAK,CAAC6C,KAAN,CAAY3B,iBAAZ,IAAiClB,KAAK,CAAC6C,KAAN,CAAY2I,aAAZ,IAA6B,MAA/D,CAAnB;AACD;;AACD,UAAIxL,KAAK,CAAC6C,KAAN,CAAY2F,UAAZ,IAA0B,CAAE,CAAC,CAACxI,KAAK,CAAC6C,KAAN,CAAY2C,qBAA9C,EAAsE;AAEpE7C,QAAAA,cAAc,CAAC,CAAD,CAAd;AACAN,QAAAA,aAAa,CAAC,CAAD,CAAb;AACAV,QAAAA,YAAY,CAAC,CAAD,CAAZ;AACAE,QAAAA,YAAY,CAAC,CAAD,CAAZ;AACAI,QAAAA,cAAc,CAAC,CAAD,CAAd;AACAM,QAAAA,YAAY,CAAC,CAAD,CAAZ;AACAE,QAAAA,iBAAiB,CAAC,CAAD,CAAjB;AACAN,QAAAA,cAAc,CAAC,CAAD,CAAd;AACAJ,QAAAA,mBAAmB,CAAC,CAAD,CAAnB;AAEAqC,QAAAA,eAAe,CAAC,CAAD,CAAf;AACAI,QAAAA,iBAAiB,CAAC,CAAD,CAAjB;AACAF,QAAAA,oBAAoB,CAAC,CAAD,CAApB;AACAR,QAAAA,iBAAiB,CAAC,CAAD,CAAjB;AACAE,QAAAA,eAAe,CAAC,CAAD,CAAf;AACAE,QAAAA,kBAAkB,CAAC,CAAD,CAAlB;AACAQ,QAAAA,sBAAsB,CAAC,CAAD,CAAtB;AACAI,QAAAA,kBAAkB,CAAC,IAAD,CAAlB,CAnBoE,CAoBpE;AACD,OArBD,MAqBO;AACL2C,QAAAA,OAAO,CAACC,GAAR,CAAY;AAAE7E,UAAAA,KAAK,EAAE7C,KAAK,CAAC6C;AAAf,SAAZ;AACA7C,QAAAA,KAAK,CAAC6C,KAAN,CAAYa,YAAZ,IAA4Bf,cAAc,CAAC3C,KAAK,CAAC6C,KAAN,CAAYa,YAAb,CAA1C;AACA1D,QAAAA,KAAK,CAAC6C,KAAN,CAAYyH,WAAZ,IAA2BjI,aAAa,CAACrC,KAAK,CAAC6C,KAAN,CAAYyH,WAAb,CAAxC;AACAtK,QAAAA,KAAK,CAAC6C,KAAN,CAAY4I,WAAZ,IAA2B9J,YAAY,CAAC3B,KAAK,CAAC6C,KAAN,CAAY4I,WAAb,CAAvC;AACAzL,QAAAA,KAAK,CAAC6C,KAAN,CAAYE,UAAZ,IAA0BlB,YAAY,CAAC7B,KAAK,CAAC6C,KAAN,CAAYE,UAAb,CAAtC;AACA/C,QAAAA,KAAK,CAAC6C,KAAN,CAAYI,YAAZ,IAA4BhB,cAAc,CAACjC,KAAK,CAAC6C,KAAN,CAAYI,YAAb,CAA1C;AACAjD,QAAAA,KAAK,CAAC6C,KAAN,CAAYe,UAAZ,IAA0BrB,YAAY,CAACvC,KAAK,CAAC6C,KAAN,CAAYe,UAAb,CAAtC;AACA5D,QAAAA,KAAK,CAAC6C,KAAN,CAAY2H,eAAZ,IAA+B/H,iBAAiB,CAACzC,KAAK,CAAC6C,KAAN,CAAY2H,eAAb,CAAhD;AACAxK,QAAAA,KAAK,CAAC6C,KAAN,CAAYS,aAAZ,IAA6BnB,cAAc,CAACnC,KAAK,CAAC6C,KAAN,CAAYS,aAAb,CAA3C;AACD;AACF;AACF,GA9CQ,EA8CN,CAACtD,KAAK,CAAC6C,KAAP,CA9CM,CAAT;;AAmDA,MAAM6I,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACC,IAAD,EAAU;AACxCtL,IAAAA,sBAAsB,CAACsL,IAAD,CAAtB;AACD,GAFD;;AAIA,MAAMC,+BAA+B,GAAG,SAAlCA,+BAAkC,CAACD,IAAD,EAAU;AAChDpL,IAAAA,sBAAsB,CAACoL,IAAD,CAAtB;AACD,GAFD;;AAtRiC,WA2RlBE,oBA3RkB;AAAA;AAAA;;AAAA;AAAA,qFA2RjC,kBAAoCzC,CAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AACE,kBAAIA,CAAC,CAACpC,MAAF,GAAW,CAAf,EAAkB;AACV8E,gBAAAA,EADU,GACL,EADK;AAEhB1C,gBAAAA,CAAC,CAAChD,OAAF;AAAA,uFAAU,iBAAe2F,IAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mCAEFC,SAAS,CAACD,IAAD,CAAT,CACHtF,IADG,CACE,UAACwF,OAAD,EAAa;AACjBH,8BAAAA,EAAE,CAACxF,IAAH,CAAQ2F,OAAR;AACA9L,8BAAAA,QAAQ,CAAC2L,EAAD,CAAR;AACD,6BAJG,WAIK,UAAApB,KAAK;AAAA,qCAAIjD,OAAO,CAACC,GAAR,CAAY,OAAZ,CAAJ;AAAA,6BAJV,CAFE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAV;;AAAA;AAAA;AAAA;AAAA;AAUD;;AAbH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KA3RiC;AAAA;AAAA;;AAyShC;;AAED,WAASwE,aAAT,CAAuBC,OAAvB,EAAgCC,IAAhC,EAAsC;AACpC,QAAIA,IAAI,IAAI,OAAZ,EAAqB;AACnBzP,MAAAA,WAAW,CAAC,EAAD,EAAKsD,CAAC,CAAC,4CAAD,CAAN,EAAsD,OAAtD,CAAX;AACD;AACF;;AAED,WAAS+L,SAAT,CAAmB9C,IAAnB,EAAyB;AACvB,WAAO,IAAImD,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,UAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;AACAD,MAAAA,MAAM,CAACE,aAAP,CAAqBxD,IAArB;;AACAsD,MAAAA,MAAM,CAACG,MAAP,GAAgB;AAAA,eAAML,OAAO,CAAC;AAC5BM,UAAAA,MAAM,EAAEJ,MAAM,CAACK,MADa;AAE5BlN,UAAAA,IAAI,EAAEuJ,IAAI,CAACvJ,IAFiB;AAG5BpB,UAAAA,IAAI,EAAE2K,IAAI,CAACkD;AAHiB,SAAD,CAAb;AAAA,OAAhB;;AAKAI,MAAAA,MAAM,CAACM,OAAP,GAAiB,UAAApC,KAAK;AAAA,eAAI6B,MAAM,CAAC7B,KAAD,CAAV;AAAA,OAAtB;AACD,KATM,CAAP;AAUD;;AACD,WAASqC,2BAAT,CAAqCjD,KAArC,EAA4C;AAC1CA,IAAAA,KAAK,CAACkD,cAAN;;AACA,QAAK9M,KAAK,CAAC8G,MAAN,GAAe,CAAf,IAAoBlG,YAAY,CAACkG,MAAb,GAAsB,CAA3C,IAAiDvH,oBAAoB,CAAC0I,QAArB,CAA8BzH,kBAA9B,CAArD,EAAwG;AACtG,UAAI,CAACV,KAAK,CAACiN,OAAX,EAAoB;AAClBjN,QAAAA,KAAK,CAACkN,UAAN,CAAiB,IAAjB;AAED;;AACDC,MAAAA,SAAS,CAAClN,CAAC,CAAC,6CAAD,CAAF,CAAT;AACD,KAND,MAMO;AACLtD,MAAAA,WAAW,CAAC,OAAD,EAAUsD,CAAC,CAAC,iDAAD,CAAX,EAAgE,QAAhE,CAAX;AACD;AAEF;;AAED,WAASkN,SAAT,CAAmBC,cAAnB,EAAmC;AACjC,QAAIC,IAAI,GAAG,IAAIC,QAAJ,EAAX;AACAD,IAAAA,IAAI,CAACE,GAAL,CAAS,cAAT,EAAyBnN,mBAAzB;AACAiN,IAAAA,IAAI,CAACE,GAAL,CAAS,uBAAT,EAAkCjN,mBAAlC;AACA+M,IAAAA,IAAI,CAACE,GAAL,CAAS,iBAAT,EAA4BpP,qBAAqB,CAACuC,kBAAD,CAAjD;AACAR,IAAAA,KAAK,CAACkG,OAAN,CAAc,UAAC8C,IAAD,EAAU;AACtBmE,MAAAA,IAAI,CAACG,MAAL,CAAY,iBAAZ,EAA+BC,IAAI,CAACC,SAAL,CAAexE,IAAf,CAA/B;AACD,KAFD;AAIA,WAAO1M,KAAK,CAACmR,KAAN,0BAA8B3N,KAAK,CAAC6C,KAAN,CAAYyF,EAA1C,GAAgD+E,IAAhD,EAAsD;AAAErP,MAAAA,OAAO,EAAEC;AAAX,KAAtD,EACJwI,IADI,CACC,UAAAK,QAAQ,EAAI;AAChBnK,MAAAA,WAAW,CAACsD,CAAC,CAAC,qDAAD,CAAF,EAA2DmN,cAA3D,EAA2E,SAA3E,CAAX;AACAjN,MAAAA,QAAQ,CAAC,EAAD,CAAR,CAFgB,CAGhB;;AACAH,MAAAA,KAAK,CAAC4N,SAAN;AACA5N,MAAAA,KAAK,CAACkN,UAAN,CAAiB,KAAjB;AAED,KARI,WASE,UAAA9D,CAAC,EAAI;AACV,UAAIA,CAAC,CAACtC,QAAF,CAAWF,IAAf,EAAqB;AACnB5G,QAAAA,KAAK,CAACkN,UAAN,CAAiB,KAAjB;;AACA,aAAK,IAAIW,GAAT,IAAgBzE,CAAC,CAACtC,QAAF,CAAWF,IAA3B,EAAiC;AAC/BjK,UAAAA,WAAW,CAAC,OAAD,EAAUyM,CAAC,CAACtC,QAAF,CAAWF,IAAX,CAAgBiH,GAAhB,CAAV,EAAgC,QAAhC,CAAX;AACD;AACF;AACF,KAhBI,CAAP;AAiBD;;AAED,WAASC,cAAT,CAAwBV,cAAxB,EAAwC;AACtC,QAAIC,IAAI,GAAG,IAAIC,QAAJ,EAAX;;AACA,QAAMS,UAAU;AACdhL,MAAAA,UAAU,EAAEgB,YADE;AAEdd,MAAAA,YAAY,EAAEY,cAFA;AAGdH,MAAAA,YAAY,EAAEa,cAHA;AAIdpB,MAAAA,iBAAiB,EAAEsB,mBAJL;AAKdb,MAAAA,UAAU,EAAEO,YALE;AAMdX,MAAAA,gBAAgB,EAAEa;AANJ,uBAOAE,cAPA,CAAhB;;AAUA8I,IAAAA,IAAI,CAACE,GAAL,CAAS,aAAT,EAAwBE,IAAI,CAACC,SAAL,CAAeK,UAAf,CAAxB;AAEA,WAAOvR,KAAK,CAACmR,KAAN,0BAA8B3N,KAAK,CAAC6C,KAAN,CAAYyF,EAA1C,GAAgD+E,IAAhD,EAAsD;AAAErP,MAAAA,OAAO,EAAEC;AAAX,KAAtD,EACJwI,IADI,CACC,UAAAK,QAAQ,EAAI;AAChBnK,MAAAA,WAAW,CAACsD,CAAC,CAAC,qDAAD,CAAF,EAA2DmN,cAA3D,EAA2E,SAA3E,CAAX;AACAjN,MAAAA,QAAQ,CAAC,EAAD,CAAR,CAFgB,CAGhB;;AACAH,MAAAA,KAAK,CAAC4N,SAAN;AACA5N,MAAAA,KAAK,CAACkN,UAAN,CAAiB,KAAjB;AAED,KARI,WASE,UAAA9D,CAAC,EAAI;AACV,UAAIA,CAAC,CAACtC,QAAF,CAAWF,IAAf,EAAqB;AACnB5G,QAAAA,KAAK,CAACkN,UAAN,CAAiB,KAAjB;;AACA,aAAK,IAAIW,GAAT,IAAgBzE,CAAC,CAACtC,QAAF,CAAWF,IAA3B,EAAiC;AAC/BjK,UAAAA,WAAW,CAAC,OAAD,EAAUyM,CAAC,CAACtC,QAAF,CAAWF,IAAX,CAAgBiH,GAAhB,CAAV,EAAgC,QAAhC,CAAX;AACD;AACF;AACF,KAhBI,CAAP;AAiBD;;AAED,sBACE,oBAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,wBAAD;AAA0B,IAAA,cAAc,EAAE3P,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgBd,cAAhB,CAAtD;AAAuF,IAAA,SAAS,EAAE/C,2BAAlG;AAA+H,IAAA,YAAY,EAAEC,8BAA7I;AAA6K,IAAA,cAAc,EAAEqM,cAA7L;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,OAAO,EAAE,CAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAG,IAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAiC7N,CAAC,CAAC,0CAAD,CAAlC,CADF,eAEE,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,OAAO,EAAE,CAAzB;AAA4B,IAAA,SAAS,EAAED,KAAK,CAACuL,cAAN,IAAwB,CAACrK,iBAAzB,GAA6C,QAA7C,GAAwD,EAA/F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,2FAAsFlB,KAAK,CAACkL,WAAN,CAAkB,CAAlB,KAAwBC,SAAxB,IAAqCnL,KAAK,CAACkL,WAAN,CAAkB,CAAlB,EAAqB8C,MAArB,IAA+B,WAArE,IAAqF9M,iBAAtF,GAA2G,aAA3G,GAA2H,WAA/M,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKlB,KAAK,CAACkL,WAAN,CAAkB,CAAlB,KAAwBC,SAAxB,IAAqCnL,KAAK,CAACkL,WAAN,CAAkB,CAAlB,EAAqB8C,MAArB,IAA+B,WAArE,IAAqF9M,iBAAtF,gBAA2G;AAAG,IAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAA3G,gBAAoJ;AAAG,IAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADvJ,EAEKlB,KAAK,CAACkL,WAAN,CAAkB,CAAlB,KAAwBC,SAAxB,IAAqCnL,KAAK,CAACkL,WAAN,CAAkB,CAAlB,EAAqB8C,MAArB,IAA+B,WAArE,IAAqF9M,iBAAtF,GAA2GjB,CAAC,CAAC,oCAAD,CAA5G,GAAqJA,CAAC,CAAC,sCAAD,CAFzJ,CADF,CADF,EAOGD,KAAK,CAACiO,QAAN,CAAeC,KAAf,IAAwB/C,SAAxB,iBACC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,2BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6ClL,CAAC,CAAC,+BAAD,CAA9C,CADF,eAEE;AAAM,IAAA,SAAS,EAAC,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAmCD,KAAK,CAACiO,QAAN,CAAeC,KAAf,GAAuB,GAAvB,GAA6BlO,KAAK,CAACiO,QAAN,CAAeE,QAA5C,GAAuD,GAAvD,GAA6DnO,KAAK,CAACiO,QAAN,CAAeG,OAA/G,CAFF,CARJ,EAaGpO,KAAK,CAACiO,QAAN,CAAeI,GAAf,iBACC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,2BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6CpO,CAAC,CAAC,8BAAD,CAA9C,CADF,eAEE;AAAM,IAAA,SAAS,EAAC,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAmCD,KAAK,CAACiO,QAAN,CAAeI,GAAlD,CAFF,CAdJ,eAoBE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGrO,KAAK,CAACkL,WAAN,CAAkB,CAAlB,KAAwBC,SAAxB,IAAqC7K,mBAAmB,IAAI,EAA5D,iBACC,oBAAC,uBAAD;AAAyB,IAAA,KAAK,EAAE/C,YAAhC;AAA8C,IAAA,MAAM,EAAEC,QAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,kBAAD;AACE,IAAA,QAAQ,MADV;AAEE,IAAA,SAAS,EAAC,oBAFZ;AAGE,IAAA,EAAE,EAAC,qBAHL;AAIE,IAAA,KAAK,EAAC,eAJR;AAKE,IAAA,MAAM,EAAC,YALT;AAME,IAAA,KAAK,EAAE8C,mBANT;AAOE,IAAA,QAAQ,EAAEsL,+BAPZ;AAQE,IAAA,mBAAmB,EAAE;AACnB,oBAAc;AADK,KARvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFJ,EAiBG5L,KAAK,CAACkL,WAAN,CAAkB,CAAlB,KAAwBC,SAAxB,iBACC,oBAAC,uBAAD;AAAyB,IAAA,KAAK,EAAE5N,YAAhC;AAA8C,IAAA,MAAM,EAAEC,QAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,kBAAD;AACE,IAAA,SAAS,EAAC,oBADZ;AAEE,IAAA,EAAE,EAAC,qBAFL;AAGE,IAAA,KAAK,EAAC,eAHR;AAIE,IAAA,MAAM,EAAC,YAJT;AAKE,IAAA,KAAK,EAAE8C,mBALT;AAME,IAAA,QAAQ,EAAEsL,+BANZ;AAOE,IAAA,mBAAmB,EAAE;AACnB,oBAAc;AADK,KAPvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAlBJ,CApBF,EAuDG5L,KAAK,CAACkL,WAAN,CAAkB,CAAlB,kBACC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,2BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6CjL,CAAC,CAAC,8CAAD,CAA9C,CADF,eAEE;AAAM,IAAA,SAAS,EAAC,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAmCD,KAAK,CAACsO,WAAzC,CAFF,CAxDJ,EA6DGtO,KAAK,CAACkL,WAAN,CAAkB,CAAlB,KAAwBC,SAAxB,iBACC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,2BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6ClL,CAAC,CAAC,6CAAD,CAA9C,CADF,eAEE;AAAM,IAAA,SAAS,EAAC,2BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,KAAK,CAACkL,WAAN,CAAkB,CAAlB,KAAwBC,SAAxB,IAAqCjN,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgBrF,KAAK,CAACkL,WAAN,CAAkB,CAAlB,EAAqBqD,MAArC,CADpD,EAEIvO,KAAK,CAACkL,WAAN,CAAkB,CAAlB,KAAwBC,SAAxB,IAAqCjK,iBAAtC,IAA4DhD,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgBrF,KAAK,CAAC0C,WAAtB,CAF3E,CAFF,CA9DJ,EAsEG1C,KAAK,CAACkL,WAAN,CAAkB,CAAlB,KAAwBC,SAAxB,iBACC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,2BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6ClL,CAAC,CAAC,sDAAD,CAA9C,CADF,eAEE;AAAM,IAAA,SAAS,EAAC,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAmCD,KAAK,CAACkL,WAAN,CAAkB,CAAlB,EAAqBsD,cAAxD,CAFF,CAvEJ,eA6EE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,2BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6CvO,CAAC,CAAC,oDAAD,CAA9C,CADF,eAEE;AAAM,IAAA,SAAS,EAAC,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGD,KAAK,CAACkL,WAAN,CAAkB,CAAlB,KAAwBC,SAAxB,IAAqCnL,KAAK,CAACkL,WAAN,CAAkB,CAAlB,EAAqBuD,iBAArB,IAA0C,CAA/E,IAAoFzO,KAAK,CAAC0O,WAD7F,CACwG;AADxG,IAGG1O,KAAK,CAACkL,WAAN,CAAkB,CAAlB,KAAwBC,SAAxB,IAAqCnL,KAAK,CAACkL,WAAN,CAAkB,CAAlB,EAAqBuD,iBAArB,IAA0C,CAA/E,IAAqFrQ,yBAAyB,CAAC4B,KAAK,CAAC2O,cAAP,EAAuB3O,KAAK,CAACkL,WAAN,CAAkB,CAAlB,EAAqB0D,mBAA5C,CAHjH,EAII5O,KAAK,CAACkL,WAAN,CAAkB,CAAlB,KAAwBC,SAAxB,IAAqCjK,iBAAtC,IAA4D,YAJ/D,CAFF,EAQGlB,KAAK,CAACkL,WAAN,CAAkB,CAAlB,KAAwBC,SAAxB,iBACC,oBAAC,WAAD;AAAa,IAAA,OAAO,EAAC,UAArB;AAAgC,IAAA,SAAS,EAAC,0BAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAY,IAAA,EAAE,EAAC,2CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA4DlL,CAAC,CAAC,oDAAD,CAA7D,CADF,eAEE,oBAAC,MAAD;AACE,IAAA,OAAO,EAAC,2CADV;AAEE,IAAA,EAAE,EAAC,qCAFL;AAGE,IAAA,KAAK,EAAE9B,qBAAqB,CAACuC,kBAAD,CAH9B;AAIE,IAAA,QAAQ,EAAE,kBAAC0I,CAAD;AAAA,aAAOzI,qBAAqB,CAACyI,CAAC,CAACyF,MAAF,CAASC,KAAV,CAA5B;AAAA,KAJZ;AAKE,IAAA,KAAK,EAAC,kBALR;AAME,IAAA,IAAI,EAAC,cANP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAQGtP,eAAe,CAACqH,GAAhB,CAAoB,UAACiI,KAAD;AAAA,wBACnB,oBAAC,QAAD;AAAU,MAAA,GAAG,EAAE,kBAAkBA,KAAjC;AAAwC,MAAA,KAAK,EAAEA,KAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAuDA,KAAvD,CADmB;AAAA,GAApB,CARH,CAFF,CATJ,CA7EF,eAwGE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,2BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6C7O,CAAC,CAAC,4CAAD,CAA9C,oBAA8F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAASD,KAAK,CAAC+O,YAAf,CAA9F,CADF,CAxGF,EA4GG/O,KAAK,CAAC+O,YAAN,KAAuB,IAAvB,iBACC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,2BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6C9O,CAAC,CAAC,kDAAD,CAA9C,CADF,eAEE;AAAM,IAAA,SAAS,EAAC,2BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eACMD,KAAK,CAACgP,cADZ,cAC8BhP,KAAK,CAACiP,cADpC,eACuDjP,KAAK,CAACkP,aAD7D,cAC8ElP,KAAK,CAACmP,aADpF,eACsGnP,KAAK,CAACoF,6BAAN,IAAuC,IAAvC,GAA8CpF,KAAK,CAACoF,6BAAN,CAAoCgK,aAAlF,GAAkGpP,KAAK,CAACqP,QAD9M,SACyNrP,KAAK,CAACsP,UAAN,IAAoB,EAApB,GAA0B,sBAAsBtP,KAAK,CAACsP,UAAtD,GAAoE,EAD7R,EAFF,CA7GJ,eAqHE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,uBAAD;AAAyB,IAAA,KAAK,EAAE/R,YAAhC;AAA8C,IAAA,MAAM,EAAEC,QAAtD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,kBAAD;AACE,IAAA,SAAS,EAAC,oBADZ;AAEE,IAAA,EAAE,EAAC,qBAFL;AAIE,IAAA,KAAK,EAAEwC,KAAK,CAACiF,YAAN,IAAsB,wBAAtB,GAAiD,4BAAjD,GAAgF,sBAJzF;AAKE,IAAA,MAAM,EAAC,YALT;AAME,IAAA,KAAK,EAAE7E,mBANT;AAOE,IAAA,QAAQ,EAAEsL,uBAPZ;AAQE,IAAA,mBAAmB,EAAE;AACnB,oBAAc;AADK,KARvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,CArHF,EAqIG,IAAId,IAAJ,OAAexK,mBAAmB,GAAGA,mBAAH,GAAyBJ,KAAK,CAACI,mBAAjE,kBACC,uDACE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,gFAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAG,IAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,OAC6CH,CAAC,CAAC,2CAAD,CAD9C,CADF,CADF,CAtIJ,CAFF,eAiJE,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,OAAO,EAAE,CAAzB;AAA4B,IAAA,SAAS,EAAED,KAAK,CAACuL,cAAN,GAAuB,EAAvB,GAA4B,QAAnE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACIvL,KAAK,CAACuP,eAAN,IAAyB,kBAA1B,iBACC;AAAM,IAAA,SAAS,EAAC,2BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6CtP,CAAC,CAAC,0CAAD,CAA9C,CAFJ,eAIE;AAAM,IAAA,SAAS,4BAAsBD,KAAK,CAACuP,eAAN,IAAyB,kBAA1B,GAAgD,aAAhD,GAAgE,EAArF,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA4GvP,KAAK,CAACuP,eAAN,IAAyB,kBAA1B,iBAAiD;AAAG,IAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAA5J,EAAoMvP,KAAK,CAACuP,eAA1M,CAJF,CADF,CAjJF,CADF,eA6JE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAA0B,IAAA,SAAS,EAAC,2DAApC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,EAAE,EAAE,EAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,CAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,KAAK,EAAE;AAAEC,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,QAAQ,EAAE,MAA3B;AAAmCC,MAAAA,SAAS,EAAE;AAA9C,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE;AAAG,IAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwBzP,CAAC,CAAC,kDAAD,CAAzB,CAHF,eAIE;AAAG,IAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwBA,CAAC,CAAC,wDAAD,CAAzB,CAJF,eAKE;AAAG,IAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwBA,CAAC,CAAC,iDAAD,CAAzB,CALF,eAME;AAAG,IAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwBA,CAAC,CAAC,wDAAD,CAAzB,CANF,eAOE;AAAG,IAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwBA,CAAC,CAAC,mDAAD,CAAzB,CAPF,eAQE;AAAG,IAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwBA,CAAC,CAAC,oDAAD,CAAzB,CARF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,eAUE;AAAG,IAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwBA,CAAC,CAAC,sDAAD,CAAzB,CAVF,eAWE;AAAG,IAAA,SAAS,EAAC,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwBA,CAAC,CAAC,iDAAD,CAAzB,CAXF,eAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZF,eAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIA,CAAC,CAAC,mDAAD,CAAL,CAbF,CADF,eAiBE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEyP,MAAAA,SAAS,EAAE;AAAb,KAAb;AAAqC,IAAA,IAAI,MAAzC;AAA0C,IAAA,EAAE,EAAE,CAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,KAAK,EAAE;AAAED,MAAAA,QAAQ,EAAE,MAAZ;AAAoBC,MAAAA,SAAS,EAAE;AAA/B,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAyDzP,CAAC,CAAC,sDAAD,CAA1D,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI/B,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgB3D,SAAhB,CAAhB,CAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIxD,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgBO,gBAAhB,CAAhB,CAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI1H,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgBzD,SAAhB,CAAhB,CALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI1D,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgBvD,gBAAhB,CAAhB,CANF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI5D,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgBrD,WAAhB,CAAhB,CAPF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI9D,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgBnD,WAAhB,CAAhB,CARF,eASE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IATF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIhE,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgB7C,cAAhB,CAAhB,CAVF,eAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAItE,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgB/C,SAAhB,CAAhB,CAXF,eAYE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZF,eAaE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIpE,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgBsK,MAAM,CAACjN,WAAD,CAAtB,CAAhB,CAbF,CAjBF,eAiCE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEgN,MAAAA,SAAS,EAAE;AAAb,KAAb;AAAqC,IAAA,IAAI,MAAzC;AAA0C,IAAA,EAAE,EAAE,CAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,KAAK,EAAE;AAAED,MAAAA,QAAQ,EAAE,MAAZ;AAAoBC,MAAAA,SAAS,EAAE;AAA/B,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAyDzP,CAAC,CAAC,mDAAD,CAA1D,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI/B,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgB3D,SAAhB,CAAhB,CAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIxD,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgBO,gBAAhB,CAAhB,CAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,gBAAD;AAAkB,IAAA,QAAQ,EAAEhE,SAA5B;AAAuC,IAAA,QAAQ,EAAEmC,YAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,iBAAD;AACE,IAAA,KAAK,EAAE;AAAE6L,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,SAAS,EAAE;AAA5B,KADT;AAEE,IAAA,cAAc,EAAExQ,gBAAgB,CAACgG,OAAD,CAFlC;AAGE,IAAA,QAAQ,EAAER,eAHZ;AAIE,IAAA,aAAa,EAAEvF,cAAc,CAAC+F,OAAD,CAJ/B;AAKE,IAAA,MAAM,EAAE;AAAA,UAAayJ,KAAb,SAAGD,MAAH,CAAaC,KAAb;AAAA,aAA2B9K,eAAe,CAAC2L,MAAM,CAACb,KAAK,CAAChH,KAAN,CAAY,GAAZ,EAAiBoC,IAAjB,CAAsB,EAAtB,CAAD,CAAP,CAA1C;AAAA,KALV;AAME,IAAA,mBAAmB,EAAC,GANtB;AAOE,IAAA,KAAK,EAAEnG,YAPT;AAQE,IAAA,IAAI,EAAC,OARP;AASE,IAAA,YAAY,EAAC,QATf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CALF,eAkBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,gBAAD;AAAkB,IAAA,QAAQ,EAAEjC,gBAA5B;AAA8C,IAAA,QAAQ,EAAE2C,mBAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,iBAAD;AACE,IAAA,KAAK,EAAE;AAAEmL,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,SAAS,EAAE;AAA5B,KADT;AAEE,IAAA,cAAc,EAAExQ,gBAAgB,CAACgG,OAAD,CAFlC;AAGE,IAAA,QAAQ,EAAER,eAHZ;AAIE,IAAA,aAAa,EAAEvF,cAAc,CAAC+F,OAAD,CAJ/B;AAKE,IAAA,MAAM,EAAE;AAAA,UAAayJ,KAAb,SAAGD,MAAH,CAAaC,KAAb;AAAA,aAA2BpK,sBAAsB,CAACiL,MAAM,CAACb,KAAK,CAAChH,KAAN,CAAY,GAAZ,EAAiBoC,IAAjB,CAAsB,EAAtB,CAAD,CAAP,CAAjD;AAAA,KALV;AAME,IAAA,mBAAmB,EAAC,GANtB;AAOE,IAAA,KAAK,EAAEzF,mBAPT;AAQE,IAAA,IAAI,EAAC,OARP;AASE,IAAA,YAAY,EAAC,QATf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAlBF,eA+BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,gBAAD;AAAkB,IAAA,QAAQ,EAAEzC,WAA5B;AAAyC,IAAA,QAAQ,EAAE6B,cAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,iBAAD;AACE,IAAA,KAAK,EAAE;AAAE+L,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,SAAS,EAAE;AAA5B,KADT;AAEE,IAAA,cAAc,EAAExQ,gBAAgB,CAACgG,OAAD,CAFlC;AAGE,IAAA,QAAQ,EAAER,eAHZ;AAIE,IAAA,aAAa,EAAEvF,cAAc,CAAC+F,OAAD,CAJ/B;AAKE,IAAA,mBAAmB,EAAC,GALtB;AAME,IAAA,MAAM,EAAE;AAAA,UAAayJ,KAAb,SAAGD,MAAH,CAAaC,KAAb;AAAA,aAA2BhL,iBAAiB,CAAC6L,MAAM,CAACb,KAAK,CAAChH,KAAN,CAAY,GAAZ,EAAiBoC,IAAjB,CAAsB,EAAtB,CAAD,CAAP,CAA5C;AAAA,KANV;AAOE,IAAA,KAAK,EAAErG,cAPT;AAQE,IAAA,IAAI,EAAC,OARP;AASE,IAAA,YAAY,EAAC,QATf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CA/BF,eA4CE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,gBAAD;AAAkB,IAAA,QAAQ,EAAE3B,WAA5B;AAAyC,IAAA,QAAQ,EAAE+B,eAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE,oBAAC,iBAAD;AACE,IAAA,KAAK,EAAE;AAAE2L,MAAAA,KAAK,EAAE,MAAT;AAAiBC,MAAAA,SAAS,EAAE;AAA5B,KADT;AAEE,IAAA,cAAc,EAAExQ,gBAAgB,CAACgG,OAAD,CAFlC;AAGE,IAAA,QAAQ,EAAER,eAHZ;AAIE,IAAA,aAAa,EAAEvF,cAAc,CAAC+F,OAAD,CAJ/B;AAKE,IAAA,mBAAmB,EAAC,GALtB;AAME,IAAA,MAAM,EAAE;AAAA,UAAayJ,KAAb,SAAGD,MAAH,CAAaC,KAAb;AAAA,aAA2B5K,kBAAkB,CAACyL,MAAM,CAACb,KAAK,CAAChH,KAAN,CAAY,GAAZ,EAAiBoC,IAAjB,CAAsB,EAAtB,CAAD,CAAP,CAA7C;AAAA,KANV;AAOE,IAAA,KAAK,EAAEjG,eAPT;AAQE,IAAA,IAAI,EAAC,OARP;AASE,IAAA,YAAY,EAAC,QATf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CA5CF,eAyDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAzDF,eA0DE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAI/F,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgBhB,iBAAhB,CAAhB,CA1DF,eA2DE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAInG,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgBlB,YAAhB,CAAhB,CA3DF,eA4DE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA5DF,eA6DE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAIjG,YAAY,CAAC8B,KAAK,CAACqF,OAAP,EAAgBsK,MAAM,CAACpL,cAAD,CAAtB,CAAhB,CA7DF,CAjCF,CADF,eAkGE;AAAK,IAAA,KAAK,EAAE;AAAEmL,MAAAA,SAAS,EAAE,OAAb;AAAsBI,MAAAA,SAAS,EAAE;AAAjC,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE;AAAA,aAAMrO,8BAA8B,CAAC,IAAD,CAApC;AAAA,KAAjB;AAA6D,IAAA,QAAQ,EAAEoD,eAAvE;AAAwF,IAAA,OAAO,EAAC,WAAhG;AAA4G,IAAA,KAAK,EAAC,SAAlH;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6H5E,CAAC,CAAC,sDAAD,CAA9H,CADF,CAlGF,CA7JF,eAmQE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,oBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAoCA,CAAC,CAAC,sCAAD,CAArC,CADF,eAEE,oBAAC,aAAD;AACE,IAAA,QAAQ,EAAE,IADZ;AAEE,IAAA,OAAO,EAAEP,kBAFX;AAGE,IAAA,IAAI,EAAEM,KAAK,CAAC+P,mBAHd;AAIE,IAAA,iBAAiB,eAAE,oBAAC,gBAAD;AAAkB,MAAA,IAAI,EAAE,EAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJrB;AAKE,IAAA,UAAU,EAAE,IALd;AAME,IAAA,gBAAgB,EAAE,IANpB;AAOE,IAAA,OAAO,EAAE,IAPX;AAQE,IAAA,cAAc,EAAE;AAAEC,MAAAA,QAAQ,EAAE,UAAZ;AAAwBC,MAAAA,MAAM,EAAE,WAAhC;AAA6C9D,MAAAA,OAAO,EAAE;AAAtD;AARlB,+DASoB,IATpB,oDAUW,IAVX,4DAWmB5M,OAAO,CAACU,CAAR,CAAU,4BAAV,CAXnB,uEAY8B;AAACiQ,IAAAA,eAAe,EAAE3Q,OAAO,CAACU,CAAR,CAAU,4BAAV,CAAlB;AAA2DkQ,IAAAA,kBAAkB,EAAE5Q,OAAO,CAACU,CAAR,CAAU,+BAAV,CAA/E;AAA2HmQ,IAAAA,aAAa,EAAE,KAA1I;AAAiJC,IAAAA,iBAAiB,EAAE,KAApK;AAA2KC,IAAAA,qBAAqB,EAAE/Q,OAAO,CAACU,CAAR,CAAU,kCAAV;AAAlM,GAZ9B;AAAA;AAAA;AAAA;AAAA,4BAFF,CAnQF,eAoRE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,oBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAoCA,CAAC,CAAC,qCAAD,CAArC,CADF,eAEE,oBAAC,QAAD;AAAU,IAAA,SAAS,EAAC,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE,oBAAC,QAAD;AAAU,IAAA,SAAS,EAAC,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,eAIE,oBAAC,QAAD;AAAU,IAAA,SAAS,EAAC,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CApRF,eA0RE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,SAAS,EAAE,SAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,+CAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+DA,CAAC,CAAC,wCAAD,CAAhE,CADF,eAEE,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,OAAO,EAAE,CAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,2BAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA6CA,CAAC,CAAC,2CAAD,CAA9C,CADF,eAEE;AAAM,IAAA,SAAS,EAAC,8EAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAgGD,KAAK,CAAC6C,KAAN,CAAY0N,kBAAZ,IAAkCvQ,KAAK,CAAC6C,KAAN,CAAY0N,kBAA9C,IAAoEtQ,CAAC,CAAC,mBAAD,CAArK,CAFF,eAIE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,OAAO,EAAE,CAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGe,UAAU,IACTA,UAAU,CAACgG,MAAX,GAAoB,CADrB,IAEChG,UAAU,CAAC6F,GAAX,CAAe,UAAC2J,KAAD,EAAQC,KAAR,EAAkB;AAC/B,QAAMC,MAAM,wBAAiBF,KAAK,CAAClI,EAAvB,CAAZ;AACA,wBACE,oBAAC,IAAD;AAAM,MAAA,GAAG,EAAEoI,MAAX;AAAmB,MAAA,IAAI,MAAvB;AAAwB,MAAA,EAAE,EAAE,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,IAAI,EAAEF,KAAK,CAACG,YAAf;AAA6B,MAAA,SAAS,EAAC,sCAAvC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AACE,MAAA,GAAG,EAAEH,KAAK,CAACG,YADb;AAEE,MAAA,SAAS,EAAC,YAFZ;AAGE,MAAA,iBAAiB,EAAC,MAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF,CADF,CADF,CADF;AAeD,GAjBD,CAFD,iBAqBC,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAM,IAAA,SAAS,EAAC,iBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAmC1Q,CAAC,CAAC,sCAAD,CAApC,CADF,CAtBJ,CADF,CAJF,CADF,CAFF,CA1RF,eAiUE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAG,IAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAiCA,CAAC,CAAC,qCAAD,CAAlC,CADF,eAEE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,YAAD;AACE,IAAA,IAAI,EAAE,gBADR;AAEE,IAAA,YAAY,EAAEA,CAAC,CAAC,iDAAD,CAFjB;AAGE,IAAA,QAAQ,EAAE4L,oBAHZ;AAIE,IAAA,YAAY,EAAE,IAJhB;AAKE,IAAA,sBAAsB,EAAE,KAL1B;AAME,IAAA,kBAAkB,MANpB;AAOE,IAAA,gBAAgB,EAAE;AAAE+E,MAAAA,SAAS,EAAE;AAAEC,QAAAA,OAAO,EAAE,CAAX;AAAcC,QAAAA,SAAS,EAAE;AAAzB;AAAb,KAPpB;AAQE,IAAA,gBAAgB,EAAE;AAAEC,MAAAA,OAAO,EAAE;AAAEC,QAAAA,IAAI,EAAEhR,KAAK,CAAC+Q,OAAN,CAAcE;AAAtB;AAAX,KARpB;AASE,IAAA,WAAW,EAAEhR,CAAC,CAAC,wCAAD,CAThB;AAUE,IAAA,UAAU,EAAE,EAVd;AAWE,IAAA,UAAU,EAAE,KAXd;AAYE,IAAA,WAAW,EAAE,QAZf;AAaE,IAAA,kBAAkB,EAAE;AAAEiR,MAAAA,YAAY,EAAE;AAAEC,QAAAA,QAAQ,EAAE,KAAZ;AAAmBC,QAAAA,UAAU,EAAE;AAA/B;AAAhB,KAbtB;AAcE,IAAA,OAAO,EAAElF,aAdX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAFF,CAjUF,eAsVE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAmB,IAAA,EAAE,EAAE,CAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAG,IAAA,SAAS,EAAC,kBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAiCjM,CAAC,CAAC,sCAAD,CAAlC,CADF,eAEE,oBAAC,IAAD;AAAM,IAAA,KAAK,MAAX;AAAY,IAAA,SAAS,EAAED,KAAK,CAAC+Q,OAAN,CAAcC,IAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGlQ,YAAY,IAAIA,YAAY,CAAC+F,GAAb,CAAiB,UAACwK,WAAD,EAAiB;AACjD,wBACE,oBAAC,QAAD;AAAU,MAAA,GAAG,EAAE,gBAAgBA,WAAW,CAAC/I,EAA3C;AAA+C,MAAA,MAAM,MAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,cAAD;AAAgB,MAAA,SAAS,EAAC,sBAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGI+I,WAAW,CAAC9S,IAAZ,CAAiB4J,QAAjB,CAA0B,OAA1B,kBACA;AAAG,MAAA,IAAI,EAAEkJ,WAAW,CAACV,YAArB;AAAmC,MAAA,SAAS,EAAC,sCAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,KAAD;AACE,MAAA,GAAG,EAAEU,WAAW,CAACV,YADnB;AAEE,MAAA,SAAS,EAAC,YAFZ;AAGE,MAAA,iBAAiB,EAAC,MAHpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADA,iBASA,oBAAC,QAAD;AACE,MAAA,IAAI,EAAE,CADR;AAEE,MAAA,SAAS,EAAEpS,IAAI,CAAC+S,SAAL,CAAeD,WAAW,CAAC9S,IAA3B;AAFb,OAGMD,aAAa,CAACC,IAAI,CAAC+S,SAAL,CAAeD,WAAW,CAAC9S,IAA3B,CAAD,CAHnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAZJ,CADF,eAqBE;AAAG,MAAA,SAAS,EAAC,kBAAb;AAAgC,MAAA,IAAI,EAAE8S,WAAW,CAACV,YAAlD;AAAgE,MAAA,MAAM,EAAC,QAAvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,OAAb;AAAqB,MAAA,KAAK,EAAC,SAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGU,WAAW,CAAC1R,IADf,OACsB0R,WAAW,CAACE,WAAZ,IAA2B,EAA3B,GAAiC,OAAOF,WAAW,CAACE,WAApD,GAAmE,EADzF,CADF,CArBF,eA0BE,oBAAC,uBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAEE,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAC,OAAb;AAAqB,MAAA,KAAK,EAAC,SAA3B;AAAqC,MAAA,OAAO,EAAE;AAAA,eAAM3I,0BAA0B,CAACyI,WAAW,CAAC/I,EAAb,CAAhC;AAAA,OAA9C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAG,MAAA,SAAS,EAAC,gBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,CAFF,CA1BF,CADF;AAmCD,GApCgB,CADnB,CADF,CAFF,CAtVF,eAkYE,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAElH,qBAAd;AAAqC,IAAA,OAAO,EAAE0H,sBAA9C;AAAsE,uBAAgB,mBAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAa,IAAA,EAAE,EAAC,mBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAqC7I,CAAC,CAAC,iDAAD,CAAtC,CADF,eAEE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,CAAC,CAAC,oDAAD,CADJ,CADF,CAFF,eAOE,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE6I,sBAAjB;AAAyC,IAAA,KAAK,EAAC,SAA/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG7I,CAAC,CAAC,wCAAD,CADJ,CADF,eAIE,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE8I,iBAAjB;AAAoC,IAAA,KAAK,EAAC,SAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG9I,CAAC,CAAC,yCAAD,CADJ,CAJF,CAPF,CAlYF,eAkZE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAlZF,eAmZE,oBAAC,IAAD;AAAM,IAAA,IAAI,MAAV;AAAW,IAAA,EAAE,EAAE,EAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,EAAE,EAAC,sBAAX;AAAkC,IAAA,IAAI,EAAC,OAAvC;AAA+C,IAAA,IAAI,EAAC,QAApD;AAA6D,IAAA,OAAO,EAAC,UAArE;AAAgF,IAAA,KAAK,EAAC,SAAtF;AAAgG,IAAA,OAAO,EAAE8M,2BAAzG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG9M,CAAC,CAAC,0CAAD,CADJ,CADF,EAIGD,KAAK,CAACiN,OAAN,iBAAiB,oBAAC,gBAAD;AAAkB,IAAA,IAAI,EAAE,EAAxB;AAA4B,IAAA,SAAS,EAAEjN,KAAK,CAAC+Q,OAAN,CAAcS,cAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJpB,CAnZF,CAFF,CADF;AAmaD;;AAED,IAAMC,kBAAkB,GAAG/U,wBAAwB,CAAC;AAClDkL,EAAAA,WAAW,EAAE,qBAAA8J,KAAK;AAAA,WAAIA,KAAK,CAACC,YAAV;AAAA;AADgC,CAAD,CAAnD;AAGA,IAAMC,kBAAkB,GAAG,EAA3B;AAEA,eAAenV,OAAO,CAACgV,kBAAD,EAAqBG,kBAArB,CAAP,CAAgD7R,kBAAhD,CAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { connect } from \"react-redux\"\nimport { createStructuredSelector } from \"reselect\";\nimport { flash_alert } from 'components/App';\nimport WarnIconValidate from 'components/services/common/WarnIconValidate'\nimport ModalConfirmationAmounts from 'components/services/common/ModalConfirmationAmounts'\n\n\nimport CurrencyTextField from '@unicef/material-ui-currency-textfield'\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport Box from '@material-ui/core/Box';\n\n// Custom hooks\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button'\n// Dates\nimport DateFnsUtils from '@date-io/date-fns';\nimport esLocale from \"date-fns/locale/es\";\nimport {\n  MuiPickersUtilsProvider,\n  KeyboardDatePicker,\n} from '@material-ui/pickers';\nimport { DropzoneArea } from 'material-ui-dropzone';\n\n//List\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport { headers, headers_www_form, money_format, payment_channel_label, check_payment_method_name } from \"constants/csrf\"\n\nimport { FileIcon, defaultStyles } from 'react-file-icon';\nimport mime from \"mime-to-extensions\";\n\nimport MaterialTable from 'react-data-table-component';\nimport Skeleton from '@material-ui/lab/Skeleton';\n\n// Card\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\n// Dialog\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Image from 'material-ui-image'\n\nimport { SRLWrapper } from \"simple-react-lightbox\";\nimport { Modal } from '@material-ui/core';\nimport { useTranslation } from \"react-i18next\"\nimport { CURRENCY_SYMBOLS, DECIMAL_PLACES } from 'constants/currency';\nimport i18next from 'i18next';\n\nconst payment_options = [\"Online\", \"Transferencia\", \"Por Teléfono\", \"Cliente realiza depósito bancario\", \"Cliente paga en domicilio\", \"Garantía producto/manufactura\", \"Garantía Reparación/Instalación\", \"Instalaci costo\", \"Visita en cortesía\", \"Segunda visita Póliza\"]\n\nconst skip_payment_options = [\"Cliente paga en domicilio\", \"Garantía producto/manufactura\", \"Garantía Reparación/Instalación\", \"Instalación sin costo\", \"Visita en cortesía\", \"Segunda visita Póliza\"]\n\nconst consumable_columns = [\n  {\n    name: 'TNR',\n    selector: 'consumable.tnr',\n    sortable: true\n  },\n  {\n    name: 'Nombre',\n    selector: 'consumable.name',\n    sortable: true,\n    hide: 'sm',\n  },\n  {\n    name: 'Cantidad requerida',\n    selector: 'quantity',\n    sortable: true\n  },\n  {\n    name: 'Precio',\n    selector: 'amount',\n    sortable: true\n  }\n];\n\n\n\n\nfunction VisitPaymentDetail(props) {\n  const { t } = useTranslation();\n  const [files, setFiles] = useState([]);\n\n  const [selectedPaymentDate, setSelectedPaymentDate] = useState(\"\");\n  const [customerPaymentDate, setCustomerPaymentDate] = useState(\"\");\n  const [paymentLink, setPaymentLink] = useState(\"\");\n  const [visitPaymentMethod, setVisitPaymentMethod] = useState(\"\");\n  const [paymentLinkBoolean, setPaymentLinkBoolean] = useState(false);\n\n  const [paymentFiles, setPaymentFiles] = useState([]);\n  const [signatures, setSignatures] = useState([]);\n\n  const [validated_payment, setValidatedPayment] = useState(false);\n\n  // Delete image dialog\n  const [openDeleteImageDialog, setOpenDeleteImageDialog] = React.useState(false);\n  const [currentDeleteImage, setCurrentDeleteImage] = React.useState(\"\");\n\n  // MOdal\n  const [showModalAmountConfirmation, setShowModalAmountConfirmation] = useState(false)\n\n  // Visit totals\n  const [hourAmout, setHourAmout] = useState(props.hourAmout);\n  const [feeAmount, setFeeAmount] = useState(props.feeAmount);\n  const [consumableAmount, setConsumableAmount] = useState(props.consumableAmount);\n  const [laborAmount, setLaborAmount] = useState(props.laborAmount);\n  const [viaticAmout, setViaticAmout] = useState(props.viaticAmout);\n  const [totalhours, setTotalhours] = useState(\"\");\n\n  const [ivaAmount, setIVAAmount] = useState(props.ivaAmount);\n  const [subtotalAmount, setSubtotalAmount] = useState(props.subtotalAmount);\n  const [totalAmount, setTotalAmount] = useState(props.totalAmount);\n\n  const newFeeAmountInitial = props.visit.new_amounts?.fee_amount || props.feeAmount\n  const newLaborAmountInitial = props.visit.new_amounts?.labor_amount || props.laborAmount\n  const newConsumableAmountInitial = props.visit.new_amounts?.consumable_amount || props.consumableAmount\n  const newViaticAmountInitial = props.visit.new_amounts?.viatic_value || props.visit.viatic_amount\n\n  const newSubtotalAmountInitial = props.visit.new_amounts?.sub_total_amount || props.subtotalAmount\n  const newTotalAmountInitial = props.visit.new_amounts?.total_amount || props.totalAmount\n  const newIVAAmountInitial = props.visit.new_amounts?.iva_amount || props.ivaAmount\n\n  const [newLaborAmount, setNewLaborAmount] = useState(newLaborAmountInitial)\n  const [newFeeAmount, setNewFeeAmount] = useState(newFeeAmountInitial)\n  const [newViaticAmount, setNewViaticAmount] = useState(newViaticAmountInitial)\n  const [newIvaAmount, setNewIvaAmount] = useState(newIVAAmountInitial)\n  const [newSubtotalAmount, setNewSubtotalAmount] = useState(newSubtotalAmountInitial)\n  const [newTotalAmount, setNewTotalAmount] = useState(newTotalAmountInitial)\n  const [newConsumableAmount, setNewConsumableAmount] = useState(newConsumableAmountInitial)\n\n  const [zipcode, setZipcode] = useState(props.zipcode)\n  const [blockNewAmounts, setBlockNewAmounts] = useState(false)\n  const [firstLoad, setFirstLoad] = useState(true)\n\n  const { service_type, subcategory, administrative_demarcation_fn: administrativeDemarcation, country } = props\n  const serviceID = props.visit.service_id\n  const [assignedQuotationId, setAssignedQuotationId] = useState(props.visit.assigned_quotation_id)\n  const [sparePartsAmount, setSparePartsAmount] = useState(props.visit.spare_parts_amount)\n\n  const rolesCanEditAmounts = ['administrador', 'field service']\n\n  function getUsedSpareParts(product_ids, visit_id) {\n    const params = {\n      visit_id\n    }\n\n    let promises = []\n\n    product_ids.forEach(product_id => {\n      promises.push(axios.get(`/api/v1/customer_products/${product_id}/customer_product_used_spare_parts`, { params }))\n    })\n\n    axios.all(promises).then(axios.spread((...responses) => {\n      const data = responses.map(response => {\n        return response.data\n      }).flat()\n      if (data.length > 0) {\n        const usedSparePartPrices = data.map(usedSparePart => usedSparePart.service_spare_part.price)\n        setNewConsumableAmount(usedSparePartPrices.reduce((p, c) => p + c))\n        setFirstLoad(false)\n      }\n    })).catch(errors => {\n      console.log({ errors });\n    })\n  }\n\n  useEffect(() => {\n    const currentRoles = props.currentUser.get_roles_names.split(',').map(roleName => roleName.toLowerCase())\n    console.log({ currentRoles });\n    if (rolesCanEditAmounts.some(roleCanEdit => currentRoles.includes(roleCanEdit))) {\n      console.log('Can edit');\n      return\n    } else {\n      console.log('Cant edit');\n      setBlockNewAmounts(true)\n    }\n\n  }, [])\n\n  useEffect(() => {\n    getUsedSpareParts(props.visit.customer_products.map(customer_product => customer_product.id), props.visit.id)\n    setFirstLoad(false)\n  }, [])\n\n  useEffect(() => {\n    setBlockNewAmounts(!!props.visit?.new_amounts?.updated_at)\n  }, [props.visit])\n\n  useEffect(() => {\n    setZipcode(props.zipcode)\n\n  }, [props.zipcode])\n\n  useEffect(() => {\n    if (props.visit.no_payment && !(!!props.visit.assigned_quotation_id)) return\n    if (blockNewAmounts) return\n    if (props.visit.new_amounts?.updated_at) return\n    // if (firstLoad) return;\n    fetchServiceTotal(country,\n      props.visit.customer_products.map((product) => product.id),\n      zipcode,\n      (administrativeDemarcation?.admin_name_3 || ''),\n      true)\n  }, [newFeeAmount, newLaborAmount, newConsumableAmount, zipcode, newViaticAmount])\n\n  const handleClickOpenImageDialog = (image_id) => {\n    setCurrentDeleteImage(image_id)\n    setOpenDeleteImageDialog(true);\n  };\n\n  const handleCloseImageDialog = () => {\n    setOpenDeleteImageDialog(false);\n  };\n\n  const handleDeleteImage = () => {\n    setOpenDeleteImageDialog(false);\n    return axios.delete(`/api/v1/file_resources/${currentDeleteImage}`, { headers: headers })\n      .then(response => {\n        let payment_files_t = paymentFiles.filter(file => String(file.id) != String(currentDeleteImage));\n        setPaymentFiles(payment_files_t);\n        flash_alert(\"Eliminado!\", t('services.visits.flashAlert.couldDeleteFile'), \"success\")\n      })\n      .catch(e => {\n        flash_alert(\"Error!\", t('services.visits.flashAlert.couldNotDeleteFile'), \"danger\")\n\n      });\n  };\n\n  function fetchServiceTotal(country_code, products_ids, zipcode_t, administrative_demarcation_name_t, from_consumables = false, from_policy = false, event_local = null) {\n    console.log(event_local)\n    if (event_local) {\n      var time_diff = date_difference_in_hours(event.start, event.end)\n    }\n\n    if (products_ids.length > 0) {\n      const params = {\n        viatic_value: newViaticAmount,\n        fee_amount: newFeeAmount,\n        labor_price: newLaborAmount,\n        country: country_code,\n        products_ids: products_ids.join(','),\n        service_type: service_type || '',\n        subcategory: subcategory,\n        zipcode: zipcode_t || '',\n        administrative_demarcation_name: administrative_demarcation_name_t || '',\n        quotation_id: assignedQuotationId,\n      }\n\n      if (event_local) {\n        params.time_diff = time_diff\n      }\n\n      return axios.get(`/api/v1/services/${serviceID}/total_price`, { params })\n        .then(({ data: json }) => {\n          if (json.data) {\n            setTotalhours(json.data.total_hours)\n\n            if (service_type == 'Póliza de Mantenimiento') {\n            } else {\n              if (newConsumableAmount > 0) {\n                const subTotal = json.data.subtotal_amount + newConsumableAmount\n                const iva = subTotal * json.data.iva\n                setNewSubtotalAmount(subTotal)\n                setNewIvaAmount(iva)\n                setNewTotalAmount((json.data.subtotal_amount + newConsumableAmount) * (json.data.iva + 1))\n              } else {\n                setNewSubtotalAmount(json.data.subtotal_amount)\n                setNewIvaAmount(json.data.iva_amount)\n                setNewTotalAmount(json.data.total_amount)\n              }\n            }\n          } else {\n            console.log(\"No hay precio.\")\n          }\n        })\n        .catch(error => console.log(error));\n    }\n  }\n\n\n  useEffect(() => {\n    if (props.selectedPaymentDate) {\n\n      let aux = new Date(Date.parse(props.selectedPaymentDate))\n      aux.setDate(aux.getDate() + 1)\n      setSelectedPaymentDate(aux)\n    }\n  }, [props.selectedPaymentDate]);\n\n  useEffect(() => {\n    setCustomerPaymentDate(Date.parse(props.customerPaymentDate))\n  }, [props.customerPaymentDate]);\n\n  useEffect(() => {\n    setCustomerPaymentDate(props.paymentDate)\n  }, [props.paymentDate]);\n\n\n  useEffect(() => {\n    setValidatedPayment(props.validated_payment)\n  }, [props.validated_payment]);\n\n  useEffect(() => {\n    if (props.visit) {\n      props.visit.payment_date && setSelectedPaymentDate(props.visit.payment_date)\n      if (props.paymentData[0] == undefined) {\n        setCustomerPaymentDate(props.visit.customer_payment_date)\n      }\n      setVisitPaymentMethod(props.visit.payment_channel)\n      setPaymentFiles(props.visit.payment_resources)\n      setSignatures(props.visit.signatures)\n\n      if (!props.noPaymentCheck) {\n        setValidatedPayment(props.visit.validated_payment || props.visit.payment_state == \"paid\")\n      }\n      if (props.visit.no_payment && !(!!props.visit.assigned_quotation_id)) {\n\n        setTotalAmount(0)\n        setTotalhours(0)\n        setHourAmout(0)\n        setFeeAmount(0)\n        setLaborAmount(0)\n        setIVAAmount(0)\n        setSubtotalAmount(0)\n        setViaticAmout(0)\n        setConsumableAmount(0)\n\n        setNewIvaAmount(0)\n        setNewTotalAmount(0)\n        setNewSubtotalAmount(0)\n        setNewLaborAmount(0)\n        setNewFeeAmount(0)\n        setNewViaticAmount(0)\n        setNewConsumableAmount(0)\n        setBlockNewAmounts(true)\n        //los consumibles faltan\n      } else {\n        console.log({ visit: props.visit });\n        props.visit.total_amount && setTotalAmount(props.visit.total_amount)\n        props.visit.total_hours && setTotalhours(props.visit.total_hours)\n        props.visit.hour_amount && setHourAmout(props.visit.hour_amount)\n        props.visit.fee_amount && setFeeAmount(props.visit.fee_amount)\n        props.visit.labor_amount && setLaborAmount(props.visit.labor_amount)\n        props.visit.iva_amount && setIVAAmount(props.visit.iva_amount)\n        props.visit.subtotal_amount && setSubtotalAmount(props.visit.subtotal_amount)\n        props.visit.viatic_amount && setViaticAmout(props.visit.viatic_amount)\n      }\n    }\n  }, [props.visit]);\n\n\n\n\n  const handlePaymentDateChange = (date) => {\n    setSelectedPaymentDate(date);\n  };\n\n  const handleCustomerPaymentDateChange = (date) => {\n    setCustomerPaymentDate(date);\n  };\n\n\n  async function onServiceChangeFiles(e) {\n    if (e.length > 0) {\n      const dT = [];\n      e.forEach(async function(item) {\n\n        await getBase64(item)\n          .then((encFile) => {\n            dT.push(encFile)\n            setFiles(dT)\n          }).catch(error => console.log(\"error\"));\n\n      });\n\n    }\n  };\n\n  function handleMessage(message, type) {\n    if (type == \"error\") {\n      flash_alert(\"\", t('services.visits.flashAlert.fileExceedLimit'), \"error\")\n    }\n  }\n\n  function getBase64(file) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve({\n        uri_64: reader.result,\n        name: file.name,\n        mime: file.type,\n      });\n      reader.onerror = error => reject(error);\n    });\n  }\n  function handleValidatePaymentSubmit(event) {\n    event.preventDefault();\n    if ((files.length > 0 || paymentFiles.length > 0) || skip_payment_options.includes(visitPaymentMethod)) {\n      if (!props.loading) {\n        props.setLoading(true);\n\n      }\n      saveVisit(t('services.visits.flashAlert.paymentValidated'))\n    } else {\n      flash_alert(\"Error\", t('services.visits.flashAlert.attachProofOfPayment'), \"danger\")\n    }\n\n  }\n\n  function saveVisit(update_message) {\n    var body = new FormData();\n    body.set('payment_date', selectedPaymentDate);\n    body.set('customer_payment_date', customerPaymentDate);\n    body.set('payment_channel', payment_channel_label(visitPaymentMethod));\n    files.forEach((file) => {\n      body.append('payment_files[]', JSON.stringify(file));\n    });\n\n    return axios.patch(`/api/v1/visits/${props.visit.id}`, body, { headers: headers_www_form })\n      .then(response => {\n        flash_alert(t('services.visits.flashAlert.visitUpdatedSuccessfully'), update_message, \"success\");\n        setFiles([]);\n        //callbacks\n        props.callbacks()\n        props.setLoading(false);\n\n      })\n      .catch(e => {\n        if (e.response.data) {\n          props.setLoading(false);\n          for (var key in e.response.data) {\n            flash_alert(\"Error\", e.response.data[key], \"danger\")\n          }\n        }\n      });\n  }\n\n  function saveNewAmounts(update_message) {\n    var body = new FormData();\n    const newAmounts = {\n      fee_amount: newFeeAmount,\n      labor_amount: newLaborAmount,\n      total_amount: newTotalAmount,\n      consumable_amount: newConsumableAmount,\n      iva_amount: newIvaAmount,\n      sub_total_amount: newSubtotalAmount,\n      total_amount: newTotalAmount,\n    }\n\n    body.set('new_amounts', JSON.stringify(newAmounts));\n\n    return axios.patch(`/api/v1/visits/${props.visit.id}`, body, { headers: headers_www_form })\n      .then(response => {\n        flash_alert(t('services.visits.flashAlert.visitUpdatedSuccessfully'), update_message, \"success\");\n        setFiles([]);\n        //callbacks\n        props.callbacks()\n        props.setLoading(false);\n\n      })\n      .catch(e => {\n        if (e.response.data) {\n          props.setLoading(false);\n          for (var key in e.response.data) {\n            flash_alert(\"Error\", e.response.data[key], \"danger\")\n          }\n        }\n      });\n  }\n\n  return (\n    <React.Fragment>\n      <ModalConfirmationAmounts newTotalAmount={money_format(props.country, newTotalAmount)} showModal={showModalAmountConfirmation} setShowModal={setShowModalAmountConfirmation} saveNewAmounts={saveNewAmounts} />\n      <Grid container spacing={3}>\n        <Grid item xs={12} sm={6}>\n          <p className=\"service-subtitle\">{t('services.visits.payments.paymentsDetails')}</p>\n          <Grid container spacing={3} className={props.noPaymentCheck && !validated_payment ? \"hidden\" : \"\"}>\n            <Grid item xs={12}>\n              <span className={`mdl-navigation__link service-price-table-value service-price-table-value-check ${((props.paymentData[0] != undefined && props.paymentData[0].status == \"completed\") || validated_payment) ? \"green-label\" : \"red-label\"}`}>\n                {((props.paymentData[0] != undefined && props.paymentData[0].status == \"completed\") || validated_payment) ? <i className=\"material-icons\">done</i> : <i className=\"material-icons\">close</i>}\n                {((props.paymentData[0] != undefined && props.paymentData[0].status == \"completed\") || validated_payment) ? t('services.visits.payments.paidVisit') : t('services.visits.payments.unpaidVisit')}\n              </span>\n            </Grid>\n            {props.customer.names != undefined &&\n              <Grid item xs={12} sm={6}>\n                <span className=\"service-price-table-label\">{t('services.visits.payments.name')}</span>\n                <span className=\"visit-summary-2\">{props.customer.names + \" \" + props.customer.lastname + \" \" + props.customer.surname}</span>\n              </Grid>\n            }\n            {props.customer.rut &&\n              <Grid item xs={12} sm={6}>\n                <span className=\"service-price-table-label\">{t('services.visits.payments.rut')}</span>\n                <span className=\"visit-summary-2\">{props.customer.rut}</span>\n              </Grid>\n            }\n\n            <Grid item xs={12} sm={6}>\n              {props.paymentData[0] != undefined && customerPaymentDate != \"\" &&\n                <MuiPickersUtilsProvider utils={DateFnsUtils} locale={esLocale}>\n                  <KeyboardDatePicker\n                    disabled\n                    className=\"payment-date-input\"\n                    id=\"date-payment-dialog\"\n                    label=\"Fecha de pago\"\n                    format=\"dd/MM/yyyy\"\n                    value={customerPaymentDate}\n                    onChange={handleCustomerPaymentDateChange}\n                    KeyboardButtonProps={{\n                      'aria-label': 'change date',\n                    }}\n                  />\n                </MuiPickersUtilsProvider>\n              }\n              {props.paymentData[0] == undefined &&\n                <MuiPickersUtilsProvider utils={DateFnsUtils} locale={esLocale}>\n                  <KeyboardDatePicker\n                    className=\"payment-date-input\"\n                    id=\"date-payment-dialog\"\n                    label=\"Fecha de pago\"\n                    format=\"dd/MM/yyyy\"\n                    value={customerPaymentDate}\n                    onChange={handleCustomerPaymentDateChange}\n                    KeyboardButtonProps={{\n                      'aria-label': 'change date',\n                    }}\n                  />\n                </MuiPickersUtilsProvider>\n              }\n\n            </Grid>\n\n            {props.paymentData[0] &&\n              <Grid item xs={12} sm={6}>\n                <span className=\"service-price-table-label\">{t('services.visits.payments.paymentData.payHour')}</span>\n                <span className=\"visit-summary-2\">{props.paymentTime}</span>\n              </Grid>\n            }\n            {props.paymentData[0] != undefined &&\n              <Grid item xs={12} sm={6}>\n                <span className=\"service-price-table-label\">{t('services.visits.payments.paymentData.amount')}</span>\n                <span className=\"service-price-table-value\">\n                  {props.paymentData[0] != undefined && money_format(props.country, props.paymentData[0].amount)}\n                  {(props.paymentData[0] == undefined && validated_payment) && money_format(props.country, props.totalAmount)}\n                </span>\n              </Grid>\n            }\n            {props.paymentData[0] != undefined &&\n              <Grid item xs={12} sm={6}>\n                <span className=\"service-price-table-label\">{t('services.visits.payments.paymentData.referenceNumber')}</span>\n                <span className=\"visit-summary-2\">{props.paymentData[0].transaction_id}</span>\n              </Grid>\n            }\n            {/* {props.paymentData[0] != undefined && */}\n            <Grid item xs={12} sm={6}>\n              <span className=\"service-price-table-label\">{t('services.visits.payments.paymentData.paymentMethod')}</span>\n              <span className=\"visit-summary-2\">\n                {props.paymentData[0] != undefined && props.paymentData[0].payment_method_id == 1 && props.paymentType//(payment_channel_label(props.paymentChannel) + \" - \" + props.paymentData[0].payment_method_name)}\n                }\n                {props.paymentData[0] != undefined && props.paymentData[0].payment_method_id != 1 && (check_payment_method_name(props.paymentChannel, props.paymentData[0].payment_method_name))}\n                {(props.paymentData[0] == undefined && validated_payment) && \"Si. Manual\"}\n              </span>\n              {props.paymentData[0] == undefined &&\n                <FormControl variant=\"outlined\" className=\"MuiFormControl-fullWidth\">\n                  <InputLabel id=\"service_type-simple-select-outlined-label\">{t('services.visits.payments.paymentData.paymentSelect')}</InputLabel>\n                  <Select\n                    labelId=\"service_type-simple-select-outlined-label\"\n                    id=\"service_type-simple-select-outlined\"\n                    value={payment_channel_label(visitPaymentMethod)}\n                    onChange={(e) => setVisitPaymentMethod(e.target.value)}\n                    label=\"Tipo de Servicio\"\n                    name=\"service_type\"\n                  >\n                    {payment_options.map((value) => (\n                      <MenuItem key={\"service_type-\" + value} value={value}>{value}</MenuItem>\n                    ))}\n                  </Select>\n                </FormControl>\n              }\n            </Grid>\n            {/* }                             */}\n            <Grid item xs={12}>\n              <span className=\"service-price-table-label\">{t('services.visits.payments.paymentData.bill?')} <strong>{props.invoiceCheck}</strong></span>\n            </Grid>\n\n            {props.invoiceCheck === \"si\" &&\n              <Grid item xs={12}>\n                <span className=\"service-price-table-label\">{t('services.visits.payments.paymentData.billAddress')}</span>\n                <span className=\"service-price-table-value\">\n                  {`${props.street_type_fn} ${props.street_name_fn}, ${props.ext_number_fn} ${props.int_number_fn}, ${props.administrative_demarcation_fn != null ? props.administrative_demarcation_fn.admin3_admin1 : props.state_fn}${props.zipcode_fn != \"\" ? (\", Código Postal: \" + props.zipcode_fn) : \"\"}`}\n                </span>\n              </Grid>\n            }\n\n            <Grid item xs={12} sm={6}>\n              <MuiPickersUtilsProvider utils={DateFnsUtils} locale={esLocale}>\n                <KeyboardDatePicker\n                  className=\"payment-date-input\"\n                  id=\"date-payment-dialog\"\n\n                  label={props.service_type == \"Reparaciones en Taller\" ? \"Fecha limite para revisión\" : \"Fecha límite de pago\"}\n                  format=\"dd/MM/yyyy\"\n                  value={selectedPaymentDate}\n                  onChange={handlePaymentDateChange}\n                  KeyboardButtonProps={{\n                    'aria-label': 'change date',\n                  }}\n                />\n              </MuiPickersUtilsProvider>\n            </Grid>\n            {new Date() >= (selectedPaymentDate ? selectedPaymentDate : props.selectedPaymentDate) &&\n              <>\n                <Grid item xs={12}>\n                  <span className=\"service-price-table-value warning-text mdl-navigation__link limit-payment-date\">\n                    <i className=\"material-icons\">warning</i> {t('services.visits.payments.limitPaymentDate')}\n                  </span>\n                </Grid>\n              </>\n            }\n          </Grid>\n          <Grid container spacing={2} className={props.noPaymentCheck ? \"\" : \"hidden\"}>\n            <Grid item xs={12}>\n              {(props.noPaymentOption != \"No requiere pago\") &&\n                <span className=\"service-price-table-label\">{t('services.visits.payments.noPaymentOption')}</span>\n              }\n              <span className={`visit-summary-2 ${(props.noPaymentOption == \"No requiere pago\") ? \"green-label\" : \"\"}`}>{(props.noPaymentOption == \"No requiere pago\") && <i className=\"material-icons\">done</i>}{props.noPaymentOption}</span>\n            </Grid>\n          </Grid>\n\n        </Grid>\n\n        <Grid item xs={12} sm={6} className=\"service-price-table-container visit-price-table-container\">\n          <Grid container xs={12}>\n            <Grid item xs={4}>\n              <span style={{ color: '#fff', fontSize: '11px', textAlign: 'center' }}>descripcion</span>\n              <hr />\n              <p className=\"light-w\">{t('services.visits.payments.summaryTable.hourAmount')}</p>\n              <p className=\"light-w\">{t('services.visits.payments.summaryTable.sparePartsAmount')}</p>\n              <p className=\"light-w\">{t('services.visits.payments.summaryTable.feeAmount')}</p>\n              <p className=\"light-w\">{t('services.visits.payments.summaryTable.consumableAmount')}</p>\n              <p className=\"light-w\">{t('services.visits.payments.summaryTable.laborAmount')}</p>\n              <p className=\"light-w\">{t('services.visits.payments.summaryTable.viaticAmount')}</p>\n              <hr />\n              <p className=\"light-w\">{t('services.visits.payments.summaryTable.subTotalAmount')}</p>\n              <p className=\"light-w\">{t('services.visits.payments.summaryTable.ivaAmount')}</p>\n              <hr />\n              <p>{t('services.visits.payments.summaryTable.totalAmount')}</p>\n            </Grid>\n\n            <Grid style={{ textAlign: 'right' }} item xs={4}>\n              <span style={{ fontSize: '11px', textAlign: 'center' }}>{t('services.visits.payments.summaryTable.startingAmount')}</span>\n              <hr />\n              <p>{money_format(props.country, hourAmout)}</p>\n              <p>{money_format(props.country, sparePartsAmount)}</p>\n              <p>{money_format(props.country, feeAmount)}</p>\n              <p>{money_format(props.country, consumableAmount)}</p>\n              <p>{money_format(props.country, laborAmount)}</p>\n              <p>{money_format(props.country, viaticAmout)}</p>\n              <hr />\n              <p>{money_format(props.country, subtotalAmount)}</p>\n              <p>{money_format(props.country, ivaAmount)}</p>\n              <hr />\n              <p>{money_format(props.country, Number(totalAmount))}</p>\n            </Grid>\n\n            <Grid style={{ textAlign: 'right' }} item xs={4}>\n              <span style={{ fontSize: '11px', textAlign: 'center' }}>{t('services.visits.payments.summaryTable.visitAmount')}</span>\n              <hr />\n              <p>{money_format(props.country, hourAmout)}</p>\n              <p>{money_format(props.country, sparePartsAmount)}</p>\n              <p>\n                <WarnIconValidate oldValue={feeAmount} newValue={newFeeAmount} />\n                <CurrencyTextField\n                  style={{ width: '80px', maxHeight: '24px' }}\n                  currencySymbol={CURRENCY_SYMBOLS[country]}\n                  disabled={blockNewAmounts}\n                  decimalPlaces={DECIMAL_PLACES[country]}\n                  onBlur={({ target: { value } }) => setNewFeeAmount(Number(value.split(',').join('')))}\n                  digitGroupSeparator=\",\"\n                  value={newFeeAmount}\n                  size=\"small\"\n                  outputFormat='number' />\n              </p>\n              <p>\n                <WarnIconValidate oldValue={consumableAmount} newValue={newConsumableAmount} />\n                <CurrencyTextField\n                  style={{ width: '80px', maxHeight: '24px' }}\n                  currencySymbol={CURRENCY_SYMBOLS[country]}\n                  disabled={blockNewAmounts}\n                  decimalPlaces={DECIMAL_PLACES[country]}\n                  onBlur={({ target: { value } }) => setNewConsumableAmount(Number(value.split(',').join('')))}\n                  digitGroupSeparator=\",\"\n                  value={newConsumableAmount}\n                  size=\"small\"\n                  outputFormat='number' />\n              </p>\n              <p>\n                <WarnIconValidate oldValue={laborAmount} newValue={newLaborAmount} />\n                <CurrencyTextField\n                  style={{ width: '80px', maxHeight: '24px' }}\n                  currencySymbol={CURRENCY_SYMBOLS[country]}\n                  disabled={blockNewAmounts}\n                  decimalPlaces={DECIMAL_PLACES[country]}\n                  digitGroupSeparator=\",\"\n                  onBlur={({ target: { value } }) => setNewLaborAmount(Number(value.split(',').join('')))}\n                  value={newLaborAmount}\n                  size=\"small\"\n                  outputFormat='number' />\n              </p>\n              <p>\n                <WarnIconValidate oldValue={viaticAmout} newValue={newViaticAmount} />\n                <CurrencyTextField\n                  style={{ width: '80px', maxHeight: '24px' }}\n                  currencySymbol={CURRENCY_SYMBOLS[country]}\n                  disabled={blockNewAmounts}\n                  decimalPlaces={DECIMAL_PLACES[country]}\n                  digitGroupSeparator=\",\"\n                  onBlur={({ target: { value } }) => setNewViaticAmount(Number(value.split(',').join('')))}\n                  value={newViaticAmount}\n                  size=\"small\"\n                  outputFormat='number' />\n              </p>\n              <hr />\n              <p>{money_format(props.country, newSubtotalAmount)}</p>\n              <p>{money_format(props.country, newIvaAmount)}</p>\n              <hr />\n              <p>{money_format(props.country, Number(newTotalAmount))}</p>\n            </Grid>\n          </Grid>\n          <div style={{ textAlign: 'right', marginTop: '8px' }}>\n            <Button onClick={() => setShowModalAmountConfirmation(true)} disabled={blockNewAmounts} variant='contained' color='primary'>{t('services.visits.payments.summaryTable.validateAmount')}</Button>\n          </div>\n        </Grid>\n        <Grid item xs={12}>\n          <h1 className=\"panel-custom-title\">{t('services.visits.payments.consumables')}</h1>\n          <MaterialTable\n            noHeader={true}\n            columns={consumable_columns}\n            data={props.selectedConsumables}\n            progressComponent={<CircularProgress size={75} />}\n            responsive={true}\n            highlightOnHover={true}\n            striped={true}\n            contextMessage={{ singular: 'producto', plural: 'productos', message: 'seleccionados' }}\n            highlightOnHover={true}\n            striped={true}\n            noDataComponent={i18next.t('globalText.NoDataComponent')}\n            paginationComponentOptions={{rowsPerPageText: i18next.t('globalText.rowsPerPageText'), rangeSeparatorText: i18next.t('globalText.rangeSeparatorText'), noRowsPerPage: false, selectAllRowsItem: false, selectAllRowsItemText: i18next.t('globalText.selectAllRowsItemText') }}\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <h1 className=\"panel-custom-title\">{t('services.visits.payments.spareParts')}</h1>\n          <Skeleton animation=\"wave\" />\n          <Skeleton animation=\"wave\" />\n          <Skeleton animation=\"wave\" />\n        </Grid>\n        <Grid item xs={12} className={\"mg-b-50\"}>\n          <h1 className=\"panel-custom-title panel-custom-title-padding\">{t('services.visits.payments.receptionData')}</h1>\n          <Grid container spacing={2}>\n            <Grid item xs={12}>\n              <span className=\"service-price-table-label\">{t('services.visits.payments.nameAndSignature')}</span>\n              <span className=\"visit-summary-2 panel-custom-title-padding panel-custom-title-display-inline\">{props.visit.person_accountable && props.visit.person_accountable || t('globalText.noInfo')}</span>\n\n              <SRLWrapper>\n                <Grid container spacing={1}>\n                  {signatures &&\n                    signatures.length > 0 &&\n                    signatures.map((image, index) => {\n                      const listId = `signatures-${image.id}`;\n                      return (\n                        <Grid key={listId} item xs={6}>\n                          <Card>\n                            <CardActionArea>\n                              <a href={image.resource_url} className=\"mdl-navigation__link file-image-link\">\n                                <Image\n                                  src={image.resource_url}\n                                  className=\"file-image\"\n                                  srl_gallery_image=\"true\"\n                                />\n                              </a>\n                            </CardActionArea>\n                          </Card>\n                        </Grid>\n                      );\n                    })\n                    ||\n                    <Grid item xs={12}>\n                      <span className=\"visit-summary-2\">{t('services.visits.payments.noSignature')}</span>\n                    </Grid>\n                  }\n                </Grid>\n              </SRLWrapper>\n            </Grid>\n          </Grid>\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <p className=\"service-subtitle\">{t('services.visits.payments.backupData')}</p>\n          <Grid item xs={12}>\n            <DropzoneArea\n              name={\"services_files\"}\n              dropzoneText={t('services.visits.payments.fileUploadInstructions')}\n              onChange={onServiceChangeFiles}\n              showPreviews={true}\n              showPreviewsInDropzone={false}\n              useChipsForPreview\n              previewGridProps={{ container: { spacing: 1, direction: 'row' } }}\n              previewChipProps={{ classes: { root: props.classes.previewChip } }}\n              previewText={t('services.visits.payments.selectedFiles')}\n              filesLimit={10}\n              showAlerts={false}\n              maxFileSize={10000000}\n              alertSnackbarProps={{ anchorOrigin: { vertical: 'top', horizontal: 'right' } }}\n              onAlert={handleMessage}\n            />\n          </Grid>\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <p className=\"service-subtitle\">{t('services.visits.payments.uploadFiles')}</p>\n          <List dense className={props.classes.root}>\n            <SRLWrapper>\n              {paymentFiles && paymentFiles.map((serviceFile) => {\n                return (\n                  <ListItem key={\"serviceFile\" + serviceFile.id} button>\n                    <ListItemAvatar className=\"service-payment-icon\">\n\n                      {\n                        serviceFile.mime.includes(\"image\") &&\n                        <a href={serviceFile.resource_url} className=\"mdl-navigation__link file-image-link\">\n                          <Image\n                            src={serviceFile.resource_url}\n                            className=\"file-image\"\n                            srl_gallery_image=\"true\"\n                          />\n                        </a>\n                        ||\n                        <FileIcon\n                          size={2}\n                          extension={mime.extension(serviceFile.mime)}\n                          {...defaultStyles[mime.extension(serviceFile.mime)]}\n                        />\n                      }\n\n                    </ListItemAvatar>\n                    <a className=\"new-service-link\" href={serviceFile.resource_url} target=\"_blank\">\n                      <Button size=\"small\" color=\"primary\">\n                        {serviceFile.name} {serviceFile.description != \"\" ? (\"- \" + serviceFile.description) : \"\"}\n                      </Button>\n                    </a>\n                    <ListItemSecondaryAction>\n\n                      <Button size=\"small\" color=\"primary\" onClick={() => handleClickOpenImageDialog(serviceFile.id)}>\n                        <i className=\"material-icons\">delete</i>\n                      </Button>\n                    </ListItemSecondaryAction>\n                  </ListItem>\n                );\n              })}\n            </SRLWrapper>\n          </List>\n        </Grid>\n        <Dialog open={openDeleteImageDialog} onClose={handleCloseImageDialog} aria-labelledby=\"form-dialog-title\">\n          <DialogTitle id=\"form-dialog-title\">{t('services.visits.payments.deleteFile.deleteImage')}</DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              {t('services.visits.payments.deleteFile.confirmMessage')}\n            </DialogContentText>\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={handleCloseImageDialog} color=\"primary\">\n              {t('services.visits.payments.deleteFile.no')}\n            </Button>\n            <Button onClick={handleDeleteImage} color=\"primary\">\n              {t('services.visits.payments.deleteFile.yes')}\n            </Button>\n          </DialogActions>\n        </Dialog>\n        <br />\n        <Grid item xs={12}>\n          <Button id=\"service-save-payment\" size=\"large\" type=\"submit\" variant=\"outlined\" color=\"primary\" onClick={handleValidatePaymentSubmit}>\n            {t('services.visits.payments.validatePayment')}\n          </Button>\n          {props.loading && <CircularProgress size={24} className={props.classes.buttonProgress} />}\n\n        </Grid>\n\n      </Grid>\n\n    </React.Fragment>\n  );\n\n}\n\nconst structuredSelector = createStructuredSelector({\n  currentUser: state => state.current_user,\n});\nconst mapDispatchToProps = {};\n\nexport default connect(structuredSelector, mapDispatchToProps)(VisitPaymentDetail)\n\n"]},"metadata":{},"sourceType":"module"}