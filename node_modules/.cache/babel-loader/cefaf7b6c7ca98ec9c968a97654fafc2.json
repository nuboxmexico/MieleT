{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/javascript/components/technicians/NewTechnician.jsx\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from \"prop-types\";\nimport axios from 'axios';\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport { flash_alert } from 'components/App';\nimport Technicians from \"components/technicians/Technicians\";\nimport TechnicianForm from \"components/technicians/TechnicianForm\";\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\n\nfunction NewTechnician(props) {\n  var _React$createElement;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      user = _useState2[0],\n      setUser = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userdata = _useState4[0],\n      setUserdata = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      photo = _useState6[0],\n      setPhoto = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      store = _useState8[0],\n      setStore = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      vehicleInfo = _useState10[0],\n      setVehicleInfo = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      vehicleLicense = _useState12[0],\n      setVehicleLicense = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      roleName = _useState14[0],\n      setRoleName = _useState14[1];\n\n  var _useState15 = useState(false),\n      _useState16 = _slicedToArray(_useState15, 2),\n      redirect = _useState16[0],\n      setRedirect = _useState16[1];\n\n  var _useState17 = useState({\n    value: \"\",\n    label: \"\"\n  }),\n      _useState18 = _slicedToArray(_useState17, 2),\n      selectedOption = _useState18[0],\n      setSelectedOption = _useState18[1];\n\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      options = _React$useState2[0],\n      setOptions = _React$useState2[1];\n\n  var _useState19 = useState(\"\"),\n      _useState20 = _slicedToArray(_useState19, 2),\n      enterprise = _useState20[0],\n      setEnterprise = _useState20[1];\n\n  var _useState21 = useState([]),\n      _useState22 = _slicedToArray(_useState21, 2),\n      checkedinstallation = _useState22[0],\n      setCheckedinstallation = _useState22[1];\n\n  var _useState23 = useState([]),\n      _useState24 = _slicedToArray(_useState23, 2),\n      checkedmaintenance = _useState24[0],\n      setCheckedmaintenance = _useState24[1];\n\n  var _useState25 = useState([]),\n      _useState26 = _slicedToArray(_useState25, 2),\n      checkedrepair = _useState26[0],\n      setCheckedrepair = _useState26[1];\n\n  var _useState27 = useState([]),\n      _useState28 = _slicedToArray(_useState27, 2),\n      checkeddiagnosis = _useState28[0],\n      setCheckeddiagnosis = _useState28[1];\n\n  var _useState29 = useState([]),\n      _useState30 = _slicedToArray(_useState29, 2),\n      checkedhome_program = _useState30[0],\n      setCheckedHomeProgram = _useState30[1];\n\n  var _useState31 = useState([]),\n      _useState32 = _slicedToArray(_useState31, 2),\n      checkeddelivery = _useState32[0],\n      setCheckedDelivery = _useState32[1];\n\n  var _useState33 = useState([]),\n      _useState34 = _slicedToArray(_useState33, 2),\n      zoneFile = _useState34[0],\n      setZoneFile = _useState34[1]; // Technician events\n\n\n  var _useState35 = useState([]),\n      _useState36 = _slicedToArray(_useState35, 2),\n      newEvents = _useState36[0],\n      setNewEvents = _useState36[1]; // Button loading\n\n\n  var _React$useState3 = React.useState(false),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      loading = _React$useState4[0],\n      setLoading = _React$useState4[1];\n\n  useEffect(function () {\n    function fetchOptions() {\n      return _fetchOptions.apply(this, arguments);\n    }\n\n    function _fetchOptions() {\n      _fetchOptions = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var response, users;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return fetch(\"/api/v1/get_technicians\");\n\n              case 2:\n                response = _context.sent;\n                _context.next = 5;\n                return response.json();\n\n              case 5:\n                users = _context.sent;\n                _context.next = 8;\n                return setOptions(users);\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n      return _fetchOptions.apply(this, arguments);\n    }\n\n    fetchOptions();\n  }, []);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    var body = new FormData();\n    body.set('user_id', user);\n    body.set('n_store', store);\n    body.set('vehicle_info', vehicleInfo);\n    body.set('vehicle_license', vehicleLicense);\n    body.set('activities', roleName);\n    body.set('checkedinstallation', checkedinstallation);\n    body.set('checkedmaintenance', checkedmaintenance);\n    body.set('checkedrepair', checkedrepair);\n    body.set('checkeddiagnosis', checkeddiagnosis);\n    body.set('checkedhome_program', checkedhome_program);\n    body.set('checkeddelivery', checkeddelivery);\n    body.set('enterprise', enterprise);\n    body.set('technicians_events', JSON.stringify(newEvents));\n    body.append(\"file\", photo);\n    body.append(\"zoneFile\", zoneFile);\n    return axios.post('/api/v1/technicians', body, {\n      headers: props.headers\n    }).then(function (response) {\n      console.log(response);\n      flash_alert(\"Creado\", \"El tÃ©cnico ha sido creado satisfactoriamente\", \"success\");\n      setRedirect(true);\n    })[\"catch\"](function (e) {\n      console.log(e.response.data);\n      setLoading(false);\n\n      if (e.response.data) {\n        for (var key in e.response.data) {\n          flash_alert(\"Error\", e.response.data[key], \"danger\");\n        }\n      }\n    });\n  }\n\n  var redirect_check = [];\n\n  if (redirect) {\n    redirect_check.push( /*#__PURE__*/React.createElement(Redirect, {\n      key: \"redirect-to-technicians\",\n      to: \"/technicians\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(Technicians, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 62\n      }\n    })));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 2\n    }\n  }, redirect_check, /*#__PURE__*/React.createElement(Paper, {\n    className: \"custom-paper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, \"Nuevo t\\xE9cnico\"), /*#__PURE__*/React.createElement(TechnicianForm, (_React$createElement = {\n    user: user,\n    userdata: userdata,\n    selectedOption: selectedOption,\n    options: options,\n    setUser: setUser,\n    setUserdata: setUserdata,\n    setSelectedOption: setSelectedOption,\n    handleSubmit: handleSubmit\n  }, _defineProperty(_React$createElement, \"setUser\", setUser), _defineProperty(_React$createElement, \"setRedirect\", setRedirect), _defineProperty(_React$createElement, \"store\", store), _defineProperty(_React$createElement, \"setStore\", setStore), _defineProperty(_React$createElement, \"vehicleInfo\", vehicleInfo), _defineProperty(_React$createElement, \"setVehicleInfo\", setVehicleInfo), _defineProperty(_React$createElement, \"vehicleLicense\", vehicleLicense), _defineProperty(_React$createElement, \"setVehicleLicense\", setVehicleLicense), _defineProperty(_React$createElement, \"roleName\", roleName), _defineProperty(_React$createElement, \"setRoleName\", setRoleName), _defineProperty(_React$createElement, \"redirect\", redirect), _defineProperty(_React$createElement, \"setRedirect\", setRedirect), _defineProperty(_React$createElement, \"roleName\", roleName), _defineProperty(_React$createElement, \"setRoleName\", setRoleName), _defineProperty(_React$createElement, \"photo\", photo), _defineProperty(_React$createElement, \"setPhoto\", setPhoto), _defineProperty(_React$createElement, \"checkedinstallation\", checkedinstallation), _defineProperty(_React$createElement, \"checkedmaintenance\", checkedmaintenance), _defineProperty(_React$createElement, \"checkedrepair\", checkedrepair), _defineProperty(_React$createElement, \"checkeddiagnosis\", checkeddiagnosis), _defineProperty(_React$createElement, \"checkedhome_program\", checkedhome_program), _defineProperty(_React$createElement, \"checkeddelivery\", checkeddelivery), _defineProperty(_React$createElement, \"setCheckedinstallation\", setCheckedinstallation), _defineProperty(_React$createElement, \"setCheckedmaintenance\", setCheckedmaintenance), _defineProperty(_React$createElement, \"setCheckedrepair\", setCheckedrepair), _defineProperty(_React$createElement, \"setCheckeddiagnosis\", setCheckeddiagnosis), _defineProperty(_React$createElement, \"setCheckedHomeProgram\", setCheckedHomeProgram), _defineProperty(_React$createElement, \"setCheckedDelivery\", setCheckedDelivery), _defineProperty(_React$createElement, \"newEvents\", newEvents), _defineProperty(_React$createElement, \"setNewEvents\", setNewEvents), _defineProperty(_React$createElement, \"zoneFile\", zoneFile), _defineProperty(_React$createElement, \"setZoneFile\", setZoneFile), _defineProperty(_React$createElement, \"loading\", loading), _defineProperty(_React$createElement, \"setLoading\", setLoading), _defineProperty(_React$createElement, \"enterprise\", enterprise), _defineProperty(_React$createElement, \"setEnterprise\", setEnterprise), _defineProperty(_React$createElement, \"__self\", this), _defineProperty(_React$createElement, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }), _React$createElement))));\n}\n\nvar structuredSelector = createStructuredSelector({});\nvar mapDispatchToProps = {};\nexport default connect(structuredSelector, mapDispatchToProps)(NewTechnician);","map":{"version":3,"sources":["/usr/src/app/javascript/components/technicians/NewTechnician.jsx"],"names":["React","useState","useEffect","ReactDOM","PropTypes","axios","Redirect","connect","createStructuredSelector","flash_alert","Technicians","TechnicianForm","Container","Paper","NewTechnician","props","user","setUser","userdata","setUserdata","photo","setPhoto","store","setStore","vehicleInfo","setVehicleInfo","vehicleLicense","setVehicleLicense","roleName","setRoleName","redirect","setRedirect","value","label","selectedOption","setSelectedOption","options","setOptions","enterprise","setEnterprise","checkedinstallation","setCheckedinstallation","checkedmaintenance","setCheckedmaintenance","checkedrepair","setCheckedrepair","checkeddiagnosis","setCheckeddiagnosis","checkedhome_program","setCheckedHomeProgram","checkeddelivery","setCheckedDelivery","zoneFile","setZoneFile","newEvents","setNewEvents","loading","setLoading","fetchOptions","fetch","response","json","users","handleSubmit","event","preventDefault","body","FormData","set","JSON","stringify","append","post","headers","then","console","log","e","data","key","redirect_check","push","structuredSelector","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom'\nimport PropTypes from \"prop-types\"\nimport axios from 'axios';\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\"\nimport { createStructuredSelector } from \"reselect\"\nimport { flash_alert } from 'components/App';\nimport Technicians from \"components/technicians/Technicians\"\nimport TechnicianForm from \"components/technicians/TechnicianForm\"\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\nfunction NewTechnician(props){\n  const [user, setUser] = useState(\"\");\n  const [userdata, setUserdata] = useState({});\n  const [photo, setPhoto] = useState({});\n  const [store, setStore] = useState(\"\");\n  const [vehicleInfo, setVehicleInfo] = useState(\"\");\n  const [vehicleLicense, setVehicleLicense] = useState(\"\");\n  const [roleName, setRoleName] = useState([]);\n  const [redirect, setRedirect] = useState(false);\n  const [selectedOption, setSelectedOption] = useState({value: \"\", label: \"\"});\n  const [options, setOptions] = React.useState([]);\n  const [enterprise, setEnterprise] = useState(\"\");\n  \n  \n\n  const [checkedinstallation, setCheckedinstallation] = useState([]);\n  const [checkedmaintenance, setCheckedmaintenance] = useState([]);\n  const [checkedrepair, setCheckedrepair] = useState([]);\n  const [checkeddiagnosis, setCheckeddiagnosis] =  useState([]);\n  const [checkedhome_program, setCheckedHomeProgram] = useState([]);\n  const [checkeddelivery, setCheckedDelivery] = useState([]);\n\n  const [zoneFile, setZoneFile] = useState([]);\n  // Technician events\n  const [newEvents, setNewEvents] = useState([]);\n\n  // Button loading\n  const [loading, setLoading] = React.useState(false);\n  useEffect(() => {\n    async function fetchOptions() {\n      const response = await fetch(`/api/v1/get_technicians`);\n      const users = await response.json();\n      await setOptions(users);\n    }\n    fetchOptions();\n  }, []);\n  \n  function handleSubmit(event) {\n    event.preventDefault();\n    var body = new FormData();\n    body.set('user_id', user);\n    body.set('n_store', store);\n    body.set('vehicle_info', vehicleInfo);\n    body.set('vehicle_license', vehicleLicense);\n    body.set('activities', roleName);\n    body.set('checkedinstallation', checkedinstallation);\n    body.set('checkedmaintenance', checkedmaintenance);\n    body.set('checkedrepair', checkedrepair);\n    body.set('checkeddiagnosis', checkeddiagnosis);\n    body.set('checkedhome_program', checkedhome_program);\n    body.set('checkeddelivery', checkeddelivery);\n    \n    body.set('enterprise', enterprise);\n    \n    body.set('technicians_events', JSON.stringify(newEvents));\n    body.append(\"file\", photo);\n    body.append(\"zoneFile\", zoneFile);\n\t  return axios.post('/api/v1/technicians', body, { headers: props.headers})\n      \t.then(response => {\n          console.log(response)\n          flash_alert(\"Creado\", \"El tÃ©cnico ha sido creado satisfactoriamente\", \"success\")\n      \t\tsetRedirect(true);\n      \t})\n        .catch(e => {\n            console.log(e.response.data);\n            setLoading(false)\n            if(e.response.data){\n              for (var key in e.response.data) {\n                  flash_alert(\"Error\", e.response.data[key], \"danger\")\n              }\n            }\n        });\n  }\n\tlet redirect_check = []\n\tif (redirect){\n\t\tredirect_check.push(\n\t\t\t<Redirect key=\"redirect-to-technicians\" to=\"/technicians\"><Technicians /></Redirect>\n\t\t);\n\t}\n\n  return (\n\t<React.Fragment>\n    {redirect_check}\n      <Paper className=\"custom-paper\">\n      <h1>Nuevo tÃ©cnico</h1>\n        <TechnicianForm\n          user={user}\n\t\t\t\t\tuserdata={userdata}\n          selectedOption={selectedOption}\n          options={options}\n          setUser={setUser}\n\t\t\t\t\tsetUserdata={setUserdata}\n          setSelectedOption={setSelectedOption}\n          handleSubmit = {handleSubmit}\n          setUser={setUser}\n          setRedirect = {setRedirect}\n          store={store}\n          setStore={setStore}\n          vehicleInfo={vehicleInfo}\n          setVehicleInfo={setVehicleInfo}\n          vehicleLicense={vehicleLicense}\n          setVehicleLicense={setVehicleLicense}\n          roleName={roleName}\n          setRoleName={setRoleName}\n          redirect={redirect}\n          setRedirect={setRedirect}\n          roleName ={roleName}\n          setRoleName={setRoleName}\n          /* Photo for techinician */\n\t\t\t\t\tphoto={photo}\n\t\t\t\t\tsetPhoto={setPhoto}\n          /* Taxones for technicians */\n\t\t\t\t\tcheckedinstallation={checkedinstallation}\n\t\t\t\t\tcheckedmaintenance={checkedmaintenance}\n\t\t\t\t\tcheckedrepair={checkedrepair}\n\t\t\t\t\tcheckeddiagnosis={checkeddiagnosis}\n\t\t\t\t\tcheckedhome_program={checkedhome_program}\n\t\t\t\t\tcheckeddelivery={checkeddelivery}\n          setCheckedinstallation={setCheckedinstallation}\n\t\t\t\t\tsetCheckedmaintenance={setCheckedmaintenance}\n\t\t\t\t\tsetCheckedrepair={setCheckedrepair}\n\t\t\t\t\tsetCheckeddiagnosis={setCheckeddiagnosis}\n          setCheckedHomeProgram={setCheckedHomeProgram}\n          setCheckedDelivery={setCheckedDelivery}\n\n          /* Technician events */\n\t\t\t\t\tnewEvents={newEvents}\n          setNewEvents={setNewEvents}\n          /* Zone file */\n\t\t\t\t\tzoneFile={zoneFile}\n          setZoneFile={setZoneFile}\n\n          loading={loading}\n          setLoading={setLoading}\n\n          // Enterprise\n          enterprise={enterprise}\n          setEnterprise={setEnterprise}\n        />\n      </Paper>\n  \t</React.Fragment>\n  );\n}\n\n\nconst structuredSelector = createStructuredSelector({});\nconst mapDispatchToProps = {};\nexport default connect(structuredSelector, mapDispatchToProps)(NewTechnician)\n"]},"metadata":{},"sourceType":"module"}