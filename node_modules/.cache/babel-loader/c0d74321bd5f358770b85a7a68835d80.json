{"ast":null,"code":"import moment from 'moment-timezone';\nimport { CURRENCY_SYMBOLS, currencyFormatter } from './currency';\nexport var csrf = document.querySelector(\"meta[name='csrf-token']\") == undefined ? \"\" : document.querySelector(\"meta[name='csrf-token']\").getAttribute(\"content\");\nexport var headers = {\n  'Content-Type': 'application/json',\n  'X-CSRF-Token': csrf\n};\nexport var headers_www_form = {\n  'content-type': 'application/x-www-form-urlencoded;charset=UTF-8',\n  'X-CSRF-Token': csrf\n};\nexport var noPaymentsOptions = [\"Garantía de producto/manufactura\", \"Garantía Instalación/Reparación\", \"Instalación sin costo\", \"Cortesía\", \"Segunda visita póliza\", \"Ingreso a taller para diagnóstico\", \"Visita pagada\", \"Pagado en cotización\"];\nexport function api_token(environment) {\n  switch (environment) {\n    case \"staging\":\n      return \"kdOQrQZ1tQr2C0DXBYj3kAtt\";\n      break;\n\n    case \"production\":\n      return \"NOXTr4Z8iwQKTdcFTPhQpgtt\";\n      break;\n\n    default:\n      return \"dIwBMltsWrVznfqqKd95GQtt\";\n      break;\n  }\n}\nexport function site_url(environment) {\n  switch (environment) {\n    case \"staging\":\n      return \"https://mieletickets.garagelabs.cl\";\n      break;\n\n    case \"pre_production\":\n      return \"https://preprod.mieletickets.garagelabs.cl\";\n\n    case \"production\":\n      return \"https://tickets.mielecustomers.cl\";\n      break;\n\n    default:\n      return \"http://localhost:3000\";\n      break;\n  }\n}\nexport function b2b_site_url(environment) {\n  switch (environment) {\n    case \"staging\":\n      return \"https://miele.garagelabs.cl\";\n      break;\n\n    case \"production\":\n      return \"https://www.mielecustomers.cl\";\n      break;\n\n    default:\n      return \"http://localhost:3000\";\n      break;\n  }\n}\nexport function getRandomColor() {\n  var letters = '0123456789ABCDEF';\n  var color = '#';\n\n  for (var i = 0; i < 6; i++) {\n    color += letters[Math.floor(Math.random() * 16)];\n  }\n\n  return color;\n}\nexport function getTechiniansInfo(technicians) {\n  var tech_info = \" \";\n\n  if (technicians) {\n    technicians.map(function (technician) {\n      tech_info = tech_info + \" \" + technician.user.fullname;\n    });\n  }\n\n  return tech_info;\n}\nexport function getProductsInfo(products) {\n  var prod_info = \" \";\n\n  if (products) {\n    products.map(function (product) {\n      prod_info = prod_info + \" \" + product.product.name;\n    });\n  }\n\n  return prod_info;\n}\n/*\n* Parse and integer to money format by country\n*\n* @param {string} country_code - must be an ISO code, ex: MX, CL, BR.\n* */\n\nexport function money_format(country_code, value) {\n  if (Number.isNaN(Number(value))) {\n    return value;\n  }\n\n  var symbol = CURRENCY_SYMBOLS[country_code];\n  var formatter = currencyFormatter(country_code);\n  value = country_code === 'CLP' ? Math.trunc(value) : value;\n  return \"\".concat(symbol, \" \").concat(formatter.format(value));\n}\nexport function custom_money_format(country_code, value) {\n  if (Number.isNaN(Number(value))) {\n    return value;\n  }\n\n  var formatter = new Intl.NumberFormat('es-CL', {\n    maximumFractionDigits: 0\n  });\n\n  if (country_code == 'CL') {\n    value = Math.trunc(value);\n    formatter = new Intl.NumberFormat('es-CL', {\n      maximumFractionDigits: 0\n    });\n  } else if (country_code == 'MX') {\n    formatter = new Intl.NumberFormat('es-MX', {\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2\n    });\n  }\n\n  var value_temp = formatter.format(value);\n\n  if (country_code == 'CLP' && value_temp.length == 4) {\n    return value_temp.replace(/(.)(?=(\\d{3})+$)/g, '$1.');\n  } else {\n    return formatter.format(value);\n  }\n}\nexport function product_price(product, country) {\n  var quantity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  var price = null;\n\n  if (product.product_prices.length > 0) {\n    price = product.product_prices.filter(function (price) {\n      return price.country.iso == country;\n    });\n  }\n\n  if (price && price[0]) {\n    return money_format(country, (price[0].sale_price != null ? price[0].sale_price : price[0].price) * quantity);\n  } else {\n    return money_format(country, 0);\n  }\n}\nexport function product_price_no_format(product, country) {\n  var quantity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  var price = null;\n\n  if (product.product_prices && product.product_prices.length > 0) {\n    price = product.product_prices.filter(function (price) {\n      return price.country.iso == country;\n    });\n  }\n\n  if (price && price[0]) {\n    return (price[0].sale_price != null ? price[0].sale_price : price[0].price) * quantity;\n  } else {\n    return 0.0;\n  }\n}\nexport function quotation_spare_part_price(quotation_spare_part, country) {\n  var quantity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  var product = quotation_spare_part.spare_part;\n\n  if (quotation_spare_part.price != null) {\n    return money_format(country, quotation_spare_part.price * quantity);\n  } else {\n    return product_price(product, country, quantity);\n  }\n}\nexport function quotation_spare_part_price_no_format(quotation_spare_part, country) {\n  var quantity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  var product = quotation_spare_part.spare_part;\n\n  if (quotation_spare_part.price != null) {\n    return quotation_spare_part.price * quantity;\n  } else {\n    return product_price_no_format(product, country, quantity);\n  }\n}\nexport function date_format(value) {\n  return new Intl.DateTimeFormat('es', {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit'\n  }).format(new Date(value));\n}\nexport function date_format_without_time(value) {\n  return new Intl.DateTimeFormat('es', {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit'\n  }).format(new Date(value));\n}\nexport function date_format_without_time_and_zone(value) {\n  return moment.tz(value, \"America/New_York\").format(\"DD/MM/YYYY\");\n}\nexport function date_format_without_zone(value) {\n  return moment.tz(value, \"America/New_York\").format(\"DD/MM/YYYY HH:mm:ss\");\n}\nexport function date_without_time_and_zone(value) {\n  return moment.tz(value, \"America/New_York\");\n}\nexport function date_format_without_time_and_zone_eng(value) {\n  return moment.tz(value, \"America/New_York\").format(\"YYYY-MM-DD\");\n}\nexport function date_event_format(start, end) {\n  var start_event = new Intl.DateTimeFormat('es', {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit'\n  }).format(new Date(start));\n  var end_event = new Intl.DateTimeFormat('es', {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit'\n  }).format(new Date(end));\n\n  if (start_event == end_event) {\n    return moment(start).format(\"DD/MM/YYYY HH:mm\") + \" - \" + moment(end).format(\"HH:mm\");\n  } else {\n    return moment(start).format(\"DD/MM/YYYY HH:mm\") + \" - \" + moment(end).format(\"DD/MM/YYYY HH:mm\");\n  }\n}\nexport function payment_channel_label(value) {\n  var labels = {\n    online: 'Online',\n    transfer: 'Transferencia',\n    phone: 'Por teléfono',\n    pay_at_home: 'Cliente paga en domicilio',\n    bank_deposit: 'Cliente realiza depósito bancario'\n  };\n  return labels[value] ? labels[value] : value;\n}\nexport function check_payment_method_name(channel_label, method_name) {\n  if (channel_label == \"online\" || channel_label == \"phone\") {\n    payment_channel_label(channel_label);\n    return payment_channel_label(channel_label) + \" - \" + method_name;\n  } else {\n    return payment_channel_label(channel_label);\n  }\n}\nexport function date_difference_in_hours(start, end) {\n  var startDate = moment(start);\n  var timeEnd = moment(end);\n  var diff = timeEnd.diff(startDate);\n  var diffDuration = moment.duration(diff);\n  return diffDuration.asHours().toFixed(0);\n}\nexport function isFloat(val) {\n  var floatRegex = /^-?\\d+(?:[.,]\\d*?)?$/;\n  if (!floatRegex.test(val)) return false;\n  val = parseFloat(val);\n  if (isNaN(val)) return false;\n  return true;\n}\nexport function isInt(val) {\n  var intRegex = /^-?\\d+$/;\n  if (!intRegex.test(val)) return false;\n  var intVal = parseInt(val, 10);\n  return parseFloat(val) == intVal && !isNaN(intVal);\n}","map":{"version":3,"sources":["/usr/src/app/javascript/constants/csrf.jsx"],"names":["moment","CURRENCY_SYMBOLS","currencyFormatter","csrf","document","querySelector","undefined","getAttribute","headers","headers_www_form","noPaymentsOptions","api_token","environment","site_url","b2b_site_url","getRandomColor","letters","color","i","Math","floor","random","getTechiniansInfo","technicians","tech_info","map","technician","user","fullname","getProductsInfo","products","prod_info","product","name","money_format","country_code","value","Number","isNaN","symbol","formatter","trunc","format","custom_money_format","Intl","NumberFormat","maximumFractionDigits","minimumFractionDigits","value_temp","length","replace","product_price","country","quantity","price","product_prices","filter","iso","sale_price","product_price_no_format","quotation_spare_part_price","quotation_spare_part","spare_part","quotation_spare_part_price_no_format","date_format","DateTimeFormat","year","month","day","hour","minute","Date","date_format_without_time","date_format_without_time_and_zone","tz","date_format_without_zone","date_without_time_and_zone","date_format_without_time_and_zone_eng","date_event_format","start","end","start_event","end_event","payment_channel_label","labels","online","transfer","phone","pay_at_home","bank_deposit","check_payment_method_name","channel_label","method_name","date_difference_in_hours","startDate","timeEnd","diff","diffDuration","duration","asHours","toFixed","isFloat","val","floatRegex","test","parseFloat","isInt","intRegex","intVal","parseInt"],"mappings":"AAAA,OAAOA,MAAP,MAAmB,iBAAnB;AACA,SAASC,gBAAT,EAA2BC,iBAA3B,QAAoD,YAApD;AAEA,OAAO,IAAMC,IAAI,GAAIC,QAAQ,CAACC,aAAT,CAAuB,yBAAvB,KAAqDC,SAAtD,GAAmE,EAAnE,GAAwEF,QAAQ,CAACC,aAAT,CAAuB,yBAAvB,EAAkDE,YAAlD,CAA+D,SAA/D,CAArF;AACP,OAAO,IAAMC,OAAO,GAAG;AACnB,kBAAgB,kBADG;AAEnB,kBAAgBL;AAFG,CAAhB;AAKP,OAAO,IAAMM,gBAAgB,GAAG;AAC/B,kBAAgB,iDADe;AAE/B,kBAAgBN;AAFe,CAAzB;AAKP,OAAO,IAAMO,iBAAiB,GAAG,CAChC,kCADgC,EAEhC,iCAFgC,EAGhC,uBAHgC,EAIhC,UAJgC,EAKhC,uBALgC,EAMhC,mCANgC,EAOhC,eAPgC,EAQ/B,sBAR+B,CAA1B;AAWP,OAAO,SAASC,SAAT,CAAmBC,WAAnB,EAAgC;AACtC,UAAQA,WAAR;AACC,SAAK,SAAL;AACG,aAAO,0BAAP;AACF;;AACD,SAAK,YAAL;AACG,aAAO,0BAAP;AACF;;AACD;AACG,aAAO,0BAAP;AACF;AATF;AAWA;AAED,OAAO,SAASC,QAAT,CAAkBD,WAAlB,EAA+B;AACrC,UAAQA,WAAR;AACC,SAAK,SAAL;AACG,aAAO,oCAAP;AACF;;AACD,SAAK,gBAAL;AACI,aAAO,4CAAP;;AACJ,SAAK,YAAL;AACG,aAAO,mCAAP;AACF;;AACD;AACG,aAAO,uBAAP;AACF;AAXF;AAaA;AAED,OAAO,SAASE,YAAT,CAAsBF,WAAtB,EAAmC;AACzC,UAAQA,WAAR;AACC,SAAK,SAAL;AACG,aAAO,6BAAP;AACF;;AACD,SAAK,YAAL;AACG,aAAO,+BAAP;AACF;;AACD;AACG,aAAO,uBAAP;AACF;AATF;AAWA;AAGD,OAAO,SAASG,cAAT,GAA0B;AAC/B,MAAIC,OAAO,GAAG,kBAAd;AACA,MAAIC,KAAK,GAAG,GAAZ;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1BD,IAAAA,KAAK,IAAID,OAAO,CAACG,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,EAA3B,CAAD,CAAhB;AACD;;AACD,SAAOJ,KAAP;AACD;AAGD,OAAO,SAASK,iBAAT,CAA2BC,WAA3B,EAAuC;AAC7C,MAAIC,SAAS,GAAG,GAAhB;;AACA,MAAID,WAAJ,EAAgB;AACfA,IAAAA,WAAW,CAACE,GAAZ,CAAgB,UAACC,UAAD,EAAgB;AAC/BF,MAAAA,SAAS,GAAGA,SAAS,GAAE,GAAX,GAAgBE,UAAU,CAACC,IAAX,CAAgBC,QAA5C;AACA,KAFD;AAGA;;AACD,SAAOJ,SAAP;AACA;AAED,OAAO,SAASK,eAAT,CAAyBC,QAAzB,EAAkC;AACxC,MAAIC,SAAS,GAAG,GAAhB;;AACA,MAAID,QAAJ,EAAa;AACZA,IAAAA,QAAQ,CAACL,GAAT,CAAa,UAACO,OAAD,EAAa;AACzBD,MAAAA,SAAS,GAAGA,SAAS,GAAE,GAAX,GAAgBC,OAAO,CAACA,OAAR,CAAgBC,IAA5C;AACA,KAFD;AAGA;;AACD,SAAOF,SAAP;AACA;AACD;AACA;AACA;AACA;AACA;;AACA,OAAO,SAASG,YAAT,CAAsBC,YAAtB,EAAoCC,KAApC,EAA0C;AAChD,MAAGC,MAAM,CAACC,KAAP,CAAaD,MAAM,CAACD,KAAD,CAAnB,CAAH,EAAgC;AAC/B,WAAOA,KAAP;AACA;;AAEA,MAAMG,MAAM,GAAGtC,gBAAgB,CAACkC,YAAD,CAA/B;AACA,MAAMK,SAAS,GAAGtC,iBAAiB,CAACiC,YAAD,CAAnC;AACAC,EAAAA,KAAK,GAAGD,YAAY,KAAK,KAAjB,GAAyBhB,IAAI,CAACsB,KAAL,CAAWL,KAAX,CAAzB,GAA6CA,KAArD;AAEA,mBAAUG,MAAV,cAAoBC,SAAS,CAACE,MAAV,CAAiBN,KAAjB,CAApB;AACD;AAED,OAAO,SAASO,mBAAT,CAA6BR,YAA7B,EAA2CC,KAA3C,EAAiD;AAEvD,MAAGC,MAAM,CAACC,KAAP,CAAaD,MAAM,CAACD,KAAD,CAAnB,CAAH,EAAgC;AAC/B,WAAOA,KAAP;AACA;;AACD,MAAII,SAAS,GAAG,IAAII,IAAI,CAACC,YAAT,CAAsB,OAAtB,EAA8B;AAAEC,IAAAA,qBAAqB,EAAE;AAAzB,GAA9B,CAAhB;;AACA,MAAIX,YAAY,IAAI,IAApB,EAAyB;AACxBC,IAAAA,KAAK,GAAGjB,IAAI,CAACsB,KAAL,CAAWL,KAAX,CAAR;AACAI,IAAAA,SAAS,GAAG,IAAII,IAAI,CAACC,YAAT,CAAsB,OAAtB,EAA8B;AAAEC,MAAAA,qBAAqB,EAAE;AAAzB,KAA9B,CAAZ;AACA,GAHD,MAIK,IAAIX,YAAY,IAAI,IAApB,EAAyB;AAC7BK,IAAAA,SAAS,GAAG,IAAII,IAAI,CAACC,YAAT,CAAsB,OAAtB,EAA8B;AAAEE,MAAAA,qBAAqB,EAAE,CAAzB;AAA4BD,MAAAA,qBAAqB,EAAE;AAAnD,KAA9B,CAAZ;AACA;;AAED,MAAIE,UAAU,GAAGR,SAAS,CAACE,MAAV,CAAiBN,KAAjB,CAAjB;;AACA,MAAID,YAAY,IAAI,KAAhB,IAAyBa,UAAU,CAACC,MAAX,IAAqB,CAAlD,EAAoD;AACnD,WAAOD,UAAU,CAACE,OAAX,CAAmB,mBAAnB,EAAuC,KAAvC,CAAP;AAEA,GAHD,MAGK;AACJ,WAAOV,SAAS,CAACE,MAAV,CAAiBN,KAAjB,CAAP;AACA;AACD;AAED,OAAO,SAASe,aAAT,CAAuBnB,OAAvB,EAAgCoB,OAAhC,EAAsD;AAAA,MAAbC,QAAa,uEAAF,CAAE;AAC5D,MAAIC,KAAK,GAAG,IAAZ;;AACA,MAAGtB,OAAO,CAACuB,cAAR,CAAuBN,MAAvB,GAAgC,CAAnC,EAAqC;AACpCK,IAAAA,KAAK,GAAGtB,OAAO,CAACuB,cAAR,CAAuBC,MAAvB,CAA8B,UAAAF,KAAK;AAAA,aAAKA,KAAK,CAACF,OAAN,CAAcK,GAAd,IAAqBL,OAA1B;AAAA,KAAnC,CAAR;AACA;;AACD,MAAIE,KAAK,IAAIA,KAAK,CAAC,CAAD,CAAlB,EAAuB;AACtB,WAAOpB,YAAY,CAACkB,OAAD,EAAU,CAACE,KAAK,CAAC,CAAD,CAAL,CAASI,UAAT,IAAuB,IAAvB,GAA8BJ,KAAK,CAAC,CAAD,CAAL,CAASI,UAAvC,GAAmDJ,KAAK,CAAC,CAAD,CAAL,CAASA,KAA7D,IAAsED,QAAhF,CAAnB;AACA,GAFD,MAEK;AACJ,WAAOnB,YAAY,CAACkB,OAAD,EAAU,CAAV,CAAnB;AACA;AAED;AAED,OAAO,SAASO,uBAAT,CAAiC3B,OAAjC,EAA0CoB,OAA1C,EAAgE;AAAA,MAAbC,QAAa,uEAAF,CAAE;AACtE,MAAIC,KAAK,GAAG,IAAZ;;AACA,MAAGtB,OAAO,CAACuB,cAAR,IAA0BvB,OAAO,CAACuB,cAAR,CAAuBN,MAAvB,GAAgC,CAA7D,EAA+D;AAC9DK,IAAAA,KAAK,GAAGtB,OAAO,CAACuB,cAAR,CAAuBC,MAAvB,CAA8B,UAAAF,KAAK;AAAA,aAAKA,KAAK,CAACF,OAAN,CAAcK,GAAd,IAAqBL,OAA1B;AAAA,KAAnC,CAAR;AACA;;AACD,MAAIE,KAAK,IAAIA,KAAK,CAAC,CAAD,CAAlB,EAAuB;AACtB,WAAQ,CAACA,KAAK,CAAC,CAAD,CAAL,CAASI,UAAT,IAAuB,IAAvB,GAA8BJ,KAAK,CAAC,CAAD,CAAL,CAASI,UAAvC,GAAmDJ,KAAK,CAAC,CAAD,CAAL,CAASA,KAA7D,IAAsED,QAA9E;AACA,GAFD,MAEK;AACJ,WAAO,GAAP;AACA;AAED;AAED,OAAO,SAASO,0BAAT,CAAoCC,oBAApC,EAA0DT,OAA1D,EAAgF;AAAA,MAAbC,QAAa,uEAAF,CAAE;AACtF,MAAIrB,OAAO,GAAG6B,oBAAoB,CAACC,UAAnC;;AACA,MAAID,oBAAoB,CAACP,KAArB,IAA8B,IAAlC,EAAuC;AACtC,WAAOpB,YAAY,CAACkB,OAAD,EAAUS,oBAAoB,CAACP,KAArB,GAA6BD,QAAvC,CAAnB;AACA,GAFD,MAEK;AACJ,WAAOF,aAAa,CAACnB,OAAD,EAAUoB,OAAV,EAAmBC,QAAnB,CAApB;AACA;AAED;AAED,OAAO,SAASU,oCAAT,CAA8CF,oBAA9C,EAAoET,OAApE,EAA0F;AAAA,MAAbC,QAAa,uEAAF,CAAE;AAChG,MAAIrB,OAAO,GAAG6B,oBAAoB,CAACC,UAAnC;;AACA,MAAID,oBAAoB,CAACP,KAArB,IAA8B,IAAlC,EAAuC;AACtC,WAAOO,oBAAoB,CAACP,KAArB,GAA6BD,QAApC;AACA,GAFD,MAEK;AACJ,WAAOM,uBAAuB,CAAC3B,OAAD,EAAUoB,OAAV,EAAmBC,QAAnB,CAA9B;AACA;AACD;AAGD,OAAO,SAASW,WAAT,CAAqB5B,KAArB,EAA2B;AAEjC,SAAO,IAAIQ,IAAI,CAACqB,cAAT,CAAwB,IAAxB,EAA8B;AAACC,IAAAA,IAAI,EAAE,SAAP;AAAkBC,IAAAA,KAAK,EAAE,SAAzB;AAAmCC,IAAAA,GAAG,EAAE,SAAxC;AAAmDC,IAAAA,IAAI,EAAE,SAAzD;AAAoEC,IAAAA,MAAM,EAAE;AAA5E,GAA9B,EAAsH5B,MAAtH,CAA6H,IAAI6B,IAAJ,CAASnC,KAAT,CAA7H,CAAP;AACA;AAED,OAAO,SAASoC,wBAAT,CAAkCpC,KAAlC,EAAwC;AAC9C,SAAO,IAAIQ,IAAI,CAACqB,cAAT,CAAwB,IAAxB,EAA8B;AAACC,IAAAA,IAAI,EAAE,SAAP;AAAkBC,IAAAA,KAAK,EAAE,SAAzB;AAAmCC,IAAAA,GAAG,EAAE;AAAxC,GAA9B,EAAkF1B,MAAlF,CAAyF,IAAI6B,IAAJ,CAASnC,KAAT,CAAzF,CAAP;AACA;AAED,OAAO,SAASqC,iCAAT,CAA2CrC,KAA3C,EAAiD;AACvD,SAAQpC,MAAM,CAAC0E,EAAP,CAAUtC,KAAV,EAAiB,kBAAjB,EAAqCM,MAArC,CAA4C,YAA5C,CAAR;AACA;AAED,OAAO,SAASiC,wBAAT,CAAkCvC,KAAlC,EAAwC;AAC9C,SAAQpC,MAAM,CAAC0E,EAAP,CAAUtC,KAAV,EAAiB,kBAAjB,EAAqCM,MAArC,CAA4C,qBAA5C,CAAR;AACA;AAGD,OAAO,SAASkC,0BAAT,CAAoCxC,KAApC,EAA0C;AAChD,SAAQpC,MAAM,CAAC0E,EAAP,CAAUtC,KAAV,EAAiB,kBAAjB,CAAR;AACA;AAKD,OAAO,SAASyC,qCAAT,CAA+CzC,KAA/C,EAAqD;AAC3D,SAAQpC,MAAM,CAAC0E,EAAP,CAAUtC,KAAV,EAAiB,kBAAjB,EAAqCM,MAArC,CAA4C,YAA5C,CAAR;AACA;AAKD,OAAO,SAASoC,iBAAT,CAA2BC,KAA3B,EAAkCC,GAAlC,EAAsC;AAC5C,MAAIC,WAAW,GAAG,IAAIrC,IAAI,CAACqB,cAAT,CAAwB,IAAxB,EAA8B;AAACC,IAAAA,IAAI,EAAE,SAAP;AAAkBC,IAAAA,KAAK,EAAE,SAAzB;AAAmCC,IAAAA,GAAG,EAAE;AAAxC,GAA9B,EAAkF1B,MAAlF,CAAyF,IAAI6B,IAAJ,CAASQ,KAAT,CAAzF,CAAlB;AACA,MAAIG,SAAS,GAAG,IAAItC,IAAI,CAACqB,cAAT,CAAwB,IAAxB,EAA8B;AAACC,IAAAA,IAAI,EAAE,SAAP;AAAkBC,IAAAA,KAAK,EAAE,SAAzB;AAAmCC,IAAAA,GAAG,EAAE;AAAxC,GAA9B,EAAkF1B,MAAlF,CAAyF,IAAI6B,IAAJ,CAASS,GAAT,CAAzF,CAAhB;;AAEA,MAAGC,WAAW,IAAIC,SAAlB,EAA4B;AAC3B,WAASlF,MAAM,CAAC+E,KAAD,CAAN,CAAcrC,MAAd,CAAqB,kBAArB,CAAD,GAA6C,KAA7C,GAAsD1C,MAAM,CAACgF,GAAD,CAAN,CAAYtC,MAAZ,CAAmB,OAAnB,CAA9D;AACA,GAFD,MAEK;AACJ,WAAS1C,MAAM,CAAC+E,KAAD,CAAN,CAAcrC,MAAd,CAAqB,kBAArB,CAAD,GAA6C,KAA7C,GAAsD1C,MAAM,CAACgF,GAAD,CAAN,CAAYtC,MAAZ,CAAmB,kBAAnB,CAA9D;AAEA;AAED;AAED,OAAO,SAASyC,qBAAT,CAA+B/C,KAA/B,EAAqC;AAE1C,MAAMgD,MAAM,GAAG;AACbC,IAAAA,MAAM,EAAE,QADK;AAEfC,IAAAA,QAAQ,EAAE,eAFK;AAGfC,IAAAA,KAAK,EAAE,cAHQ;AAIfC,IAAAA,WAAW,EAAE,2BAJE;AAKbC,IAAAA,YAAY,EAAE;AALD,GAAf;AAQA,SAAOL,MAAM,CAAChD,KAAD,CAAN,GAAgBgD,MAAM,CAAChD,KAAD,CAAtB,GAAgCA,KAAvC;AACD;AAGD,OAAO,SAASsD,yBAAT,CAAmCC,aAAnC,EAAkDC,WAAlD,EAA8D;AACpE,MAAGD,aAAa,IAAI,QAAjB,IAA6BA,aAAa,IAAI,OAAjD,EAAyD;AACxDR,IAAAA,qBAAqB,CAACQ,aAAD,CAArB;AACA,WAAOR,qBAAqB,CAACQ,aAAD,CAArB,GAAuC,KAAvC,GAA+CC,WAAtD;AACA,GAHD,MAGK;AACJ,WAAOT,qBAAqB,CAACQ,aAAD,CAA5B;AACA;AAED;AAED,OAAO,SAASE,wBAAT,CAAkCd,KAAlC,EAAyCC,GAAzC,EAA6C;AACnD,MAAIc,SAAS,GAAG9F,MAAM,CAAC+E,KAAD,CAAtB;AACA,MAAIgB,OAAO,GAAG/F,MAAM,CAACgF,GAAD,CAApB;AACA,MAAIgB,IAAI,GAAGD,OAAO,CAACC,IAAR,CAAaF,SAAb,CAAX;AACA,MAAIG,YAAY,GAAGjG,MAAM,CAACkG,QAAP,CAAgBF,IAAhB,CAAnB;AACA,SAAOC,YAAY,CAACE,OAAb,GAAuBC,OAAvB,CAA+B,CAA/B,CAAP;AACA;AAED,OAAO,SAASC,OAAT,CAAiBC,GAAjB,EAAsB;AACzB,MAAIC,UAAU,GAAG,sBAAjB;AACA,MAAI,CAACA,UAAU,CAACC,IAAX,CAAgBF,GAAhB,CAAL,EACI,OAAO,KAAP;AAEJA,EAAAA,GAAG,GAAGG,UAAU,CAACH,GAAD,CAAhB;AACA,MAAIhE,KAAK,CAACgE,GAAD,CAAT,EACI,OAAO,KAAP;AACJ,SAAO,IAAP;AACH;AAED,OAAO,SAASI,KAAT,CAAeJ,GAAf,EAAoB;AACvB,MAAIK,QAAQ,GAAG,SAAf;AACA,MAAI,CAACA,QAAQ,CAACH,IAAT,CAAcF,GAAd,CAAL,EACI,OAAO,KAAP;AAEJ,MAAIM,MAAM,GAAGC,QAAQ,CAACP,GAAD,EAAM,EAAN,CAArB;AACA,SAAOG,UAAU,CAACH,GAAD,CAAV,IAAmBM,MAAnB,IAA6B,CAACtE,KAAK,CAACsE,MAAD,CAA1C;AACH","sourcesContent":["import moment from 'moment-timezone';\nimport { CURRENCY_SYMBOLS, currencyFormatter } from './currency';\n\nexport const csrf = (document.querySelector(\"meta[name='csrf-token']\") == undefined) ? \"\" : document.querySelector(\"meta[name='csrf-token']\").getAttribute(\"content\")\nexport const headers = {\n\t   'Content-Type': 'application/json',\n\t   'X-CSRF-Token': csrf\n\t }\n\nexport const headers_www_form = {\n\t'content-type': 'application/x-www-form-urlencoded;charset=UTF-8',\n\t'X-CSRF-Token': csrf\n}\n\nexport const noPaymentsOptions = [\n\t\"Garantía de producto/manufactura\", \n\t\"Garantía Instalación/Reparación\", \n\t\"Instalación sin costo\", \n\t\"Cortesía\", \n\t\"Segunda visita póliza\", \n\t\"Ingreso a taller para diagnóstico\", \n\t\"Visita pagada\",\n  \"Pagado en cotización\"\n];\n\t\nexport function api_token(environment) {\n\tswitch (environment) {\n\t\tcase \"staging\":\n\t\t  \treturn \"kdOQrQZ1tQr2C0DXBYj3kAtt\"\n\t\t\tbreak;\n\t\tcase \"production\":\n\t\t  \treturn \"NOXTr4Z8iwQKTdcFTPhQpgtt\"\n\t\t\tbreak;\n\t\tdefault:\n\t\t  \treturn \"dIwBMltsWrVznfqqKd95GQtt\"\n\t\t\tbreak;\n\t  }\n}\n\nexport function site_url(environment) {\n\tswitch (environment) {\n\t\tcase \"staging\":\n\t\t  \treturn \"https://mieletickets.garagelabs.cl\"\n\t\t\tbreak;\n\t\tcase \"pre_production\":\n      return \"https://preprod.mieletickets.garagelabs.cl\"\n\t\tcase \"production\":\n\t\t  \treturn \"https://tickets.mielecustomers.cl\"\n\t\t\tbreak;\n\t\tdefault:\n\t\t  \treturn \"http://localhost:3000\"\n\t\t\tbreak;\n\t  }\n}\n\nexport function b2b_site_url(environment) {\n\tswitch (environment) {\n\t\tcase \"staging\":\n\t\t  \treturn \"https://miele.garagelabs.cl\"\n\t\t\tbreak;\n\t\tcase \"production\":\n\t\t  \treturn \"https://www.mielecustomers.cl\"\n\t\t\tbreak;\n\t\tdefault:\n\t\t  \treturn \"http://localhost:3000\"\n\t\t\tbreak;\n\t  }\n}\n\n\nexport function getRandomColor() {\n\t\tvar letters = '0123456789ABCDEF';\n\t\tvar color = '#';\n\t\tfor (var i = 0; i < 6; i++) {\n\t\t  color += letters[Math.floor(Math.random() * 16)];\n\t\t}\n\t\treturn color;\n}\n\n\nexport function getTechiniansInfo(technicians){\n\tvar tech_info = \" \"\n\tif (technicians){\n\t\ttechnicians.map((technician) => {\n\t\t\ttech_info = tech_info +\" \"+ technician.user.fullname\n\t\t});    \n\t}\n\treturn tech_info\n}\n\t\nexport function getProductsInfo(products){\n\tvar prod_info = \" \"\n\tif (products){\n\t\tproducts.map((product) => {\n\t\t\tprod_info = prod_info +\" \"+ product.product.name\n\t\t});    \n\t}\n\treturn prod_info\n}\n/*\n* Parse and integer to money format by country\n*\n* @param {string} country_code - must be an ISO code, ex: MX, CL, BR.\n* */\nexport function money_format(country_code, value){\n\tif(Number.isNaN(Number(value))) {\n\t\treturn value;\n\t}\n\t\n \tconst symbol = CURRENCY_SYMBOLS[country_code];\n  const formatter = currencyFormatter(country_code);\n  value = country_code === 'CLP' ? Math.trunc(value) : value;\n\t\n  return `${symbol} ${formatter.format(value)}`\n}\n\nexport function custom_money_format(country_code, value){\n\n\tif(Number.isNaN(Number(value))) {\n\t\treturn value;\n\t}\n\tvar formatter = new Intl.NumberFormat('es-CL',{ maximumFractionDigits: 0})\n\tif (country_code == 'CL'){\n\t\tvalue = Math.trunc(value);\n\t\tformatter = new Intl.NumberFormat('es-CL',{ maximumFractionDigits: 0})\n\t}\n\telse if (country_code == 'MX'){\n\t\tformatter = new Intl.NumberFormat('es-MX',{ minimumFractionDigits: 2, maximumFractionDigits: 2 })\n\t}\n\t\n\tvar value_temp = formatter.format(value)\n\tif (country_code == 'CLP' && value_temp.length == 4){\n\t\treturn value_temp.replace(/(.)(?=(\\d{3})+$)/g,'$1.')\n\t\n\t}else{\n\t\treturn formatter.format(value)\n\t}\n}\n\nexport function product_price(product, country, quantity = 1){\n\tlet price = null\n\tif(product.product_prices.length > 0){\n\t\tprice = product.product_prices.filter(price => (price.country.iso == country))\n\t}\n\tif (price && price[0] ){\n\t\treturn money_format(country, (price[0].sale_price != null ? price[0].sale_price: price[0].price) * quantity)\n\t}else{\n\t\treturn money_format(country, 0)\n\t}\n\n}\n\nexport function product_price_no_format(product, country, quantity = 1){\n\tlet price = null\n\tif(product.product_prices && product.product_prices.length > 0){\n\t\tprice = product.product_prices.filter(price => (price.country.iso == country))\n\t}\n\tif (price && price[0] ){\n\t\treturn ((price[0].sale_price != null ? price[0].sale_price: price[0].price) * quantity)\n\t}else{\n\t\treturn 0.0\n\t}\n\n}\n\nexport function quotation_spare_part_price(quotation_spare_part, country, quantity = 1){\n\tlet product = quotation_spare_part.spare_part\n\tif (quotation_spare_part.price != null){\n\t\treturn money_format(country, quotation_spare_part.price * quantity)\n\t}else{\n\t\treturn product_price(product, country, quantity)\n\t}\n\n}\n\nexport function quotation_spare_part_price_no_format(quotation_spare_part, country, quantity = 1){\n\tlet product = quotation_spare_part.spare_part\n\tif (quotation_spare_part.price != null){\n\t\treturn quotation_spare_part.price * quantity\n\t}else{\n\t\treturn product_price_no_format(product, country, quantity)\n\t}\n}\n\n\nexport function date_format(value){\n\n\treturn new Intl.DateTimeFormat('es', {year: 'numeric', month: '2-digit',day: '2-digit', hour: '2-digit', minute: '2-digit'}).format(new Date(value))\n}\n\nexport function date_format_without_time(value){\n\treturn new Intl.DateTimeFormat('es', {year: 'numeric', month: '2-digit',day: '2-digit'}).format(new Date(value))\n}\n\nexport function date_format_without_time_and_zone(value){\n\treturn (moment.tz(value, \"America/New_York\").format(\"DD/MM/YYYY\"))\n}\n\nexport function date_format_without_zone(value){\n\treturn (moment.tz(value, \"America/New_York\").format(\"DD/MM/YYYY HH:mm:ss\"))\n}\n\n\nexport function date_without_time_and_zone(value){\n\treturn (moment.tz(value, \"America/New_York\"))\n}\n\n\n\n\nexport function date_format_without_time_and_zone_eng(value){\n\treturn (moment.tz(value, \"America/New_York\").format(\"YYYY-MM-DD\"))\n}\n\n\n\n\nexport function date_event_format(start, end){\n\tlet start_event = new Intl.DateTimeFormat('es', {year: 'numeric', month: '2-digit',day: '2-digit'}).format(new Date(start))\n\tlet end_event = new Intl.DateTimeFormat('es', {year: 'numeric', month: '2-digit',day: '2-digit'}).format(new Date(end))\n\t\n\tif(start_event == end_event){\n\t\treturn ((moment(start).format(\"DD/MM/YYYY HH:mm\")) + \" - \" + (moment(end).format(\"HH:mm\")))\t\n\t}else{\n\t\treturn ((moment(start).format(\"DD/MM/YYYY HH:mm\")) + \" - \" + (moment(end).format(\"DD/MM/YYYY HH:mm\")))\t\n\t\n\t}\n\t\n}\n\nexport function payment_channel_label(value){\n\n  const labels = {\n    online: 'Online',\n\t\ttransfer: 'Transferencia',\n\t\tphone: 'Por teléfono',\n\t\tpay_at_home: 'Cliente paga en domicilio',\n    bank_deposit: 'Cliente realiza depósito bancario'\n  }\n\n  return labels[value] ? labels[value] : value\n}\n\n\nexport function check_payment_method_name(channel_label, method_name){\n\tif(channel_label == \"online\" || channel_label == \"phone\"){\n\t\tpayment_channel_label(channel_label)\n\t\treturn payment_channel_label(channel_label) + \" - \" + method_name\n\t}else{\n\t\treturn payment_channel_label(channel_label)\n\t}\n  \n} \n\nexport function date_difference_in_hours(start, end){\n\tlet startDate = moment(start);\n\tlet timeEnd = moment(end);\n\tlet diff = timeEnd.diff(startDate);\n\tlet diffDuration = moment.duration(diff);\n\treturn diffDuration.asHours().toFixed(0)\n}\n\nexport function isFloat(val) {\n    var floatRegex = /^-?\\d+(?:[.,]\\d*?)?$/;\n    if (!floatRegex.test(val))\n        return false;\n\n    val = parseFloat(val);\n    if (isNaN(val))\n        return false;\n    return true;\n}\n\nexport function isInt(val) {\n    var intRegex = /^-?\\d+$/;\n    if (!intRegex.test(val))\n        return false;\n\n    var intVal = parseInt(val, 10);\n    return parseFloat(val) == intVal && !isNaN(intVal);\n}\n"]},"metadata":{},"sourceType":"module"}