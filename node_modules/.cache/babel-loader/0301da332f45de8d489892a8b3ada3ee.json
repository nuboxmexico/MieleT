{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/javascript/components/customers/CustomerComplaints.jsx\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport Grid from '@material-ui/core/Grid';\nimport MaterialTable from 'react-data-table-component';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Radio from '@material-ui/core/Radio';\nimport Complaint from \"components/complaints/Complaint\";\nimport { makeStyles } from '@material-ui/core/styles';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { useTranslation } from 'react-i18next';\nimport i18next from 'i18next';\nvar useStyles = makeStyles(function (theme) {\n  var _heading;\n\n  return {\n    root: {\n      '& > *': {\n        margin: theme.spacing(1)\n      }\n    },\n    heading: (_heading = {\n      fontSize: theme.typography.pxToRem(15),\n      flexBasis: '25%',\n      flexShrink: 0\n    }, _defineProperty(_heading, '@media (max-width:545px)', {\n      // eslint-disable-line no-useless-computed-key\n      flexBasis: '100%'\n    }), _defineProperty(_heading, \"p\", {\n      display: \"inline-block\"\n    }), _heading),\n    secondaryHeading: {\n      fontSize: theme.typography.pxToRem(15),\n      color: theme.palette.text.secondary\n    }\n  };\n});\n\nfunction CustomerComplaints(props) {\n  var _this = this,\n      _React$createElement;\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var classes = useStyles();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      selectedService = _useState2[0],\n      setSelectedService = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedServiceObject = _useState4[0],\n      setSelectedServiceObject = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      complaints = _useState6[0],\n      setComplaints = _useState6[1];\n\n  function handleServiceRadioChange(e) {\n    setSelectedService(e.target.value);\n  }\n\n  useEffect(function () {\n    if (selectedService != \"\" && props.services.length > 0) {\n      setSelectedServiceObject(props.services.find(function (service) {\n        return service.id == selectedService;\n      }));\n    }\n  }, [selectedService]);\n  useEffect(function () {\n    if (props.customer_id) {\n      fetchComplaintData(props.customer_id);\n    }\n  }, [props.customer_id]);\n\n  function fetchComplaintData(_x) {\n    return _fetchComplaintData.apply(this, arguments);\n  }\n\n  function _fetchComplaintData() {\n    _fetchComplaintData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(customer_id) {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              return _context.abrupt(\"return\", fetch(\"/api/v1/customers/\".concat(customer_id, \"/complaints\")).then(function (response) {\n                return response.json();\n              }).then(function (json) {\n                if (json.data) {\n                  setComplaints(json.data);\n                }\n              })[\"catch\"](function (error) {\n                return console.log(error);\n              }));\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _fetchComplaintData.apply(this, arguments);\n  }\n\n  var service_columns = [{\n    name: '',\n    selector: 'number',\n    grow: true,\n    minWidth: \"65px\",\n    cell: function cell(row) {\n      return /*#__PURE__*/React.createElement(Radio, {\n        checked: row.id == selectedService,\n        onChange: handleServiceRadioChange,\n        value: row.id,\n        name: \"selected-service\",\n        color: \"primary\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 17\n        }\n      });\n    }\n  }, {\n    name: t('globalTables.serviceColumns.number'),\n    selector: 'number',\n    sortable: true,\n    cell: function cell(row) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }\n      }, row.number == \"\" ? t('globalText.noInfo') : row.number);\n    }\n  }, {\n    name: t('globalTables.serviceColumns.ibsNumber'),\n    selector: 'ibs_number',\n    sortable: true,\n    hide: 'sm',\n    cell: function cell(row) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 13\n        }\n      }, !row.ibs_number ? t('globalText.noInfo') : row.ibs_number);\n    }\n  }, {\n    name: t('globalTables.serviceColumns.serviceType'),\n    selector: 'service_type',\n    sortable: true,\n    hide: 'md'\n  }, {\n    name: t('globalTables.serviceColumns.subCategory'),\n    selector: 'subcategory',\n    sortable: true,\n    hide: 'md',\n    cell: function cell(row) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }\n      }, !row.subcategory ? t('globalText.noInfo') : row.subcategory);\n    }\n  }, {\n    name: t('globalTables.serviceColumns.statusLabel'),\n    selector: 'status_label',\n    sortable: true,\n    hide: 'md'\n  }, {\n    name: t('globalTables.serviceColumns.visitNumber'),\n    selector: 'visit_number',\n    sortable: true,\n    hide: 'md',\n    cell: function cell(row) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }\n      }, !row.visit_number ? t('globalText.noInfo') : row.visit_number);\n    }\n  }, {\n    name: t('globalTables.serviceColumns.createdAt'),\n    selector: 'created_at',\n    sortable: true,\n    hide: 'md'\n  }];\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"customer-panel-subtitle complaint-subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 15\n    }\n  }, t('customer.showCustomer.enterComplaint')), /*#__PURE__*/React.createElement(MaterialTable, (_React$createElement = {\n    noHeader: true,\n    columns: service_columns,\n    data: props.services,\n    progressPending: props.userLoadingServices,\n    progressComponent: /*#__PURE__*/React.createElement(CircularProgress, {\n      size: 75,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 36\n      }\n    }),\n    pagination: true,\n    paginationServer: true,\n    responsive: true,\n    onChangeRowsPerPage: props.handleServicesPerRowsChange,\n    onChangePage: props.handleServicesPageChange,\n    paginationTotalRows: props.services_total,\n    highlightOnHover: true,\n    striped: true\n  }, _defineProperty(_React$createElement, \"highlightOnHover\", true), _defineProperty(_React$createElement, \"striped\", true), _defineProperty(_React$createElement, \"paginationPerPage\", 5), _defineProperty(_React$createElement, \"paginationRowsPerPageOptions\", [5, 10, 15, 20, 25, 30]), _defineProperty(_React$createElement, \"noDataComponent\", i18next.t('globalText.NoDataComponent')), _defineProperty(_React$createElement, \"paginationComponentOptions\", {\n    rowsPerPageText: i18next.t('globalText.rowsPerPageText'),\n    rangeSeparatorText: i18next.t('globalText.rangeSeparatorText'),\n    noRowsPerPage: false,\n    selectAllRowsItem: false,\n    selectAllRowsItemText: i18next.t('globalText.selectAllRowsItemText')\n  }), _defineProperty(_React$createElement, \"__self\", this), _defineProperty(_React$createElement, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 167,\n    columnNumber: 15\n  }), _React$createElement)), selectedServiceObject.number && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Complaint, {\n    selectedServiceObject: selectedServiceObject,\n    country: props.country,\n    customer_id: props.customer_id,\n    fetchComplaintData: fetchComplaintData,\n    type_c: \"new\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 15\n    }\n  }, complaints && complaints.map(function (complaint, index) {\n    var labelId = \"accordeon-complaint-\".concat(complaint.id, \"-\").concat(index);\n    return /*#__PURE__*/React.createElement(Accordion, {\n      key: labelId,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(AccordionSummary, {\n      className: 'summary-container',\n      expandIcon: /*#__PURE__*/React.createElement(ExpandMoreIcon, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 49\n        }\n      }),\n      \"aria-controls\": \"\".concat(labelId, \"-content\"),\n      id: \"\".concat(labelId, \"-header\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Typography, {\n      className: classes.heading,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"visit-summary-1\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 41\n      }\n    }, t('customer.showCustomer.complaintNumber')), /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 126\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"visit-summary-2\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215,\n        columnNumber: 41\n      }\n    }, complaint.number)), /*#__PURE__*/React.createElement(Typography, {\n      className: classes.heading,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"visit-summary-1\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 41\n      }\n    }, t('customer.showCustomer.complaintType')), /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 124\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"visit-summary-2\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 41\n      }\n    }, complaint.complaint_type)), /*#__PURE__*/React.createElement(Typography, {\n      className: classes.heading,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"visit-summary-1\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 41\n      }\n    }, t('customer.showCustomer.status')), /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 117\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"visit-summary-2\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 41\n      }\n    }, complaint.status_label)), /*#__PURE__*/React.createElement(Typography, {\n      className: classes.heading,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"visit-summary-1\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 41\n      }\n    }, t('customer.showCustomer.dateOfEntry')), /*#__PURE__*/React.createElement(\"br\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 122\n      }\n    }), /*#__PURE__*/React.createElement(\"span\", {\n      className: \"visit-summary-2\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 41\n      }\n    }, complaint.created_at))), /*#__PURE__*/React.createElement(AccordionDetails, {\n      className: \"visit-accordeon-details\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(Complaint, {\n      selectedServiceObject: selectedServiceObject,\n      complaint: complaint,\n      country: props.country,\n      customer_id: props.customer_id,\n      fetchComplaintData: fetchComplaintData,\n      type_c: \"edit\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 39\n      }\n    })));\n  }))));\n}\n\nvar structuredSelector = createStructuredSelector({});\nvar mapDispatchToProps = {};\nexport default connect(structuredSelector, mapDispatchToProps)(CustomerComplaints);","map":{"version":3,"sources":["/usr/src/app/javascript/components/customers/CustomerComplaints.jsx"],"names":["React","useState","useEffect","Link","connect","createStructuredSelector","Grid","MaterialTable","CircularProgress","Radio","Complaint","makeStyles","Accordion","AccordionSummary","AccordionDetails","Typography","ExpandMoreIcon","useTranslation","i18next","useStyles","theme","root","margin","spacing","heading","fontSize","typography","pxToRem","flexBasis","flexShrink","display","secondaryHeading","color","palette","text","secondary","CustomerComplaints","props","t","classes","selectedService","setSelectedService","selectedServiceObject","setSelectedServiceObject","complaints","setComplaints","handleServiceRadioChange","e","target","value","services","length","find","service","id","customer_id","fetchComplaintData","fetch","then","response","json","data","error","console","log","service_columns","name","selector","grow","minWidth","cell","row","sortable","number","hide","ibs_number","subcategory","visit_number","userLoadingServices","handleServicesPerRowsChange","handleServicesPageChange","services_total","rowsPerPageText","rangeSeparatorText","noRowsPerPage","selectAllRowsItem","selectAllRowsItemText","country","map","complaint","index","labelId","complaint_type","status_label","created_at","structuredSelector","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom'\nimport { connect } from \"react-redux\"\nimport { createStructuredSelector } from \"reselect\"\nimport Grid from '@material-ui/core/Grid';\nimport MaterialTable from 'react-data-table-component';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Radio from '@material-ui/core/Radio';\n\nimport Complaint from \"components/complaints/Complaint\"\nimport { makeStyles } from '@material-ui/core/styles';\nimport Accordion from '@material-ui/core/Accordion';\nimport AccordionSummary from '@material-ui/core/AccordionSummary';\nimport AccordionDetails from '@material-ui/core/AccordionDetails';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { useTranslation } from 'react-i18next';\nimport i18next from 'i18next';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    '& > *': {\n      margin: theme.spacing(1),\n    },\n  },\n  heading: {\n      fontSize: theme.typography.pxToRem(15),\n      flexBasis: '25%',\n      flexShrink: 0,\n      ['@media (max-width:545px)']: { // eslint-disable-line no-useless-computed-key\n          flexBasis: '100%',\n      },\n      p:{\n          display: \"inline-block\",\n      }\n    },\n  secondaryHeading: {\n  fontSize: theme.typography.pxToRem(15),\n  color: theme.palette.text.secondary,\n  },\n}));\n\n\n\nfunction CustomerComplaints(props){\n    const {t} = useTranslation();\n    const classes = useStyles();\n    const [selectedService, setSelectedService] = useState(\"\");\n    const [selectedServiceObject, setSelectedServiceObject] = useState({});\n    \n    const [complaints, setComplaints] = useState([]);\n    \n\n    function handleServiceRadioChange(e){\n        setSelectedService(e.target.value)\n    }\n       \n    useEffect(() => {\n      \n      if(selectedService != \"\" && props.services.length > 0){\n        setSelectedServiceObject(props.services.find(service => service.id ==  selectedService))\n      }\n    }, [selectedService]);\n\n    useEffect(() => {\n      if (props.customer_id){\n        fetchComplaintData(props.customer_id);\n      }\n      \n    }, [props.customer_id]);\n  \n    async function fetchComplaintData(customer_id) {\n      return fetch(`/api/v1/customers/${customer_id}/complaints`)\n        .then(response => response.json())\n        .then(json => {\n            if(json.data){\n              setComplaints(json.data)\n            }\n        })\n        .catch(error => console.log(error));\n    }\n        \n    const service_columns = [\n\n       {\n            name: '',\n            selector: 'number',\n            grow: true,\n            minWidth: \"65px\",\n            cell: row => (\n                <Radio\n                    checked={row.id == selectedService}\n                    onChange={handleServiceRadioChange}\n                    value={row.id}\n                    name=\"selected-service\"\n                    color=\"primary\"\n                />\n            ),\n        },\n        {\n          name: t('globalTables.serviceColumns.number'),\n          selector: 'number',\n          sortable: true,\n          cell: row => (\n            <span>\n              {(row.number == \"\" ? t('globalText.noInfo') : row.number)}\n            </span>\n          ),\n        },\n        {\n          name: t('globalTables.serviceColumns.ibsNumber'),\n          selector: 'ibs_number',\n          sortable: true,\n          hide: 'sm',\n          cell: row => (\n            <span>\n              {(!row.ibs_number ? t('globalText.noInfo') : row.ibs_number)}\n            </span>\n          ),\n        },\n        {\n          name: t('globalTables.serviceColumns.serviceType'),\n          selector: 'service_type',\n          sortable: true,\n          hide: 'md'\n        },\n        {\n          name: t('globalTables.serviceColumns.subCategory'),\n          selector: 'subcategory',\n          sortable: true,\n          hide: 'md',\n          cell: row => (\n            <span>\n              {(!row.subcategory ? t('globalText.noInfo') : row.subcategory)}\n            </span>\n          ),\n        },\n        {\n          name: t('globalTables.serviceColumns.statusLabel'),\n          selector: 'status_label',\n          sortable: true,\n          hide: 'md'\n        },\n        {\n          name: t('globalTables.serviceColumns.visitNumber'),\n          selector: 'visit_number',\n          sortable: true,\n          hide: 'md',\n          cell: row => (\n            <span>\n              {(!row.visit_number ? t('globalText.noInfo') : row.visit_number)}\n            </span>\n          ),\n        },\n        {\n          name: t('globalTables.serviceColumns.createdAt'),\n          selector: 'created_at',\n          sortable: true,\n          hide: 'md'\n        },  \n    ];\n  \treturn (\n  \t\t<React.Fragment>\n              <h3 className={\"customer-panel-subtitle complaint-subtitle\"}>\n                {t('customer.showCustomer.enterComplaint')}\n              </h3>\n              <MaterialTable\n                noHeader={true}\n                columns={service_columns}\n                data={props.services}\n                progressPending={props.userLoadingServices}\n                progressComponent={<CircularProgress size={75} />}\n                pagination\n                paginationServer\n                responsive={true}\n                onChangeRowsPerPage={props.handleServicesPerRowsChange}\n                onChangePage={props.handleServicesPageChange}\n                paginationTotalRows={props.services_total}\n                highlightOnHover={true}\n                striped={true}\n                highlightOnHover={true}\n                striped={true}\n                paginationPerPage={5}\n                paginationRowsPerPageOptions={[5, 10, 15, 20, 25, 30]}\n                noDataComponent={i18next.t('globalText.NoDataComponent')}\n                paginationComponentOptions={{rowsPerPageText: i18next.t('globalText.rowsPerPageText'), rangeSeparatorText: i18next.t('globalText.rangeSeparatorText'), noRowsPerPage: false, selectAllRowsItem: false, selectAllRowsItemText: i18next.t('globalText.selectAllRowsItemText') }}\n            />\n\n          {selectedServiceObject.number && \n            <>\n            <Complaint\n              selectedServiceObject={selectedServiceObject}\n              country={props.country}\n              customer_id={props.customer_id}\n              fetchComplaintData={fetchComplaintData}\n              type_c={\"new\"}\n            />\n            </>\n          }\n          <br /><br />\n            <Grid container spacing={1}>\n              <Grid item xs={12}>       \n                    {complaints && complaints.map((complaint, index) => {\n                        const labelId = `accordeon-complaint-${complaint.id}-${index}`;\n                        \n                        return (\n                                <Accordion key={labelId}>\n                                    <AccordionSummary \n                                    className={'summary-container'}\n                                    expandIcon={<ExpandMoreIcon />}\n                                    aria-controls={`${labelId}-content`}\n                                    id={`${labelId}-header`} >\n                                    <Typography className={classes.heading}>\n                                        <span className=\"visit-summary-1\">{t('customer.showCustomer.complaintNumber')}</span><br/>\n                                        <span className=\"visit-summary-2\">{complaint.number}</span>\n                                        </Typography>\n                                    <Typography className={classes.heading}>\n                                        <span className=\"visit-summary-1\">{t('customer.showCustomer.complaintType')}</span><br/>\n                                        <span className=\"visit-summary-2\">{complaint.complaint_type}</span>\n                                    </Typography>\n                                    \n                                    <Typography className={classes.heading}>\n                                        <span className=\"visit-summary-1\">{t('customer.showCustomer.status')}</span><br/>\n                                        <span className=\"visit-summary-2\">{complaint.status_label}</span>\n                                    </Typography>\n                                    \n                                    \n\n                                    <Typography className={classes.heading}>\n                                        <span className=\"visit-summary-1\">{t('customer.showCustomer.dateOfEntry')}</span><br/>\n                                        <span className=\"visit-summary-2\">{complaint.created_at}</span>\n                                    </Typography>\n                                    \n                                    </AccordionSummary>\n                                    <AccordionDetails className=\"visit-accordeon-details\">\n                                      <Complaint\n                                        selectedServiceObject={selectedServiceObject}\n                                        complaint={complaint}\n                                        country={props.country}\n                                        customer_id={props.customer_id}\n                                        fetchComplaintData={fetchComplaintData}\n                                        type_c={\"edit\"}\n                                      />\n                                    </AccordionDetails>\n                                </Accordion>\n                        );\n                    })}\n                </Grid>\n            </Grid>\n         \n\t\t</React.Fragment>\n\t);\n  \n}\n\nconst structuredSelector = createStructuredSelector({});\nconst mapDispatchToProps = {};\nexport default connect(structuredSelector, mapDispatchToProps)(CustomerComplaints)\n"]},"metadata":{},"sourceType":"module"}