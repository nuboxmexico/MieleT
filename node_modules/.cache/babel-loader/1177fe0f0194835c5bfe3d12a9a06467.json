{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/javascript/components/services/visits/VisitProducts.jsx\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport CustomerProductEan from \"components/customers/common/CustomerProductEan\";\nimport Radio from '@material-ui/core/Radio';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Grid from '@material-ui/core/Grid';\nimport { csrf, headers, money_format, date_format_without_time, date_format_without_time_and_zone } from \"constants/csrf\"; // Card\n\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia'; // Dialog\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Image from 'material-ui-image';\nimport Button from '@material-ui/core/Button';\nimport { useTranslation } from \"react-i18next\";\nimport { SRLWrapper } from \"simple-react-lightbox\";\n\nfunction VisitProducts(props) {\n  var _this = this;\n\n  var _useTranslation = useTranslation('translation', {\n    keyPrefix: 'services.visits'\n  }),\n      t = _useTranslation.t;\n\n  var _useState = useState(props.visit.customer_products.length > 0 && props.visit.customer_products[0].id || \"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      checked = _useState2[0],\n      setChecked = _useState2[1];\n\n  var _useState3 = useState(props.visit.customer_products && props.visit.customer_products[0] || {}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedCustomerProduct = _useState4[0],\n      setSelectedCustomerProduct = _useState4[1];\n\n  var _useState5 = useState(props.visit.visit_customer_products && props.visit.visit_customer_products[0] || {}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      selectedVisitCustomerProduct = _useState6[0],\n      setSelectedVisitCustomerProduct = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      images = _useState8[0],\n      setImages = _useState8[1]; // Delete image dialog\n\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      openDeleteImageDialog = _React$useState2[0],\n      setOpenDeleteImageDialog = _React$useState2[1];\n\n  var _React$useState3 = React.useState(\"\"),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      currentDeleteImage = _React$useState4[0],\n      setCurrentDeleteImage = _React$useState4[1];\n\n  var handleClickOpenImageDialog = function handleClickOpenImageDialog(image_id) {\n    setCurrentDeleteImage(image_id);\n    setOpenDeleteImageDialog(true);\n  };\n\n  var handleCloseImageDialog = function handleCloseImageDialog() {\n    setOpenDeleteImageDialog(false);\n  };\n\n  var handleDeleteImage = function handleDeleteImage() {\n    setOpenDeleteImageDialog(false);\n    return axios[\"delete\"](\"/api/v1/file_resources/\".concat(currentDeleteImage), {\n      headers: headers\n    }).then(function (response) {\n      var files_t = images.filter(function (file) {\n        return String(file.id) != String(currentDeleteImage);\n      });\n      setImages(files_t);\n      flash_alert(\"Eliminado!\", \"El archivo ha sido eliminado correctamente\", \"success\");\n    })[\"catch\"](function (e) {\n      flash_alert(\"Error!\", \"No se ha podido eliminar el archivo\", \"danger\");\n    });\n  };\n\n  function handleToggle(customer_product, visit_customer_product) {\n    setChecked(customer_product.id);\n    setSelectedCustomerProduct(customer_product);\n    setSelectedVisitCustomerProduct(visit_customer_product);\n    visit_customer_product && getProductImages(visit_customer_product);\n  }\n\n  function getProductImages(visit_customer_product) {\n    var url = \"/api/v1/file_resources/\".concat(visit_customer_product.id, \"/visit_customer_products\");\n    fetch(url).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      if (json.data) {\n        setImages(json.data);\n      }\n\n      setIsLoading(false);\n    })[\"catch\"](function (error) {\n      return console.error(error) && setIsLoading(false);\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, props.visit.customer_products && props.visit.customer_products.map(function (customer_product) {\n    var listId = \"list-visit-products-\".concat(props.visit.id, \"-\").concat(customer_product.id);\n    var labelId = \"visit-products-\".concat(props.visit.id, \"-\").concat(customer_product.id);\n    var visit_customer_product = props.visit.visit_customer_products.find(function (visit_customer_product) {\n      return visit_customer_product.customer_product_id == customer_product.id;\n    });\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: listId,\n      role: undefined,\n      dense: true,\n      button: true,\n      onClick: function onClick() {\n        return handleToggle(customer_product, visit_customer_product);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(ListItemIcon, {\n      className: \"service-address-label\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(FormControlLabel, {\n      value: customer_product.id,\n      control: /*#__PURE__*/React.createElement(Radio, {\n        color: \"primary\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 80\n        }\n      }),\n      label: \"\",\n      checked: checked == customer_product.id,\n      tabIndex: -1,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(ListItemText, {\n      id: labelId,\n      secondary: /*#__PURE__*/React.createElement(Grid, {\n        container: true,\n        spacing: 1,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 33\n        }\n      }, /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        sm: 4,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"visit-summary-1\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 41\n        }\n      }, t('productTableInfo.name')), /*#__PURE__*/React.createElement(\"br\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 110\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"visit-summary-2\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 41\n        }\n      }, customer_product.product.name)), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        sm: 3,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"visit-summary-1\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 41\n        }\n      }, t('productTableInfo.tnr')), /*#__PURE__*/React.createElement(\"br\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 109\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"visit-summary-2\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 41\n        }\n      }, customer_product.product.tnr)), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        sm: 3,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"visit-summary-1\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 41\n        }\n      }, t('productTableInfo.id')), /*#__PURE__*/React.createElement(\"br\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 108\n        }\n      }), /*#__PURE__*/React.createElement(CustomerProductEan, {\n        key: customer_product.serial_id,\n        serial_id: customer_product.serial_id,\n        b2b_ean: customer_product.b2b_ean,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 41\n        }\n      })), /*#__PURE__*/React.createElement(Grid, {\n        item: true,\n        xs: 12,\n        sm: 2,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: \"visit-summary-1\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 41\n        }\n      }, t('productTableInfo.status')), /*#__PURE__*/React.createElement(\"br\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 112\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"visit-summary-2\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 41\n        }\n      }, customer_product.status))),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(ListItemSecondaryAction, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 25\n      }\n    }));\n  })), /*#__PURE__*/React.createElement(Grid, {\n    style: {\n      marginTop: \"15px\"\n    },\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 25\n    }\n  }, t('expertOpinion')), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 86\n    }\n  }), selectedVisitCustomerProduct && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 29\n    }\n  }, selectedVisitCustomerProduct.expert_opinion != \"\" && selectedVisitCustomerProduct.expert_opinion != null ? selectedVisitCustomerProduct.expert_opinion : t('noInfo')) || /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 29\n    }\n  }, selectedCustomerProduct.expert_opinion != \"\" && selectedCustomerProduct.expert_opinion != null ? selectedCustomerProduct.expert_opinion : t('noInfo'))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 25\n    }\n  }, t('activityPerformed')), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 90\n    }\n  }), selectedVisitCustomerProduct && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 29\n    }\n  }, selectedVisitCustomerProduct.activity_performed != \"\" && selectedVisitCustomerProduct.activity_performed != null ? selectedVisitCustomerProduct.activity_performed : t('noInfo')) || /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 29\n    }\n  }, selectedCustomerProduct.activity_performed != \"\" && selectedCustomerProduct.activity_performed != null ? selectedCustomerProduct.activity_performed : t('noInfo'))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 25\n    }\n  }, t('technicalDiagnosis')), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 91\n    }\n  }), selectedVisitCustomerProduct && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 29\n    }\n  }, selectedVisitCustomerProduct.technical_diagnosis != \"\" && selectedVisitCustomerProduct.technical_diagnosis != null ? selectedVisitCustomerProduct.technical_diagnosis : t('noInfo')) || /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 29\n    }\n  }, selectedCustomerProduct.technical_diagnosis != \"\" && selectedCustomerProduct.technical_diagnosis != null ? selectedCustomerProduct.technical_diagnosis : t('noInfo'))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 25\n    }\n  }, t('warranty')), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 81\n    }\n  }), selectedVisitCustomerProduct && /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 29\n    }\n  }, selectedVisitCustomerProduct.warranty != \"\" && selectedVisitCustomerProduct.warranty != null ? selectedVisitCustomerProduct.warranty : t('noInfo')) || /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 29\n    }\n  }, selectedCustomerProduct.warranty != \"\" && selectedCustomerProduct.warranty != null ? selectedCustomerProduct.warranty : t('noInfo'))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 25\n    }\n  }, t('instalationDate')), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 88\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"visit-summary-2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 25\n    }\n  }, selectedCustomerProduct.instalation_date == null ? \"No\" : date_format_without_time_and_zone(selectedCustomerProduct.instalation_date), selectedCustomerProduct.reinstalation_date != null && /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 37\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 42\n    }\n  }), selectedCustomerProduct.reinstalation_date == null ? \"\" : date_format_without_time_and_zone(selectedCustomerProduct.reinstalation_date) + t('reinstaled'))))), /*#__PURE__*/React.createElement(SRLWrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 17\n    }\n  }, images.length > 0 && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"service-p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 29\n    }\n  }, \"Archivos cargados\")), images && images.map(function (image) {\n    var labelId = \"file-list-label-\".concat(image.id);\n    return /*#__PURE__*/React.createElement(Grid, {\n      key: labelId,\n      item: true,\n      xs: 6,\n      sm: 2,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(Card, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(CardActionArea, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      href: image.resource_url,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(Image, {\n      src: image.resource_url,\n      className: \"file-image\",\n      srl_gallery_image: \"true\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 49\n      }\n    }))), /*#__PURE__*/React.createElement(CardActions, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"a\", {\n      target: \"_blank\",\n      href: image.resource_url,\n      className: \"mdl-navigation__link brand-link\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 45\n      }\n    }, image.description))));\n  }), /*#__PURE__*/React.createElement(Dialog, {\n    open: openDeleteImageDialog,\n    onClose: handleCloseImageDialog,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 21\n    }\n  }, \"Eliminar foto\"), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(DialogContentText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 25\n    }\n  }, \"\\xBFEsta seguro que desea eliminar este archivo?\")), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleCloseImageDialog,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 25\n    }\n  }, \"No\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: handleDeleteImage,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 25\n    }\n  }, \"Si\"))))));\n}\n\nvar structuredSelector = createStructuredSelector({});\nvar mapDispatchToProps = {};\nexport default connect(structuredSelector, mapDispatchToProps)(VisitProducts);","map":{"version":3,"sources":["/usr/src/app/javascript/components/services/visits/VisitProducts.jsx"],"names":["React","useState","useEffect","axios","connect","createStructuredSelector","CustomerProductEan","Radio","List","ListItem","ListItemIcon","ListItemSecondaryAction","ListItemText","FormControlLabel","Grid","csrf","headers","money_format","date_format_without_time","date_format_without_time_and_zone","Card","CardActionArea","CardActions","CardContent","CardMedia","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Image","Button","useTranslation","SRLWrapper","VisitProducts","props","keyPrefix","t","visit","customer_products","length","id","checked","setChecked","selectedCustomerProduct","setSelectedCustomerProduct","visit_customer_products","selectedVisitCustomerProduct","setSelectedVisitCustomerProduct","images","setImages","openDeleteImageDialog","setOpenDeleteImageDialog","currentDeleteImage","setCurrentDeleteImage","handleClickOpenImageDialog","image_id","handleCloseImageDialog","handleDeleteImage","then","response","files_t","filter","file","String","flash_alert","e","handleToggle","customer_product","visit_customer_product","getProductImages","url","fetch","json","data","setIsLoading","error","console","map","listId","labelId","find","customer_product_id","undefined","product","name","tnr","serial_id","b2b_ean","status","marginTop","expert_opinion","activity_performed","technical_diagnosis","warranty","instalation_date","reinstalation_date","image","resource_url","description","structuredSelector","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { connect } from \"react-redux\"\nimport { createStructuredSelector } from \"reselect\"\nimport CustomerProductEan from \"components/customers/common/CustomerProductEan\";\nimport Radio from '@material-ui/core/Radio';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Grid from '@material-ui/core/Grid';\nimport {csrf, headers,money_format, date_format_without_time, date_format_without_time_and_zone} from \"constants/csrf\"\n// Card\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\n// Dialog\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Image from 'material-ui-image'\nimport Button from '@material-ui/core/Button';\nimport {useTranslation} from \"react-i18next\"\n\nimport { SRLWrapper } from \"simple-react-lightbox\";\n\n\nfunction VisitProducts(props){\n    const { t } = useTranslation('translation', { keyPrefix: 'services.visits' });\n    const [checked, setChecked] = useState((props.visit.customer_products.length > 0 && props.visit.customer_products[0].id || \"\"));\n    const [selectedCustomerProduct, setSelectedCustomerProduct] = useState((props.visit.customer_products && props.visit.customer_products[0] || {}));\n    const [selectedVisitCustomerProduct, setSelectedVisitCustomerProduct] = useState((props.visit.visit_customer_products && props.visit.visit_customer_products[0] || {}));\n    const [images, setImages] = useState([]);\n    \n\n     // Delete image dialog\n     const [openDeleteImageDialog, setOpenDeleteImageDialog] = React.useState(false);\n     const [currentDeleteImage, setCurrentDeleteImage] = React.useState(\"\");\n     \n     const handleClickOpenImageDialog = (image_id) => {\n        setCurrentDeleteImage(image_id)\n        setOpenDeleteImageDialog(true);\n     };\n \n     const handleCloseImageDialog = () => {\n         setOpenDeleteImageDialog(false);\n     };\n\n    const handleDeleteImage = () => {\n        setOpenDeleteImageDialog(false);\n        return axios.delete(`/api/v1/file_resources/${currentDeleteImage}`, { headers: headers})\n\t  \t.then(response => {\n            \n            let files_t = images.filter(file => String(file.id) != String(currentDeleteImage));\n            setImages(files_t)\n            flash_alert(\"Eliminado!\", \"El archivo ha sido eliminado correctamente\", \"success\")\n\t  \t})\n\t    .catch(e => {\n\t    \tflash_alert(\"Error!\", \"No se ha podido eliminar el archivo\", \"danger\")\n\n\t\t});\n    };\n\n\n\n    function handleToggle(customer_product, visit_customer_product){\n        setChecked(customer_product.id)\n        setSelectedCustomerProduct(customer_product)\n        setSelectedVisitCustomerProduct(visit_customer_product)\n        visit_customer_product && getProductImages(visit_customer_product)\n    }\n\n    function getProductImages(visit_customer_product){\n        var url = `/api/v1/file_resources/${visit_customer_product.id}/visit_customer_products`\n        fetch(url).then((response) => response.json())\n        .then((json) => {\n            if(json.data)\n            {\n                setImages(json.data)\n            }\n            setIsLoading(false)\n        })\n        .catch((error) => console.error(error) && setIsLoading(false));\n      }\n    \n\n\treturn (\n\t\t<React.Fragment>\n            <List>\n                {props.visit.customer_products && props.visit.customer_products.map((customer_product) => {\n                    const listId = `list-visit-products-${props.visit.id}-${customer_product.id}`;\n                    const labelId = `visit-products-${props.visit.id}-${customer_product.id}`;\n                    const visit_customer_product = props.visit.visit_customer_products.find(visit_customer_product => visit_customer_product.customer_product_id ==  customer_product.id)\n                    return (\n                    <ListItem key={listId} role={undefined} dense button onClick={() => handleToggle(customer_product, visit_customer_product)}>\n                        <ListItemIcon className=\"service-address-label\">\n                        <FormControlLabel value={customer_product.id} control={<Radio color=\"primary\"/>} label=\"\" checked={checked == customer_product.id}\n                            tabIndex={-1}\n                        />\n                        </ListItemIcon>\n                        <ListItemText \n                            id={labelId}\n                            secondary={\n                                <Grid container spacing={1}>\n                                    <Grid item xs={12} sm={4}>\n                                        <span className=\"visit-summary-1\">{t('productTableInfo.name')}</span><br/>\n                                        <span className=\"visit-summary-2\">{customer_product.product.name}</span>\n                                    </Grid>\n                                    <Grid item xs={12} sm={3}>\n                                        <span className=\"visit-summary-1\">{t('productTableInfo.tnr')}</span><br/>\n                                        <span className=\"visit-summary-2\">{customer_product.product.tnr}</span>\n                                    </Grid>\n                                    <Grid item xs={12} sm={3}>\n                                        <span className=\"visit-summary-1\">{t('productTableInfo.id')}</span><br/>\n                                        <CustomerProductEan key={customer_product.serial_id} serial_id={customer_product.serial_id} b2b_ean={customer_product.b2b_ean}/>\n                                    </Grid>\n                                    <Grid item xs={12} sm={2}>\n                                        <span className=\"visit-summary-1\">{t('productTableInfo.status')}</span><br/>\n                                        <span className=\"visit-summary-2\">{customer_product.status}</span>\n                                    </Grid>\n                                </Grid>\n                            } \n                        />\n                        \n                    \n                        <ListItemSecondaryAction>\n                        \n                        </ListItemSecondaryAction>\n                    </ListItem>\n                    );\n                })}\n                \n                </List>\n                <Grid style={{marginTop: \"15px\"}} container spacing={1}>\n                    <Grid item xs={12} sm={4}>\n                        <span className=\"visit-summary-1\">{t('expertOpinion')}</span><br/>\n                        {selectedVisitCustomerProduct && \n                            <span className=\"visit-summary-2\">{(selectedVisitCustomerProduct.expert_opinion != \"\" && selectedVisitCustomerProduct.expert_opinion != null) ? selectedVisitCustomerProduct.expert_opinion : t('noInfo')}</span>\n                        ||\n                            <span className=\"visit-summary-2\">{(selectedCustomerProduct.expert_opinion != \"\" && selectedCustomerProduct.expert_opinion != null) ? selectedCustomerProduct.expert_opinion : t('noInfo')}</span>\n                        }\n                    </Grid>\n                    <Grid item xs={12} sm={4}>\n                        <span className=\"visit-summary-1\">{t('activityPerformed')}</span><br/>\n                        {selectedVisitCustomerProduct && \n                            <span className=\"visit-summary-2\">{(selectedVisitCustomerProduct.activity_performed != \"\" && selectedVisitCustomerProduct.activity_performed != null) ? selectedVisitCustomerProduct.activity_performed : t('noInfo')}</span>\n                        ||\n                            <span className=\"visit-summary-2\">{(selectedCustomerProduct.activity_performed != \"\" && selectedCustomerProduct.activity_performed != null) ? selectedCustomerProduct.activity_performed : t('noInfo')}</span>\n                        }\n                    </Grid>\n                    <Grid item xs={12} sm={4}>\n                        <span className=\"visit-summary-1\">{t('technicalDiagnosis')}</span><br/>\n                        {selectedVisitCustomerProduct && \n                            <span className=\"visit-summary-2\">{(selectedVisitCustomerProduct.technical_diagnosis != \"\" && selectedVisitCustomerProduct.technical_diagnosis != null) ? selectedVisitCustomerProduct.technical_diagnosis : t('noInfo')}</span>\n                        ||\n                            <span className=\"visit-summary-2\">{(selectedCustomerProduct.technical_diagnosis != \"\" && selectedCustomerProduct.technical_diagnosis != null) ? selectedCustomerProduct.technical_diagnosis : t('noInfo')}</span>\n                        }\n                    </Grid>\n                    <Grid item xs={12} sm={4}>\n                        <span className=\"visit-summary-1\">{t('warranty')}</span><br/>\n                        {selectedVisitCustomerProduct && \n                            <span className=\"visit-summary-2\">{(selectedVisitCustomerProduct.warranty != \"\" && selectedVisitCustomerProduct.warranty != null) ? selectedVisitCustomerProduct.warranty : t('noInfo')}</span>\n                        ||\n                            <span className=\"visit-summary-2\">{(selectedCustomerProduct.warranty != \"\" && selectedCustomerProduct.warranty != null) ? selectedCustomerProduct.warranty : t('noInfo')}</span>\n                        }\n                    </Grid>\n                    <Grid item xs={12} sm={4}>\n                        <span className=\"visit-summary-1\">{t('instalationDate')}</span><br/>\n                        <span className=\"visit-summary-2\">\n                            {(selectedCustomerProduct.instalation_date == null ? \"No\" : date_format_without_time_and_zone(selectedCustomerProduct.instalation_date))}\n                            {selectedCustomerProduct.reinstalation_date != null  &&\n                                <>\n                                    <br/><br/>\n                                    {(selectedCustomerProduct.reinstalation_date == null ? \"\" : date_format_without_time_and_zone(selectedCustomerProduct.reinstalation_date) + t('reinstaled') )}\n                                </>\n                            }\n                        </span>\n                    </Grid>\n                </Grid>\n                <SRLWrapper>\n                <Grid container spacing={2}>\n                    {images.length > 0 &&\n                        <Grid item xs={12}>\n                            <p className=\"service-p\">Archivos cargados</p>\n                        </Grid>\n                    }\n                    {images && images.map((image) => {\n                        const labelId = `file-list-label-${image.id}`;\n                        return (\n                            <Grid key={labelId} item xs={6} sm={2}>\n                                <Card>\n                                    <CardActionArea>\n                                            <a href={image.resource_url}>\n                                                <Image\n                                                    src={image.resource_url}\n                                                    className=\"file-image\"\n                                                    srl_gallery_image=\"true\" \n                                                />\n                                            </a>\n                                    </CardActionArea>\n                                    {\n                                    <CardActions>\n                                            <a target=\"_blank\" href={image.resource_url} className=\"mdl-navigation__link brand-link\" >{image.description}</a>\n                                    </CardActions>\n                                    \n                                    }\n                                </Card>\n                            </Grid>\n                        );\n                    })}\n                  \n                <Dialog open={openDeleteImageDialog} onClose={handleCloseImageDialog} aria-labelledby=\"form-dialog-title\">\n                    <DialogTitle id=\"form-dialog-title\">Eliminar foto</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>\n                            Esta seguro que desea eliminar este archivo?\n                        </DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={handleCloseImageDialog} color=\"primary\">\n                            No\n                        </Button>\n                        <Button onClick={handleDeleteImage} color=\"primary\">\n                            Si\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n                </Grid>\n                </SRLWrapper>\n\t\t</React.Fragment>\n\t);\n  \n}\n\nconst structuredSelector = createStructuredSelector({\n});\nconst mapDispatchToProps = {};\n\nexport default connect(structuredSelector, mapDispatchToProps)(VisitProducts)\n\n"]},"metadata":{},"sourceType":"module"}