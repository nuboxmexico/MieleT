{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/javascript/components/users/EditUser.jsx\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport PropTypes from \"prop-types\";\nimport axios from 'axios';\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport { flash_alert } from 'components/App';\nimport Users from \"components/users/Users\";\nimport UserForm from \"components/users/UserForm\";\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\n\nfunction EditUser(props) {\n  var _React$createElement;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showPassword = _useState2[0],\n      setShowpassword = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      firstname = _useState4[0],\n      setFirstname = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      lastname = _useState6[0],\n      setLastname = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      password = _useState8[0],\n      setPassword = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      email = _useState10[0],\n      setEmail = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      roleName = _useState12[0],\n      setRoleName = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      country = _useState14[0],\n      setCountry = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      surname = _useState16[0],\n      setSurname = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      cellphone = _useState18[0],\n      setCellphone = _useState18[1];\n\n  var _useState19 = useState(\"\"),\n      _useState20 = _slicedToArray(_useState19, 2),\n      phone = _useState20[0],\n      setPhone = _useState20[1];\n\n  var _useState21 = useState(\"\"),\n      _useState22 = _slicedToArray(_useState21, 2),\n      costCenter = _useState22[0],\n      setCostCenter = _useState22[1];\n\n  var _useState23 = useState(\"\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      roleId = _useState24[0],\n      setRoleId = _useState24[1];\n\n  var _useState25 = useState(\"\"),\n      _useState26 = _slicedToArray(_useState25, 2),\n      worktime = _useState26[0],\n      setWorktime = _useState26[1];\n\n  var _useState27 = useState(\"\"),\n      _useState28 = _slicedToArray(_useState27, 2),\n      passwordClass = _useState28[0],\n      setPasswordClass = _useState28[1];\n\n  var _useState29 = useState(false),\n      _useState30 = _slicedToArray(_useState29, 2),\n      redirect = _useState30[0],\n      setRedirect = _useState30[1];\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      disabled = _React$useState2[0],\n      setDisabled = _React$useState2[1]; // API VALUES\n\n\n  var _useState31 = useState([]),\n      _useState32 = _slicedToArray(_useState31, 2),\n      userUniqueiIds = _useState32[0],\n      setUserUniqueiIds = _useState32[1];\n\n  var _useState33 = useState([]),\n      _useState34 = _slicedToArray(_useState33, 2),\n      costCenters = _useState34[0],\n      setCostCenters = _useState34[1];\n\n  var _useState35 = useState({\n    value: \"\",\n    label: \"\"\n  }),\n      _useState36 = _slicedToArray(_useState35, 2),\n      costCenterValue = _useState36[0],\n      setCostCenterValue = _useState36[1];\n\n  var _useState37 = useState({\n    value: \"\",\n    label: \"\"\n  }),\n      _useState38 = _slicedToArray(_useState37, 2),\n      uniqueiIdsValue = _useState38[0],\n      setUniqueiIdsValue = _useState38[1];\n\n  useEffect(function () {\n    function fetchCostCentersData(cost_center) {\n      return fetch(\"/api/v1/cost_centers\").then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        var centers = json.data.map(function (center) {\n          if (cost_center == center.code) {\n            setCostCenterValue({\n              value: center.code,\n              label: center.fullname\n            });\n          }\n\n          return {\n            value: center.code,\n            label: center.fullname\n          };\n        });\n        setCostCenters(centers);\n      })[\"catch\"](function (error) {\n        return console.log(error);\n      });\n    }\n\n    function fetchUserUniqueIdsData(role_id) {\n      return fetch(\"/api/v1/user_unique_ids?keywords=tickets\").then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        var user_unique_ids = json.data.map(function (unique_id) {\n          if (role_id == unique_id.uniqueId) {\n            setUniqueiIdsValue({\n              value: unique_id.code,\n              label: unique_id.fullname\n            });\n          }\n\n          return {\n            value: unique_id.uniqueId,\n            label: unique_id.fullname\n          };\n        });\n        setUserUniqueiIds(user_unique_ids);\n      })[\"catch\"](function (error) {\n        return console.log(error);\n      });\n    }\n\n    function fetchData() {\n      var userId = props.match.params.id;\n      return fetch(\"/api/v1/users/\".concat(userId)).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        setFirstname(json.data.firstname);\n        setLastname(json.data.lastname);\n        setEmail(json.data.email);\n        setSurname(json.data.surname);\n        setCellphone(json.data.cellphone);\n        setPhone(json.data.phone);\n        setCostCenter(json.data.cost_center);\n        setRoleId(json.data.role_id);\n        setWorktime(json.data.worktime);\n        setRoleName(json.data.roles.map(function (role) {\n          return role.name;\n        }));\n        setCountry(json.data.countries.map(function (country) {\n          return country.iso;\n        }));\n        fetchCostCentersData(json.data.cost_center);\n        fetchUserUniqueIdsData(json.data.role_id);\n        setDisabled(json.data.disabled);\n      })[\"catch\"](function (error) {\n        return console.log(error);\n      });\n    }\n\n    fetchData();\n  }, []);\n\n  function handleClickShowPassword() {\n    setShowpassword(!showPassword);\n  }\n\n  ;\n\n  function handleMouseDownPassword(e) {\n    e.preventDefault();\n  }\n\n  ;\n\n  function handleSubmit(event, loading_function) {\n    event.preventDefault();\n    var body = new FormData();\n    body.set('firstname', firstname);\n    body.set('lastname', lastname);\n    body.set('email', email);\n    body.set('password', password);\n    body.set('roleName', roleName);\n    body.set('country', country);\n    body.set('surname', surname);\n    body.set('cellphone', cellphone);\n    body.set('phone', phone);\n    body.set('cost_center', costCenter);\n    body.set('role_id', roleId);\n    body.set('worktime', worktime);\n    body.set('disabled', disabled);\n    return axios.patch(\"/api/v1/users/\".concat(props.match.params.id), body, {\n      headers: props.headers\n    }).then(function (response) {\n      flash_alert(\"Actualizado!\", \"El usuario se ha actualizado correctamente\", \"success\");\n      setRedirect(true);\n    })[\"catch\"](function (e) {\n      loading_function(false);\n\n      if (e.response.data) {\n        for (var key in e.response.data) {\n          flash_alert(\"Error\", e.response.data[key], \"danger\");\n        }\n      }\n    });\n  }\n\n  var redirect_check = [];\n\n  if (redirect) {\n    redirect_check.push( /*#__PURE__*/React.createElement(Redirect, {\n      key: \"redirect-to-users\",\n      to: \"/users\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 4\n      }\n    }, /*#__PURE__*/React.createElement(Users, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 50\n      }\n    })));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 3\n    }\n  }, redirect_check, /*#__PURE__*/React.createElement(Paper, {\n    className: \"custom-paper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 5\n    }\n  }, \"Editar Usuario\"), /*#__PURE__*/React.createElement(UserForm, (_React$createElement = {\n    handleSubmit: handleSubmit,\n    setShowpassword: setShowpassword,\n    setFirstname: setFirstname,\n    setLastname: setLastname,\n    setPassword: setPassword,\n    setEmail: setEmail,\n    setRedirect: setRedirect,\n    handleClickShowPassword: handleClickShowPassword,\n    handleMouseDownPassword: handleMouseDownPassword,\n    firstname: firstname,\n    lastname: lastname,\n    email: email,\n    showPassword: showPassword,\n    password: password\n  }, _defineProperty(_React$createElement, \"showPassword\", showPassword), _defineProperty(_React$createElement, \"roleName\", roleName), _defineProperty(_React$createElement, \"setRoleName\", setRoleName), _defineProperty(_React$createElement, \"setRoleName\", setRoleName), _defineProperty(_React$createElement, \"surname\", surname), _defineProperty(_React$createElement, \"setSurname\", setSurname), _defineProperty(_React$createElement, \"cellphone\", cellphone), _defineProperty(_React$createElement, \"setCellphone\", setCellphone), _defineProperty(_React$createElement, \"phone\", phone), _defineProperty(_React$createElement, \"setPhone\", setPhone), _defineProperty(_React$createElement, \"costCenter\", costCenter), _defineProperty(_React$createElement, \"setCostCenter\", setCostCenter), _defineProperty(_React$createElement, \"roleId\", roleId), _defineProperty(_React$createElement, \"setRoleId\", setRoleId), _defineProperty(_React$createElement, \"worktime\", worktime), _defineProperty(_React$createElement, \"setWorktime\", setWorktime), _defineProperty(_React$createElement, \"country\", country), _defineProperty(_React$createElement, \"setCountry\", setCountry), _defineProperty(_React$createElement, \"passwordClass\", passwordClass), _defineProperty(_React$createElement, \"setPasswordClass\", setPasswordClass), _defineProperty(_React$createElement, \"disabled\", disabled), _defineProperty(_React$createElement, \"setDisabled\", setDisabled), _defineProperty(_React$createElement, \"userUniqueiIds\", userUniqueiIds), _defineProperty(_React$createElement, \"costCenters\", costCenters), _defineProperty(_React$createElement, \"costCenterValue\", costCenterValue), _defineProperty(_React$createElement, \"uniqueiIdsValue\", uniqueiIdsValue), _defineProperty(_React$createElement, \"setUserUniqueiIds\", setUserUniqueiIds), _defineProperty(_React$createElement, \"setCostCenters\", setCostCenters), _defineProperty(_React$createElement, \"setCostCenterValue\", setCostCenterValue), _defineProperty(_React$createElement, \"setUniqueiIdsValue\", setUniqueiIdsValue), _defineProperty(_React$createElement, \"__self\", this), _defineProperty(_React$createElement, \"__source\", {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 5\n  }), _React$createElement))));\n}\n\nvar structuredSelector = createStructuredSelector({\n  user: function user(state) {\n    return state.user;\n  }\n});\nvar mapDispatchToProps = {};\nexport default connect(structuredSelector, mapDispatchToProps)(EditUser);","map":{"version":3,"sources":["/usr/src/app/javascript/components/users/EditUser.jsx"],"names":["React","useState","useEffect","ReactDOM","PropTypes","axios","Redirect","connect","createStructuredSelector","flash_alert","Users","UserForm","Container","Paper","EditUser","props","showPassword","setShowpassword","firstname","setFirstname","lastname","setLastname","password","setPassword","email","setEmail","roleName","setRoleName","country","setCountry","surname","setSurname","cellphone","setCellphone","phone","setPhone","costCenter","setCostCenter","roleId","setRoleId","worktime","setWorktime","passwordClass","setPasswordClass","redirect","setRedirect","disabled","setDisabled","userUniqueiIds","setUserUniqueiIds","costCenters","setCostCenters","value","label","costCenterValue","setCostCenterValue","uniqueiIdsValue","setUniqueiIdsValue","fetchCostCentersData","cost_center","fetch","then","response","json","centers","data","map","center","code","fullname","error","console","log","fetchUserUniqueIdsData","role_id","user_unique_ids","unique_id","uniqueId","fetchData","userId","match","params","id","roles","role","name","countries","iso","handleClickShowPassword","handleMouseDownPassword","e","preventDefault","handleSubmit","event","loading_function","body","FormData","set","patch","headers","key","redirect_check","push","structuredSelector","user","state","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom'\nimport PropTypes from \"prop-types\"\nimport axios from 'axios';\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\"\nimport { createStructuredSelector } from \"reselect\"\nimport { flash_alert } from 'components/App';\nimport Users from \"components/users/Users\"\nimport UserForm from \"components/users/UserForm\"\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\nfunction EditUser(props) {\n\tconst [showPassword, setShowpassword] = useState(false);\n\tconst [firstname, setFirstname] = useState(\"\");\n\tconst [lastname, setLastname] = useState(\"\");\n\tconst [password, setPassword] = useState(\"\");\n\tconst [email, setEmail] = useState(\"\");\n\tconst [roleName, setRoleName] = useState([]);\n\tconst [country, setCountry] = useState([]);\n\tconst [surname, setSurname] = useState(\"\");\n\tconst [cellphone, setCellphone] = useState(\"\");\n\tconst [phone, setPhone] = useState(\"\");\n\tconst [costCenter, setCostCenter] = useState(\"\");\n\tconst [roleId, setRoleId] = useState(\"\");\n\tconst [worktime, setWorktime] = useState(\"\");\n\tconst [passwordClass, setPasswordClass] = useState(\"\");\n\tconst [redirect, setRedirect] = useState(false);\n\tconst [disabled, setDisabled] = React.useState(false);\n\n\t// API VALUES\n\n\tconst [userUniqueiIds, setUserUniqueiIds] = useState([]);\n\tconst [costCenters, setCostCenters] = useState([]);\n\tconst [costCenterValue, setCostCenterValue] = useState({value: \"\", label: \"\"});\n\tconst [uniqueiIdsValue, setUniqueiIdsValue] = useState({value: \"\", label: \"\"});\n\t\n\tuseEffect(() => {\n\t\tfunction fetchCostCentersData(cost_center) {\n\t\t\treturn fetch(`/api/v1/cost_centers`)\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(json => {\n\t\t\t\t\tvar centers = json.data.map(\n\t\t\t\t\t\tfunction(center) {\n\t\t\t\t\t\t\tif(cost_center == center.code){\n\t\t\t\t\t\t\t\tsetCostCenterValue({ value: center.code, label: center.fullname })\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn { value: center.code, label: center.fullname };\n\t\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tsetCostCenters(centers)\n\t\t\t\t})\n\t\t\t\t.catch(error => console.log(error));\n\t\t}\n\t\t\n\t\t function fetchUserUniqueIdsData(role_id) {\n\t\t\treturn fetch(`/api/v1/user_unique_ids?keywords=tickets`)\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(json => {\n\t\t\t\t\tvar user_unique_ids = json.data.map(\n\t\t\t\t\t\tfunction(unique_id) {\n\t\t\t\t\t\t\tif(role_id == unique_id.uniqueId){\n\t\t\t\t\t\t\t\tsetUniqueiIdsValue({ value: unique_id.code, label: unique_id.fullname })\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn { value: unique_id.uniqueId, label: unique_id.fullname };\n\t\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tsetUserUniqueiIds(user_unique_ids)\n\t\t\t\t})\n\t\t\t\t.catch(error => console.log(error));\n\t\t}\n\n\t\tfunction fetchData() {\n\t\t\tlet userId = props.match.params.id;\n\t\t\treturn fetch(`/api/v1/users/${userId}`)\n\t\t\t\t.then(response => response.json())\n\t\t\t\t.then(json => {\n\t\t\t\t\tsetFirstname(json.data.firstname);\n\t\t\t\t\tsetLastname(json.data.lastname);\n\t\t\t\t\tsetEmail(json.data.email);\n\t\t\t\t\tsetSurname(json.data.surname);\n\t\t\t\t\tsetCellphone(json.data.cellphone);\n\t\t\t\t\tsetPhone(json.data.phone);\n\t\t\t\t\tsetCostCenter(json.data.cost_center);\n\t\t\t\t\tsetRoleId(json.data.role_id);\n\t\t\t\t\tsetWorktime(json.data.worktime);\n\t\t\t\t\tsetRoleName(json.data.roles.map(role => role.name))\n\t\t\t\t\tsetCountry(json.data.countries.map(country => country.iso))\n\t\t\t\t\tfetchCostCentersData(json.data.cost_center);\n\t\t\t\t\tfetchUserUniqueIdsData(json.data.role_id);\n\t\t\t\t\tsetDisabled(json.data.disabled);\n\t\t\t\t})\n\t\t\t\t.catch(error => console.log(error));\n\t\t}\n\n\t\t\n\t\tfetchData();\n\t}, []);\n\n\tfunction handleClickShowPassword() {\n\t\tsetShowpassword(!showPassword);\n\t};\n\n\tfunction handleMouseDownPassword(e) {\n\t\te.preventDefault();\n\t};\n\n\tfunction handleSubmit(event, loading_function) {\n\t\tevent.preventDefault();\n\t\tvar body = new FormData();\n\t\tbody.set('firstname', firstname);\n\t\tbody.set('lastname', lastname);\n\t\tbody.set('email', email);\n\t\tbody.set('password', password);\n\t\tbody.set('roleName', roleName);\n\t\tbody.set('country', country);\n\t\tbody.set('surname', surname);\n\t\tbody.set('cellphone', cellphone);\n\t\tbody.set('phone', phone);\n\t\tbody.set('cost_center', costCenter);\n\t\tbody.set('role_id', roleId);\n\t\tbody.set('worktime', worktime);\n\t\tbody.set('disabled', disabled);\n\t\treturn axios.patch(`/api/v1/users/${props.match.params.id}`, body, { headers: props.headers })\n\t\t\t.then(response => {\n\t\t\t\tflash_alert(\"Actualizado!\", \"El usuario se ha actualizado correctamente\", \"success\")\n\t\t\t\tsetRedirect(true);\n\t\t\t})\n\t\t\t.catch(e => {\n\t\t\t\tloading_function(false);\n\t\t\t\tif (e.response.data) {\n\t\t\t\t\tfor (var key in e.response.data) {\n\t\t\t\t\t\tflash_alert(\"Error\", e.response.data[key], \"danger\")\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tlet redirect_check = []\n\tif (redirect) {\n\t\tredirect_check.push(\n\t\t\t<Redirect key=\"redirect-to-users\" to=\"/users\"><Users /></Redirect>\n\t\t);\n\t}\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{redirect_check}\n\t\t\t<Paper className=\"custom-paper\">\n\t\t\t\t<h1>Editar Usuario</h1>\n\t\t\t\t<UserForm\n\t\t\t\t\thandleSubmit={handleSubmit}\n\t\t\t\t\tsetShowpassword={setShowpassword}\n\t\t\t\t\tsetFirstname={setFirstname}\n\t\t\t\t\tsetLastname={setLastname}\n\t\t\t\t\tsetPassword={setPassword}\n\t\t\t\t\tsetEmail={setEmail}\n\t\t\t\t\tsetRedirect={setRedirect}\n\t\t\t\t\thandleClickShowPassword={handleClickShowPassword}\n\t\t\t\t\thandleMouseDownPassword={handleMouseDownPassword}\n\t\t\t\t\tfirstname={firstname}\n\t\t\t\t\tlastname={lastname}\n\t\t\t\t\temail={email}\n\t\t\t\t\tshowPassword={showPassword}\n\t\t\t\t\tpassword={password}\n\t\t\t\t\tshowPassword={showPassword}\n\t\t\t\t\troleName={roleName}\n\t\t\t\t\tsetRoleName={setRoleName}\n\t\t\t\t\tsetRoleName={setRoleName}\n\t\t\t\t\tsurname={surname}\n\t\t\t\t\tsetSurname={setSurname}\n\t\t\t\t\tcellphone={cellphone}\n\t\t\t\t\tsetCellphone={setCellphone}\n\t\t\t\t\tphone={phone}\n\t\t\t\t\tsetPhone={setPhone}\n\t\t\t\t\tcostCenter={costCenter}\n\t\t\t\t\tsetCostCenter={setCostCenter}\n\t\t\t\t\troleId={roleId}\n\t\t\t\t\tsetRoleId={setRoleId}\n\t\t\t\t\tworktime={worktime}\n\t\t\t\t\tsetWorktime={setWorktime}\n\t\t\t\t\tcountry={country}\n\t\t\t\t\tsetCountry={setCountry}\n\t\t\t\t\t  \n\t\t\t\t\tpasswordClass={passwordClass}\n\t\t\t\t\tsetPasswordClass={setPasswordClass}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tsetDisabled={setDisabled}\n\t\t\t\t\t// API values\n\t\t\t\t\tuserUniqueiIds={userUniqueiIds}\n\t\t\t\t\tcostCenters={costCenters}\n\t\t\t\t\tcostCenterValue={costCenterValue}\n\t\t\t\t\tuniqueiIdsValue={uniqueiIdsValue}\n\t\t\t\t\tsetUserUniqueiIds={setUserUniqueiIds}\n\t\t\t\t\tsetCostCenters={setCostCenters}\n\t\t\t\t\tsetCostCenterValue={setCostCenterValue}\n\t\t\t\t\tsetUniqueiIdsValue={setUniqueiIdsValue}\n\t\t\t\t/>\n\t\t\t</Paper>\n\t\t</React.Fragment>\n\t);\n}\n\n\nconst structuredSelector = createStructuredSelector({\n\tuser: state => state.user\n});\nconst mapDispatchToProps = {};\n\nexport default connect(structuredSelector, mapDispatchToProps)(EditUser)\n"]},"metadata":{},"sourceType":"module"}