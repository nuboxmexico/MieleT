{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/javascript/components/services/visits/NewVisit.jsx\",\n    _this = this;\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport axios from 'axios';\nimport * as CostCenterApi from 'api/cost_center';\nimport { Link } from 'react-router-dom';\nimport { Redirect } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport { flash_alert } from 'components/App';\nimport CustomerDetails from \"components/customers/CustomerDetails\";\nimport NewScheduleDialog from \"components/services/NewScheduleDialog\";\nimport PaymentEmailDialog from \"components/services/PaymentEmailDialog\";\nimport ServiceInfoForm from \"components/services/forms/ServiceInfoForm\";\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport { country_names_g, street_types_cl_g } from 'components/customers/CustomerForm';\nimport { csrf, headers, money_format, date_event_format, date_format_without_time, date_difference_in_hours, api_token, site_url } from \"constants/csrf\";\nimport pluralize from 'pluralize';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport TextField from '@material-ui/core/TextField';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport EditService from \"components/services/EditService\";\nimport { createStyles, makeStyles } from '@material-ui/core/styles'; // Button loading\n\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Radio from '@material-ui/core/Radio';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Button from '@material-ui/core/Button'; // Toggle buttons\n\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup'; // Dates\n\nimport DateFnsUtils from '@date-io/date-fns';\nimport esLocale from \"date-fns/locale/es\";\nimport { MuiPickersUtilsProvider, KeyboardTimePicker, KeyboardDatePicker } from '@material-ui/pickers'; // Dialog\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle'; // Image\n\nimport Image from 'material-ui-image'; // Payment Methods\n\nimport PaymentMethods from 'components/payments/PaymentMethods';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport DeleteSparePartDialog from \"components/services/DeleteSparePartDialog\";\nimport EditSparePartDialog from \"components/services/EditSparePartDialog\";\nimport { noPaymentsOptions } from \"constants/csrf\"; // Translation\n\nimport { useTranslation } from 'react-i18next';\nimport i18next from 'i18next';\nimport { serviceTypeLabels, serviceTypeSubcategories, requestedLabels } from 'constants/services';\nvar service_types_g = [\"Instalación\", \"Mantenimiento\", \"Reparación\", \"Home Program\", \"Reparaciones en Taller\", \"Entregas/Despachos\", \"Póliza de Mantenimiento\"];\nvar inst_options = [\"Profesional\", \"Doméstico\", \"Reinstalación\"];\nvar main_options = [\"Mantenimiento Regular\", \"Certificado de servicio doméstico\", \"Certificado de mantenimiento Profesional\", \"Certificado de mantenimiento Doméstico\"];\nvar repair_options = [\"Profesional\", \"Doméstico\", \"Garantía de reparación previa - Profesional\", \"Garantía de reparación previa - Doméstico\", \"Garantía de Manufactura\", \"Garantía de instalación - Profesional\", \"Garantía de instalación - Doméstico\", \"Cortesía - Cargo a ventas Profesional\", \"Cortesía - Cargo a ventas Doméstico\", \"Cortesía - Cargo a Servicio\"];\nvar mp_options = [\"No existen sub-categorías\"];\nvar repair_t_options = [\"Option 1\", \"Option 2\"];\nvar delivery_options = [\"No existen sub-categorías\"];\nvar policy_options = [\"No existen sub-categorías\"];\nvar requested_by = [\"Cliente directo\", \"Distribuidor autorizado\"];\nvar channels = [\"Teléfono\", \"App Clientes\", \"Web\", \"Redes sociales\", \"Correo\", \"Partners B2B\", \"eCommerce\"];\nvar product_columns = [{\n  name: i18next.t('globalTables.customerProductColumns.family'),\n  selector: 'product.taxons',\n  hide: 'md',\n  cell: function cell(row) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 7\n      }\n    }, row.product.taxons[0] == null ? \"-\" : row.product.taxons[0].name);\n  }\n}, {\n  name: i18next.t('globalTables.customerProductColumns.subFamily'),\n  selector: 'product.taxons',\n  hide: 'md',\n  cell: function cell(row) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 7\n      }\n    }, row.product.taxons[1] == null ? \"-\" : row.product.taxons[1].name);\n  }\n}, {\n  name: i18next.t('globalTables.customerProductColumns.id'),\n  selector: 'serial_id',\n  sortable: true\n}, {\n  name: i18next.t('globalTables.customerProductColumns.tnr'),\n  selector: 'product.tnr',\n  sortable: true,\n  cell: function cell(row) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 7\n      }\n    }, row.product.tnr == \"\" ? \"-\" : row.product.tnr);\n  }\n}, {\n  name: i18next.t('globalTables.customerProductColumns.name'),\n  selector: 'product.name',\n  sortable: true,\n  hide: 'md',\n  cell: function cell(row) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 7\n      }\n    }, row.product.name == \"\" ? \"-\" : row.product.name);\n  }\n}, {\n  name: i18next.t('globalTables.customerProductColumns.instalationDate'),\n  selector: 'instalation_date',\n  sortable: true,\n  hide: 'md',\n  cell: function cell(row) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 7\n      }\n    }, row.reinstalation_date == null ? row.instalation_date == null ? \"No\" : date_format_without_time(row.instalation_date) : date_format_without_time(row.reinstalation_date) + \" reinstalado\");\n  }\n}, {\n  name: i18next.t('globalTables.customerProductColumns.discontinuedRow.discontinued'),\n  selector: 'discontinued',\n  sortable: true,\n  hide: 'md',\n  cell: function cell(row) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 7\n      }\n    }, row.discontinued ? i18next.t('globalTables.customerProductColumns.discontinuedRow.yes') : i18next.t('globalTables.customerProductColumns.discontinuedRow.no'));\n  }\n}, {\n  name: i18next.t('globalTables.customerProductColumns.warrantyRow.warranty'),\n  selector: 'warranty',\n  sortable: true,\n  hide: 'md',\n  cell: function cell(row) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 7\n      }\n    }, row.warranty == null ? i18next.t('globalTables.customerProductColumns.warrantyRow.no') : i18next.t('globalTables.customerProductColumns.warrantyRow.valid') + date_format_without_time(row.warranty));\n  }\n}, {\n  name: i18next.t('globalTables.productsColumns.policy'),\n  selector: 'policy',\n  sortable: true,\n  hide: 'md'\n}, {\n  name: i18next.t('globalTables.productsColumns.status'),\n  selector: 'status',\n  sortable: true,\n  hide: 'md'\n}];\nvar consumable_columns = [{\n  name: i18next.t('globalTables.customerProductColumns.tnr'),\n  selector: 'consumable.product.tnr',\n  sortable: true\n}, {\n  name: i18next.t('globalTables.customerProductColumns.name'),\n  selector: 'consumable.name',\n  sortable: true,\n  hide: 'sm'\n}, {\n  name: i18next.t('globalTables.productsColumns.requiredQuantity'),\n  selector: 'total_boxes_without_events',\n  sortable: true\n}];\nvar GET_REQUESTED_SPARE_PARTS_REQUEST = \"GET_REQUESTED_SPARE_PARTS_REQUEST\";\nvar GET_REQUESTED_SPARE_PARTS_SUCCESS = \"GET_REQUESTED_SPARE_PARTS_SUCCESS\";\n\nfunction getRequestedSpareParts(service_id) {\n  return function (dispatch) {\n    dispatch({\n      type: GET_REQUESTED_SPARE_PARTS_REQUEST\n    });\n    return fetch(\"/api/v1/services/\".concat(service_id, \"/requested_spare_parts\")).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      return dispatch(getRequestedSparePartsSuccess(json));\n    })[\"catch\"](function (error) {\n      return console.log(error);\n    });\n  };\n}\n\n;\nexport function getRequestedSparePartsSuccess(json) {\n  return {\n    type: GET_REQUESTED_SPARE_PARTS_SUCCESS,\n    json: json\n  };\n}\n;\n\nfunction NewVisit(props) {\n  var _this2 = this;\n\n  var useStyles = makeStyles(function (theme) {\n    return createStyles({\n      previewChip: {\n        minWidth: 160,\n        maxWidth: 210\n      },\n      wrapper: {\n        margin: theme.spacing(1),\n        position: 'relative'\n      },\n      buttonProgress: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        marginTop: -12,\n        marginLeft: -12\n      }\n    });\n  });\n  var classes = useStyles();\n\n  var _useTranslation = useTranslation(),\n      t = _useTranslation.t;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      costCenters = _useState2[0],\n      setCostCenters = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      selectedCostCenterId = _useState4[0],\n      setSelectedCostCenterId = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      newVisit = _useState6[0],\n      setNewVisit = _useState6[1];\n\n  var _useState7 = useState([]),\n      _useState8 = _slicedToArray(_useState7, 2),\n      quotations = _useState8[0],\n      setQuotations = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      assignedQuotationId = _useState10[0],\n      setAssignedQuotationId = _useState10[1]; // Customer Info\n\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      customerNames = _useState12[0],\n      setCustomerFirstname = _useState12[1];\n\n  var _useState13 = useState(\"\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      customerLastname = _useState14[0],\n      setCustomerLastname = _useState14[1];\n\n  var _useState15 = useState(\"\"),\n      _useState16 = _slicedToArray(_useState15, 2),\n      customerSurname = _useState16[0],\n      setCustomerSurname = _useState16[1];\n\n  var _useState17 = useState(\"\"),\n      _useState18 = _slicedToArray(_useState17, 2),\n      customerEmail = _useState18[0],\n      setCustomerEmail = _useState18[1]; // Customer \n\n\n  var _useState19 = useState(\"\"),\n      _useState20 = _slicedToArray(_useState19, 2),\n      customer_id = _useState20[0],\n      setCustomerId = _useState20[1]; // Ship Address\n\n\n  var _useState21 = useState(\"\"),\n      _useState22 = _slicedToArray(_useState21, 2),\n      zipcode = _useState22[0],\n      setZipcode = _useState22[1];\n\n  var _useState23 = useState(\"\"),\n      _useState24 = _slicedToArray(_useState23, 2),\n      state = _useState24[0],\n      setState = _useState24[1];\n\n  var _useState25 = useState(\"\"),\n      _useState26 = _slicedToArray(_useState25, 2),\n      delegation = _useState26[0],\n      setDelegation = _useState26[1];\n\n  var _useState27 = useState(\"\"),\n      _useState28 = _slicedToArray(_useState27, 2),\n      colony = _useState28[0],\n      setColony = _useState28[1];\n\n  var _useState29 = useState(\"\"),\n      _useState30 = _slicedToArray(_useState29, 2),\n      street_type = _useState30[0],\n      setStreettype = _useState30[1];\n\n  var _useState31 = useState(\"\"),\n      _useState32 = _slicedToArray(_useState31, 2),\n      street_name = _useState32[0],\n      setStreetName = _useState32[1];\n\n  var _useState33 = useState(\"\"),\n      _useState34 = _slicedToArray(_useState33, 2),\n      ext_number = _useState34[0],\n      setExtNumber = _useState34[1];\n\n  var _useState35 = useState(\"\"),\n      _useState36 = _slicedToArray(_useState35, 2),\n      int_number = _useState36[0],\n      setIntNumber = _useState36[1];\n\n  var _useState37 = useState(\"\"),\n      _useState38 = _slicedToArray(_useState37, 2),\n      phone = _useState38[0],\n      setPhone = _useState38[1];\n\n  var _useState39 = useState(\"\"),\n      _useState40 = _slicedToArray(_useState39, 2),\n      reference = _useState40[0],\n      setReference = _useState40[1];\n\n  var _useState41 = useState(\"\"),\n      _useState42 = _slicedToArray(_useState41, 2),\n      selectedPerson = _useState42[0],\n      setSelectedPerson = _useState42[1];\n\n  var _useState43 = useState(\"MX\"),\n      _useState44 = _slicedToArray(_useState43, 2),\n      country = _useState44[0],\n      setCountry = _useState44[1];\n\n  var _useState45 = useState(0.16),\n      _useState46 = _slicedToArray(_useState45, 2),\n      countryIVA = _useState46[0],\n      setCountryIVA = _useState46[1];\n\n  var _useState47 = useState(\"\"),\n      _useState48 = _slicedToArray(_useState47, 2),\n      rut = _useState48[0],\n      setRut = _useState48[1];\n\n  var _useState49 = useState({}),\n      _useState50 = _slicedToArray(_useState49, 2),\n      administrative_demarcation = _useState50[0],\n      setAdministrativeDemarcation = _useState50[1]; // Bill Address\n\n\n  var _useState51 = useState(\"\"),\n      _useState52 = _slicedToArray(_useState51, 2),\n      zipcode_fn = _useState52[0],\n      setZipcodeFn = _useState52[1];\n\n  var _useState53 = useState(\"\"),\n      _useState54 = _slicedToArray(_useState53, 2),\n      state_fn = _useState54[0],\n      setStateFn = _useState54[1];\n\n  var _useState55 = useState(\"\"),\n      _useState56 = _slicedToArray(_useState55, 2),\n      delegation_fn = _useState56[0],\n      setDelegationFn = _useState56[1];\n\n  var _useState57 = useState(\"\"),\n      _useState58 = _slicedToArray(_useState57, 2),\n      colony_fn = _useState58[0],\n      setColonyFn = _useState58[1];\n\n  var _useState59 = useState(\"\"),\n      _useState60 = _slicedToArray(_useState59, 2),\n      street_type_fn = _useState60[0],\n      setStreettypeFn = _useState60[1];\n\n  var _useState61 = useState(\"\"),\n      _useState62 = _slicedToArray(_useState61, 2),\n      street_name_fn = _useState62[0],\n      setStreetNameFn = _useState62[1];\n\n  var _useState63 = useState(\"\"),\n      _useState64 = _slicedToArray(_useState63, 2),\n      ext_number_fn = _useState64[0],\n      setExtNumberFn = _useState64[1];\n\n  var _useState65 = useState(\"\"),\n      _useState66 = _slicedToArray(_useState65, 2),\n      int_number_fn = _useState66[0],\n      setIntNumberFn = _useState66[1];\n\n  var _useState67 = useState(\"\"),\n      _useState68 = _slicedToArray(_useState67, 2),\n      phone_fn = _useState68[0],\n      setPhoneFn = _useState68[1];\n\n  var _useState69 = useState({}),\n      _useState70 = _slicedToArray(_useState69, 2),\n      administrative_demarcation_fn = _useState70[0],\n      setAdministrativeDemarcationFn = _useState70[1]; // ADDITIONALS ADDRESS\n\n\n  var _useState71 = useState([]),\n      _useState72 = _slicedToArray(_useState71, 2),\n      additionalsAddresses = _useState72[0],\n      setAdditionalsAddresses = _useState72[1]; // CHECKS\n\n\n  var _useState73 = useState(\"\"),\n      _useState74 = _slicedToArray(_useState73, 2),\n      personCheck = _useState74[0],\n      setPersonCheck = _useState74[1];\n\n  var _useState75 = useState(\"hidden\"),\n      _useState76 = _slicedToArray(_useState75, 2),\n      RUTCheck = _useState76[0],\n      setRUTCheck = _useState76[1];\n\n  var _useState77 = useState(\"\"),\n      _useState78 = _slicedToArray(_useState77, 2),\n      zipcodeCheck = _useState78[0],\n      setZipcodeCheck = _useState78[1];\n\n  var _useState79 = useState(\"\"),\n      _useState80 = _slicedToArray(_useState79, 2),\n      delegationCheck = _useState80[0],\n      setDelegationCheck = _useState80[1];\n\n  var _useState81 = useState(\"Estado\"),\n      _useState82 = _slicedToArray(_useState81, 2),\n      stateLabel = _useState82[0],\n      setStateLabel = _useState82[1];\n\n  var _useState83 = useState(\"\"),\n      _useState84 = _slicedToArray(_useState83, 2),\n      colonyCheck = _useState84[0],\n      setColonyCheck = _useState84[1];\n\n  var _useState85 = useState(\"Número Exterior\"),\n      _useState86 = _slicedToArray(_useState85, 2),\n      extNumberLabel = _useState86[0],\n      setExtNumberLabel = _useState86[1];\n\n  var _useState87 = useState(\"Número Interior\"),\n      _useState88 = _slicedToArray(_useState87, 2),\n      intNumberLabel = _useState88[0],\n      setIntNumberLabel = _useState88[1];\n\n  var _useState89 = useState(false),\n      _useState90 = _slicedToArray(_useState89, 2),\n      country_change = _useState90[0],\n      setCountryChange = _useState90[1]; // Additional Info\n\n\n  var _useState91 = useState(false),\n      _useState92 = _slicedToArray(_useState91, 2),\n      redirect = _useState92[0],\n      setRedirect = _useState92[1];\n\n  var _useState93 = useState(false),\n      _useState94 = _slicedToArray(_useState93, 2),\n      firstLoad = _useState94[0],\n      setFirstLoad = _useState94[1];\n\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1]; // Service info\n\n\n  var _useState95 = useState(\"\"),\n      _useState96 = _slicedToArray(_useState95, 2),\n      serviceID = _useState96[0],\n      setServiceID = _useState96[1];\n\n  var _useState97 = useState(\"\"),\n      _useState98 = _slicedToArray(_useState97, 2),\n      service_type = _useState98[0],\n      setServiceType = _useState98[1];\n\n  var _useState99 = useState(\"\"),\n      _useState100 = _slicedToArray(_useState99, 2),\n      subcategory = _useState100[0],\n      setSubcategory = _useState100[1];\n\n  var _useState101 = useState(\"\"),\n      _useState102 = _slicedToArray(_useState101, 2),\n      requested = _useState102[0],\n      setRequested = _useState102[1];\n\n  var _useState103 = useState(\"\"),\n      _useState104 = _slicedToArray(_useState103, 2),\n      requestChannel = _useState104[0],\n      setRequestChannel = _useState104[1];\n\n  var _useState105 = useState([]),\n      _useState106 = _slicedToArray(_useState105, 2),\n      subcategory_options = _useState106[0],\n      setSubcategoryOptions = _useState106[1];\n\n  var _useState107 = useState(\"\"),\n      _useState108 = _slicedToArray(_useState107, 2),\n      serviceNumber = _useState108[0],\n      setServiceNumber = _useState108[1];\n\n  var _useState109 = useState(\"\"),\n      _useState110 = _slicedToArray(_useState109, 2),\n      serviceStatusLabel = _useState110[0],\n      setServiceStatusLabel = _useState110[1];\n\n  var _useState111 = useState(\"\"),\n      _useState112 = _slicedToArray(_useState111, 2),\n      ibs_number = _useState112[0],\n      setIBSNumber = _useState112[1];\n\n  var _useState113 = useState([]),\n      _useState114 = _slicedToArray(_useState113, 2),\n      paymentFiles = _useState114[0],\n      setPaymentFiles = _useState114[1]; //const [servicePriceData, setServicePriceData] = useState([]);\n\n\n  var _useState115 = useState(\"new\"),\n      _useState116 = _slicedToArray(_useState115, 2),\n      serviceStatus = _useState116[0],\n      setServiceStatus = _useState116[1];\n\n  var _useState117 = useState([]),\n      _useState118 = _slicedToArray(_useState117, 2),\n      serviceFiles = _useState118[0],\n      setServiceFiles = _useState118[1];\n\n  var _useState119 = useState(false),\n      _useState120 = _slicedToArray(_useState119, 2),\n      serviceUpdated = _useState120[0],\n      setServiceUpdated = _useState120[1];\n\n  var _useState121 = useState({\n    start: \"\",\n    end: \"\"\n  }),\n      _useState122 = _slicedToArray(_useState121, 2),\n      event = _useState122[0],\n      setEvent = _useState122[1];\n\n  var _useState123 = useState([]),\n      _useState124 = _slicedToArray(_useState123, 2),\n      technicians = _useState124[0],\n      setTechnicians = _useState124[1];\n\n  var _useState125 = useState([]),\n      _useState126 = _slicedToArray(_useState125, 2),\n      policies = _useState126[0],\n      setPolicies = _useState126[1];\n\n  var _useState127 = useState(\"\"),\n      _useState128 = _slicedToArray(_useState127, 2),\n      currentPolicy = _useState128[0],\n      setCurrentPolicy = _useState128[1];\n\n  var _useState129 = useState(\"\"),\n      _useState130 = _slicedToArray(_useState129, 2),\n      selectedPolicies = _useState130[0],\n      setSelectedPoliciesRows = _useState130[1];\n\n  var _useState131 = useState(\"\"),\n      _useState132 = _slicedToArray(_useState131, 2),\n      technicians_ids = _useState132[0],\n      setTechniciansIds = _useState132[1];\n\n  var _useState133 = useState(1),\n      _useState134 = _slicedToArray(_useState133, 2),\n      techinicianNumber = _useState134[0],\n      setTechinicianNumber = _useState134[1];\n\n  var _useState135 = useState(0),\n      _useState136 = _slicedToArray(_useState135, 2),\n      hourAmout = _useState136[0],\n      setHourAmout = _useState136[1];\n\n  var _useState137 = useState(0),\n      _useState138 = _slicedToArray(_useState137, 2),\n      viaticAmout = _useState138[0],\n      setViaticAmout = _useState138[1];\n\n  var _useState139 = useState(0),\n      _useState140 = _slicedToArray(_useState139, 2),\n      sparePartsAmount = _useState140[0],\n      setSparePartsAmount = _useState140[1];\n\n  var _useState141 = useState(0),\n      _useState142 = _slicedToArray(_useState141, 2),\n      feeAmount = _useState142[0],\n      setFeeAmount = _useState142[1];\n\n  var _useState143 = useState(0),\n      _useState144 = _slicedToArray(_useState143, 2),\n      feeAmountIncrement = _useState144[0],\n      setFeeAmountIncrement = _useState144[1];\n\n  var _useState145 = useState(0),\n      _useState146 = _slicedToArray(_useState145, 2),\n      consumableAmount = _useState146[0],\n      setConsumableAmount = _useState146[1];\n\n  var _useState147 = useState(0),\n      _useState148 = _slicedToArray(_useState147, 2),\n      laborAmount = _useState148[0],\n      setLaborAmount = _useState148[1];\n\n  var _useState149 = useState(\"\"),\n      _useState150 = _slicedToArray(_useState149, 2),\n      totalhours = _useState150[0],\n      setTotalhours = _useState150[1];\n\n  var _useState151 = useState(0),\n      _useState152 = _slicedToArray(_useState151, 2),\n      ivaAmount = _useState152[0],\n      setIVAAmount = _useState152[1];\n\n  var _useState153 = useState(0),\n      _useState154 = _slicedToArray(_useState153, 2),\n      subtotalAmount = _useState154[0],\n      setSubtotalAmount = _useState154[1];\n\n  var _useState155 = useState(0),\n      _useState156 = _slicedToArray(_useState155, 2),\n      totalAmount = _useState156[0],\n      setTotalAmount = _useState156[1];\n\n  var _useState157 = useState(false),\n      _useState158 = _slicedToArray(_useState157, 2),\n      noPaymentCheck = _useState158[0],\n      setNoPaymentCheck = _useState158[1];\n\n  var _useState159 = useState(\"\"),\n      _useState160 = _slicedToArray(_useState159, 2),\n      noPaymentOption = _useState160[0],\n      setNoPaymentOption = _useState160[1];\n\n  var _React$useState3 = React.useState(new Date()),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      selectedPaymentDate = _React$useState4[0],\n      setSelectedPaymentDate = _React$useState4[1];\n\n  var _useState161 = useState([]),\n      _useState162 = _slicedToArray(_useState161, 2),\n      paymentData = _useState162[0],\n      setPaymentData = _useState162[1];\n\n  var _useState163 = useState(\"\"),\n      _useState164 = _slicedToArray(_useState163, 2),\n      paymentLink = _useState164[0],\n      setPaymentLink = _useState164[1];\n\n  var _useState165 = useState(false),\n      _useState166 = _slicedToArray(_useState165, 2),\n      paymentLinkBoolean = _useState166[0],\n      setPaymentLinkBoolean = _useState166[1];\n\n  var _useState167 = useState(\"app_web\"),\n      _useState168 = _slicedToArray(_useState167, 2),\n      from = _useState168[0],\n      setFrom = _useState168[1];\n\n  var _useState169 = useState(''),\n      _useState170 = _slicedToArray(_useState169, 2),\n      principal_technician = _useState170[0],\n      setPrincipalTechnician = _useState170[1];\n\n  var _useState171 = useState([]),\n      _useState172 = _slicedToArray(_useState171, 2),\n      service_technicians = _useState172[0],\n      setServiceTechnicians = _useState172[1]; // Distributor\n\n\n  var _useState173 = useState(\"\"),\n      _useState174 = _slicedToArray(_useState173, 2),\n      distributorName = _useState174[0],\n      setDistributorName = _useState174[1];\n\n  var _useState175 = useState(\"\"),\n      _useState176 = _slicedToArray(_useState175, 2),\n      distributorEmail = _useState176[0],\n      setDistributorEmail = _useState176[1];\n\n  var _useState177 = useState(\"hidden\"),\n      _useState178 = _slicedToArray(_useState177, 2),\n      distributorCheck = _useState178[0],\n      setDistributorCheck = _useState178[1]; // Products\n\n\n  var _useState179 = useState([]),\n      _useState180 = _slicedToArray(_useState179, 2),\n      products = _useState180[0],\n      setProducts = _useState180[1];\n\n  var _useState181 = useState([]),\n      _useState182 = _slicedToArray(_useState181, 2),\n      selectedProductRows = _useState182[0],\n      setSelectedProductRows = _useState182[1];\n\n  var _useState183 = useState(\"\"),\n      _useState184 = _slicedToArray(_useState183, 2),\n      background = _useState184[0],\n      setBackground = _useState184[1];\n\n  var _useState185 = useState([]),\n      _useState186 = _slicedToArray(_useState185, 2),\n      files = _useState186[0],\n      setFiles = _useState186[1]; // Comsumable\n\n\n  var _useState187 = useState([]),\n      _useState188 = _slicedToArray(_useState187, 2),\n      consumables = _useState188[0],\n      setConsumables = _useState188[1];\n\n  var _useState189 = useState([]),\n      _useState190 = _slicedToArray(_useState189, 2),\n      selectedConsumables = _useState190[0],\n      setSelectedConsumables = _useState190[1];\n\n  var _useState191 = useState([]),\n      _useState192 = _slicedToArray(_useState191, 2),\n      selectedConsumablesRows = _useState192[0],\n      setSelectedConsumablesRows = _useState192[1]; // Form validation\n\n\n  var _useState193 = useState(\"\"),\n      _useState194 = _slicedToArray(_useState193, 2),\n      service_typeErrorMessage = _useState194[0],\n      setServiceTypeErrorMessage = _useState194[1];\n\n  var _useState195 = useState(\"\"),\n      _useState196 = _slicedToArray(_useState195, 2),\n      subcategoryErrorMessage = _useState196[0],\n      setSubcategoryErrorMessage = _useState196[1];\n\n  var _useState197 = useState(\"\"),\n      _useState198 = _slicedToArray(_useState197, 2),\n      requestedErrorMessage = _useState198[0],\n      setRequestedErrorMessage = _useState198[1];\n\n  var _useState199 = useState(\"\"),\n      _useState200 = _slicedToArray(_useState199, 2),\n      requestChannelErrorMessage = _useState200[0],\n      setRequestChannelErrorMessage = _useState200[1];\n\n  var _useState201 = useState(\"\"),\n      _useState202 = _slicedToArray(_useState201, 2),\n      backgroundErrorMessage = _useState202[0],\n      setBackgroundErrorMessage = _useState202[1];\n\n  var _useState203 = useState(\"\"),\n      _useState204 = _slicedToArray(_useState203, 2),\n      eventErrorMessage = _useState204[0],\n      setEventErrorMessage = _useState204[1];\n\n  var _useState205 = useState(\"\"),\n      _useState206 = _slicedToArray(_useState205, 2),\n      noPaymenErrorMessage = _useState206[0],\n      setNoPaymenErrorMessage = _useState206[1];\n\n  var _useState207 = useState(\"\"),\n      _useState208 = _slicedToArray(_useState207, 2),\n      selectedPaymentDateErrorMessage = _useState208[0],\n      setSelectedPaymentDateErrorMessage = _useState208[1]; // Dirección checks\n\n\n  var _React$useState5 = React.useState(\"principal\"),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      checked = _React$useState6[0],\n      setChecked = _React$useState6[1];\n\n  var handleToggle = function handleToggle(value) {\n    return function () {\n      setChecked(value);\n    };\n  };\n\n  var _React$useState7 = React.useState(\"principal\"),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      checkedFN = _React$useState8[0],\n      setCheckedFN = _React$useState8[1];\n\n  var handleToggleFN = function handleToggleFN(value) {\n    return function () {\n      setCheckedFN(value);\n    };\n  }; // Toggle butons\n\n\n  var _React$useState9 = React.useState('online'),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      paymentChannel = _React$useState10[0],\n      setPaymentChannel = _React$useState10[1];\n\n  var _React$useState11 = React.useState(\"no\"),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      invoiceCheck = _React$useState12[0],\n      setInvoiceCheck = _React$useState12[1]; // Change total Dialog\n\n\n  var _React$useState13 = React.useState(false),\n      _React$useState14 = _slicedToArray(_React$useState13, 2),\n      openTotalDialog = _React$useState14[0],\n      setOpenTotalDialog = _React$useState14[1]; ///////////////////////////////////////////////////////////////////////\n  // PaymentDialog\n\n\n  var _useState209 = useState(\"\"),\n      _useState210 = _slicedToArray(_useState209, 2),\n      paymentEmailAdditional = _useState210[0],\n      setPaymentEmailAdditional = _useState210[1];\n\n  var _useState211 = useState(false),\n      _useState212 = _slicedToArray(_useState211, 2),\n      isPaymentEmail = _useState212[0],\n      setIsPaymentEmail = _useState212[1];\n\n  var _React$useState15 = React.useState(false),\n      _React$useState16 = _slicedToArray(_React$useState15, 2),\n      paymentEmailDialog = _React$useState16[0],\n      setPaymentEmailDialog = _React$useState16[1];\n\n  var _useState213 = useState(true),\n      _useState214 = _slicedToArray(_useState213, 2),\n      toggledClearProductsRows = _useState214[0],\n      setoggledClearProductsRows = _useState214[1];\n\n  var _useState215 = useState(false),\n      _useState216 = _slicedToArray(_useState215, 2),\n      productTableDisabled = _useState216[0],\n      setProductTableDisabled = _useState216[1]; // VISIT\n\n\n  var _useState217 = useState({}),\n      _useState218 = _slicedToArray(_useState217, 2),\n      visit = _useState218[0],\n      setVisit = _useState218[1];\n\n  var _useState219 = useState(1),\n      _useState220 = _slicedToArray(_useState219, 2),\n      visit_number = _useState220[0],\n      setVisitNumber = _useState220[1];\n\n  var handleClickOpenTotalDialog = function handleClickOpenTotalDialog() {\n    setOpenTotalDialog(true);\n  };\n\n  function updateAssignQuotation(assignedId) {\n    var quotation = quotations.find(function (quotation) {\n      return quotation.id === assignedId;\n    });\n    setFeeAmount(0); // setHourAmout(0)\n    // setConsumableAmount(quotation?.spare_parts_amount || consumableAmount)\n\n    setSparePartsAmount(quotation === null || quotation === void 0 ? void 0 : quotation.spare_parts_amount);\n    setLaborAmount(quotation.labor_amount);\n    setViaticAmout(quotation.viatic_amount);\n    setFeeAmount(0);\n  }\n\n  useEffect(function () {\n    if (!assignedQuotationId) return;\n    if (noPaymentOption != 'Pagado en cotización') return;\n    fetchServiceTotal(country, selectedProductRows.map(function (product) {\n      return product.id;\n    }), zipcode, administrative_demarcation.admin_name_3, true);\n  }, [assignedQuotationId, paymentChannel]);\n  useEffect(function () {\n    if (noPaymentCheck) return;\n    setAssignedQuotationId(0);\n    fetchServiceTotal(country, selectedProductRows.map(function (product) {\n      return product.id;\n    }), zipcode, administrative_demarcation.admin_name_3, true);\n  }, [noPaymentCheck, noPaymentOption]);\n\n  function handleAssignedQuotation(event) {\n    setAssignedQuotationId(event.target.value);\n    updateAssignQuotation(event.target.value);\n    console.log({\n      currentValue: event.target.value\n    });\n  }\n\n  var handleCloseTotalDialog = function handleCloseTotalDialog() {\n    setOpenTotalDialog(false);\n  };\n\n  var spare_part_columns = [{\n    name: i18next.t('globalTables.customerProductColumns.tnr'),\n    selector: 'spare_part.tnr',\n    sortable: true,\n    hide: 'sm'\n  }, {\n    name: i18next.t('globalTables.customerProductColumns.name'),\n    selector: 'spare_part.name',\n    sortable: true,\n    hide: 'md'\n  }, {\n    name: i18next.t('globalTables.sparePartColumnsNoActions.quantity'),\n    selector: 'quantity',\n    sortable: true,\n    hide: 'md'\n  }, {\n    name: i18next.t('globalTables.sparePartColumns.actions'),\n    selector: 'id',\n    grow: true,\n    minWidth: \"190px\",\n    cell: function cell(row) {\n      return /*#__PURE__*/React.createElement(\"span\", {\n        __self: _this2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(EditSparePartDialog, {\n        key: \"EditSparePartDialog\" + row.id,\n        service_id: row.service_id,\n        service_spare_part_id: row.id,\n        tnr: row.spare_part.tnr,\n        name: row.spare_part.name,\n        quantity: row.quantity,\n        requested_quantity: row.requested_quantity,\n        from: \"prediagnosis\",\n        headers: headers,\n        callbacks: serviceCallbacks,\n        __self: _this2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(DeleteSparePartDialog, {\n        key: \"DeleteSparePartDialog\" + row.id,\n        service_id: row.service_id,\n        service_spare_part_id: row.id,\n        tnr: row.spare_part.tnr,\n        name: row.spare_part.name,\n        from: \"prediagnosis\",\n        headers: headers,\n        callbacks: serviceCallbacks,\n        __self: _this2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 470,\n          columnNumber: 11\n        }\n      }));\n    }\n  }]; ///////////////////////////////////////////////////////////////////////\n  // Efects\n  //////////////////////////////////////////////////////////////////////\n\n  useEffect(function () {\n    fetchData();\n    fetchServiceData();\n  }, []);\n\n  function fetchData() {\n    return _fetchData.apply(this, arguments);\n  }\n\n  function _fetchData() {\n    _fetchData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var userId, costCentersFetch;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              userId = props.match.params.id;\n              _context.next = 3;\n              return CostCenterApi.getAllCostCenters();\n\n            case 3:\n              costCentersFetch = _context.sent;\n              setCostCenters(costCentersFetch.data);\n              return _context.abrupt(\"return\", fetch(\"/api/v1/customers/\".concat(userId)).then(function (response) {\n                return response.json();\n              }).then(function (json) {\n                console.log(json);\n                setCustomerId(json.data.id);\n                setCustomerFirstname(json.data.names);\n                setCustomerLastname(json.data.lastname);\n                setCustomerSurname(json.data.surname);\n                setCustomerEmail(json.data.email);\n                setZipcode(json.data.zipcode);\n                setState(json.data.state);\n                setDelegation(json.data.delegation);\n                setColony(json.data.colony);\n                setStreettype(json.data.street_type);\n                setStreetName(json.data.street_name);\n                setExtNumber(json.data.ext_number);\n                setIntNumber(json.data.int_number);\n                setPhone(json.data.phone);\n                setReference(json.data.reference);\n                setSelectedPerson(json.data.person_type);\n                setZipcodeFn(json.data.zipcode_fn);\n                setStateFn(json.data.state_fn);\n                setDelegationFn(json.data.delegation_fn);\n                setColonyFn(json.data.colony_fn);\n                setStreettypeFn(json.data.street_type_fn);\n                setStreetNameFn(json.data.street_name_fn);\n                setExtNumberFn(json.data.ext_number_fn);\n                setIntNumberFn(json.data.int_number_fn);\n                setPhoneFn(json.data.phone_fn);\n\n                if (json.data.country != null) {\n                  setCountry(json.data.country.iso);\n                  setCountryChange(true);\n                  setCountryIVA(json.data.country.iva);\n                }\n\n                setAdministrativeDemarcation(json.data.administrative_demarcation);\n                setAdministrativeDemarcationFn(json.data.administrative_demarcation_fn);\n                setRut(json.data.rut);\n\n                if (json.data.additional_addresses != null) {\n                  setAdditionalsAddresses(json.data.additional_addresses);\n                }\n\n                setPolicies(json.data.policies); // HANDLRE COUNTRY INFO\n\n                // HANDLRE COUNTRY INFO\n                handleCountryInputs(json.data.country.iso);\n              }));\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _fetchData.apply(this, arguments);\n  }\n\n  function fetchServiceData() {\n    return _fetchServiceData.apply(this, arguments);\n  }\n\n  function _fetchServiceData() {\n    _fetchServiceData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var service_id;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              service_id = props.match.params.service_id;\n              return _context2.abrupt(\"return\", fetch(\"/api/v1/services/\".concat(service_id)).then(function (response) {\n                return response.json();\n              }).then(function (json) {\n                // Handle service data\n                setTotalAmount(json.total_amount);\n                setFirstLoad(true);\n\n                if (json.service_type) {\n                  setServiceType(json.service_type);\n                  handleServiceTypeChange(json.service_type);\n                }\n\n                if (json.subcategory) {\n                  setSubcategory(json.subcategory);\n                }\n\n                setServiceID(json.id);\n                setServiceNumber(json.number);\n                setServiceStatusLabel(json.status_label);\n                setRequested(json.requested);\n                setRequestChannel(json.request_channel);\n                setTechinicianNumber(json.technicians_number);\n                setHourAmout(json.hour_amount);\n                setFeeAmount(json.fee_amount);\n                setTotalhours(json.total_hours);\n                setSelectedCostCenterId(json.cost_center_id);\n                setDistributorName(json.distributor_name);\n                setDistributorEmail(json.distributor_email);\n                setQuotations(json.quotations);\n                setAssignedQuotationId(json.new_visit.assigned_quotation_id);\n                console.log({\n                  assigned_quotation_id: json.new_visit.assigned_quotation_id\n                });\n\n                if (json.requested) {\n                  setDistributorCheck(json.requested != \"Cliente directo\" ? \"\" : \"hidden\");\n                }\n\n                setSelectedProductRows(json.customer_products.filter(function (customer_product) {\n                  return customer_product.status != \"Servicio completado\";\n                }));\n                setBackground(json.background);\n                setNoPaymentCheck(json.no_payment);\n                setPaymentChannel(json.payment_channel);\n                setSelectedPaymentDate(json.payment_date);\n                setNoPaymentOption(json.no_payment_reason);\n                setInvoiceCheck(json.invoice ? \"si\" : \"No\");\n                setProducts(json.customer_products);\n                setServiceFiles(json.file_resources);\n                setPaymentFiles(json.payment_resources);\n                setPrincipalTechnician(json.principal_technician);\n                setIBSNumber(json.ibs_number);\n\n                if (json.calendar_events.length > 0) {\n                  setTechnicians(json.technicians); //setEvent({start: json.calendar_events[0].start_date, end: json.calendar_events[0].finish_date})\n\n                  //setEvent({start: json.calendar_events[0].start_date, end: json.calendar_events[0].finish_date})\n                  setServiceTechnicians(json.service_technicians);\n                }\n\n                setSelectedConsumables(json.service_products);\n                setConsumableAmount(json.service_products.map(function (item) {\n                  return item.amount;\n                }).reduce(function (prev, curr) {\n                  return prev + curr;\n                }, 0));\n                setSelectedConsumablesRows(json.service_products.map(function (consumable_row) {\n                  return {\n                    amount: String(consumable_row.amount),\n                    total_boxes: String(consumable_row.quantity),\n                    product_id: String(consumable_row.product_id)\n                  };\n                }));\n                setVisit(json.new_visit);\n                setTotalAmount(json.new_visit.total_amount);\n                setHourAmout(json.new_visit.hour_amount);\n                setFeeAmount(json.new_visit.fee_amount);\n                fetchVisitPayments(json.new_visit ? json.new_visit.id : json.id, \"Visita\");\n\n                if (json.visits.length > 0) {\n                  setVisitNumber(json.visits.length + 1);\n                }\n\n                if (json.policy_id) {\n                  setSelectedPoliciesRows(json.policy_id);\n                  setCurrentPolicy(policies.find(function (policy) {\n                    return policy.id === json.policy_id;\n                  }));\n                } else {\n                  setSelectedPoliciesRows(policies[0].id);\n                  setCurrentPolicy(policies[0]);\n                }\n              }));\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n    return _fetchServiceData.apply(this, arguments);\n  }\n\n  useEffect(function () {\n    if (noPaymentOption == 'Pagado en cotización') return;\n\n    if (selectedProductRows) {\n      fetchServiceTotal(country, selectedProductRows.map(function (product) {\n        return product.id;\n      }), zipcode, administrative_demarcation.admin_name_3, true);\n    }\n\n    fetchPolicyTotal(currentPolicy);\n  }, [service_type, selectedConsumablesRows, paymentChannel]);\n  useEffect(function () {\n    if (!serviceUpdated && service_type == 'Mantenimiento') {\n      setConsumableAmount(consumables.map(function (item) {\n        return item.sub_total_consumable_amount_without_events;\n      }).reduce(function (prev, curr) {\n        return prev + curr;\n      }, 0));\n      setSelectedConsumablesRows(consumables.map(function (consumable_row) {\n        return {\n          amount: consumable_row.sub_total_consumable_amount_without_events,\n          total_boxes: consumable_row.total_boxes_without_events,\n          product_id: consumable_row.consumable.product_id\n        };\n      }));\n    } else {\n      setConsumableAmount(0);\n    }\n  }, [consumables]);\n  useEffect(function () {\n    setPaymentLink(\"\".concat(site_url(process.env.RAILS_ENV), \"/payments?object_id=\").concat(visit ? visit.id : serviceID, \"&object_class=Visita&customer_id=\").concat(customer_id, \"&amount=\").concat(totalAmount));\n    props.getRequestedSpareParts(serviceID);\n  }, [serviceID]);\n  useEffect(function () {\n    if (isPaymentEmail) {\n      setPaymentEmailDialog(false);\n\n      if (!loading) {\n        setLoading(true);\n      }\n\n      saveService();\n    }\n  }, [isPaymentEmail]);\n  useEffect(function () {\n    if (!!assignedQuotationId) return;\n\n    if (event.start != \"\") {\n      fetchServiceTotal(country, selectedProductRows.map(function (product) {\n        return product.id;\n      }), zipcode, administrative_demarcation.admin_name_3, true, null, event);\n    }\n  }, [event]);\n  useEffect(function () {\n    fetchPolicyTotal(currentPolicy);\n  }, [currentPolicy]);\n  useEffect(function () {}, [visit]);\n  useEffect(function () {\n    if (selectedPolicies) {\n      setPolicies(policies.filter(function (policy) {\n        return policy.id == selectedPolicies;\n      }));\n    }\n  }, [selectedPolicies]);\n\n  function serviceCallbacks() {\n    fetchData();\n    fetchServiceData();\n  } //////////////////////////////////////////////////////////////////\n  /// Functions\n\n\n  function fetchPolicyTotal(policy_new) {\n    if (service_type == 'Póliza de Mantenimiento') {\n      if (policy_new) {\n        setSelectedProductRows(policy_new.policy_customer_products.map(function (policy_customer_product) {\n          return policy_customer_product.customer_product;\n        }));\n        fetchServiceTotal(country, policy_new.policy_customer_products.map(function (policy_customer_product) {\n          return policy_customer_product.customer_product.id;\n        }), zipcode, administrative_demarcation.admin_name_3, true, true);\n        setHourAmout(0);\n        setFeeAmount(policy_new.viatic_price);\n        setConsumableAmount(policy_new.items_price);\n        setLaborAmount(policy_new.labor_price);\n        setSubtotalAmount(policy_new.total_price);\n        setIVAAmount(policy_new.total_price * countryIVA);\n        setTotalAmount(policy_new.total_price * (countryIVA + 1));\n      }\n    }\n  }\n\n  function fetchServiceTotal(country_code, products_ids, zipcode_t, administrative_demarcation_name_t) {\n    var from_consumables = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    var from_policy = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n    var event_local = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : null;\n    console.log(\"Calculo el total\");\n    console.log(event_local);\n\n    if (event_local) {\n      var time_diff = date_difference_in_hours(event.start, event.end);\n      console.log(time_diff);\n    }\n\n    if (products_ids.length > 0) {\n      var params = {\n        country: \"\".concat(country_code),\n        products_ids: \"\".concat(products_ids),\n        service_type: \"\".concat(service_type),\n        subcategory: \"\".concat(subcategory),\n        zipcode: \"\".concat(zipcode_t),\n        administrative_demarcation_name: \"\".concat(administrative_demarcation_name_t),\n        viatic_value: viaticAmout,\n        fee_amount: feeAmount,\n        labor_price: laborAmount,\n        quotation_id: assignedQuotationId\n      };\n\n      if (event_local) {\n        params.time_diff = time_diff;\n      }\n\n      return axios.get(\"/api/v1/services/\".concat(serviceID, \"/total_price\"), {\n        params: params\n      }).then(function (_ref) {\n        var json = _ref.data;\n\n        if (json.data) {\n          setTechinicianNumber(json.data.total_technicians);\n          setTotalhours(json.data.total_hours);\n\n          if (!from_policy) {\n            setViaticAmout(json.data.viatic_value);\n            setHourAmout(json.data.hour_amount);\n            setFeeAmount(json.data.fee_amount); // setSparePartsAmount(json.data.spare_parts_amount)\n\n            setLaborAmount(json.data.labor_price);\n\n            if (service_type == 'Home Program' || service_type == 'Reparación' && subcategory == \"Profesional\") {\n              setFeeAmountIncrement(json.data.fee_amount_increment);\n\n              if (time_diff && time_diff > 0) {\n                setTotalhours(time_diff);\n              }\n            }\n          }\n\n          if (!firstLoad) {\n            if (service_type == 'Póliza de Mantenimiento') {//setSubtotalAmount(json.data.total_amount + consumableAmount)\n              //setIVAAmount((json.data.total_amount + consumableAmount) * json.data.iva )\n              //setTotalAmount((json.data.total_amount + consumableAmount) * (1+ json.data.iva))\n            } else {\n              setSubtotalAmount(json.data.subtotal_amount + consumableAmount);\n              setIVAAmount((json.data.subtotal_amount + consumableAmount) * countryIVA);\n              setTotalAmount(json.data.total_amount + consumableAmount);\n            }\n          } else {\n            if (!from_policy) {\n              setIVAAmount(json.data.iva_amount);\n              setSubtotalAmount(json.data.subtotal_amount);\n\n              if (totalAmount != 0) {\n                setTotalAmount(json.data.total_amount);\n              }\n            }\n          }\n\n          setFirstLoad(false);\n\n          if (!from_consumables) {\n            setConsumables(json.consumables.data.items);\n          }\n        } else {\n          console.log(\"No hay precio.\");\n        }\n      })[\"catch\"](function (error) {\n        return console.log(error);\n      });\n    }\n  }\n\n  function fetchVisitPayments(object_id, object_class) {\n    return fetch(\"/api/v1/payments?object_id=\".concat(object_id, \"&object_class=\").concat(object_class)).then(function (response) {\n      return response.json();\n    }).then(function (json) {\n      if (json.data) {\n        if (json.data.length > 0 && json.data[0].status == \"completed\") {\n          setServiceStatus(\"created\");\n        }\n\n        setPaymentData(json.data);\n      } else {\n        console.log(\"No hay precio.\");\n      }\n    })[\"catch\"](function (error) {\n      return console.log(error);\n    });\n  }\n\n  function validateForm() {\n    var messages = [];\n\n    if (selectedProductRows.length == 0) {\n      messages.push(t('customer.newService.flashAlert.selectedProductRows'));\n    }\n\n    if (service_type == \"\" || service_type == null) {\n      messages.push(\"Debe seleccionar el tipo de servicio a solicitar\");\n      setServiceTypeErrorMessage(t('customer.newService.flashAlert.serviceType'));\n    }\n\n    if (subcategory == \"\" || subcategory == null) {\n      messages.push(\"Debe seleccionar la subcategoria de servicio a solicitar\");\n      setSubcategoryErrorMessage(t('customer.newService.flashAlert.subCategory'));\n    }\n\n    if (requested == \"\" || requested == null) {\n      messages.push(\"Debe indicar como fue solicitado el servicio\");\n      setRequestedErrorMessage(t('customer.newService.flashAlert.requested'));\n    }\n\n    if (requestChannel == \"\" || requestChannel == null) {\n      messages.push(\"Debe indicar el canal de la solicitud\");\n      setRequestChannelErrorMessage(t('customer.newService.flashAlert.requestChannel'));\n    }\n\n    if ((background == \"\" || background == null) && service_type != 'Póliza de Mantenimiento') {\n      messages.push(t('customer.newService.flashAlert.indicateProblem'));\n      setBackgroundErrorMessage(\"Debe indicar antecedentes del problema\");\n    }\n\n    if (event.start == \"\" || event.start == null) {\n      messages.push(t('customer.newService.flashAlert.startDate'));\n      setEventErrorMessage(\"Debe seleccionar una fecha\");\n    }\n\n    if (noPaymentCheck) {\n      if (noPaymentOption == \"\" || noPaymentOption == null) {\n        messages.push(t('customer.newService.flashAlert.noPaymentOption'));\n        setNoPaymenErrorMessage(\"Debe seleccionar una opcción de no pago\");\n      }\n    } else {\n      if (selectedPaymentDate == \"\" || selectedPaymentDate == null) {\n        messages.push(t('customer.newService.flashAlert.selectedPaymentDate'));\n        setSelectedPaymentDateErrorMessage(\"Debe seleccionar fecha limite de pago\");\n      }\n    }\n\n    if (service_type == 'Póliza de Mantenimiento' && selectedPolicies == \"\") {\n      messages.push(t('customer.newService.flashAlert.selectedPolicies'));\n    }\n\n    messages.forEach(function (element) {\n      flash_alert(t('customer.newService.flashAlert.attention'), element, \"warning\");\n    });\n\n    if (messages.length > 0) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  function saveService() {\n    var redirect_param = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    var schedule_visit = arguments.length > 1 ? arguments[1] : undefined;\n    var body = new FormData();\n    body.set('service_id', serviceID);\n    body.set('customer_id', customer_id);\n\n    if (visit) {\n      body.set('visit_id', visit.id);\n    }\n\n    body.set('address', checked);\n\n    if (redirect_param && noPaymentOption == 'Pagado en cotización') {\n      body.set('assigned_quotation_id', assignedQuotationId);\n    }\n\n    body.set('spare_parts_amount', sparePartsAmount);\n    body.set('address_fn', checkedFN);\n    body.set('service_type', service_type);\n    body.set('subcategory', subcategory);\n    body.set('requested', requested);\n    body.set('request_channel', requestChannel);\n    body.set('distributor_name', distributorName);\n    body.set('distributor_email', distributorEmail);\n    body.set('customer_products_id', selectedProductRows.map(function (product_row) {\n      return product_row.id;\n    })); // Service Totals\n\n    body.set('technicians_number', techinicianNumber);\n    body.set('hour_amount', hourAmout);\n    body.set('fee_amount', feeAmount);\n    body.set('labor_amount', laborAmount);\n    body.set('viatic_amount', viaticAmout);\n    body.set('subtotal_amount', subtotalAmount);\n    body.set('iva_amount', ivaAmount);\n    body.set('total_hours', totalhours);\n    body.set('total_amount', totalAmount);\n    body.set('background', background);\n    body.set('no_payment', noPaymentCheck);\n    body.set('payment_channel', paymentChannel);\n    body.set('payment_date', selectedPaymentDate);\n    body.set('no_payment_reason', noPaymentOption);\n    body.set('invoice', invoiceCheck === \"si\" ? true : false);\n    body.set('status', schedule_visit ? schedule_visit : serviceStatus);\n    body.set('event_start', event.start);\n    body.set('event_end', event.end);\n    body.set('technicians_ids', technicians_ids);\n    body.set('payment_state', paymentData.length > 0 && paymentData[0].status == \"completed\" ? \"paid\" : \"pending\");\n    body.set('customerEmail', customerEmail);\n    body.set('paymentEmailAdditional', paymentEmailAdditional);\n    body.set('isPaymentEmail', isPaymentEmail);\n    body.set('from', from);\n\n    if (service_type == 'Póliza de Mantenimiento') {\n      body.set('policy_id', selectedPolicies);\n    }\n\n    files.forEach(function (file) {\n      body.append('images[]', JSON.stringify(file));\n    });\n\n    if (consumables) {\n      body.append('consumables[]', \"{}\");\n    }\n\n    selectedConsumablesRows.forEach(function (consumable) {\n      body.append('consumables[]', JSON.stringify(consumable));\n    });\n    return axios.post(\"/api/v1/services/\".concat(serviceID, \"/visits\"), body, {\n      headers: headers\n    }).then(function (response) {\n      if (redirect_param) {\n        flash_alert(t('customer.showCustomer.flashAlert.success'), t('customer.showCustomer.flashAlert.updateService'), \"success\");\n      }\n\n      setRedirect(redirect_param);\n    })[\"catch\"](function (e) {\n      if (e.response.data) {\n        console.log(e.response);\n        setLoading(false);\n\n        for (var key in e.response.data) {\n          flash_alert(\"Error\", e.response.data[key], \"danger\");\n        }\n      }\n    });\n  } //////////////////////////////////////////////////////////////////\n  /// Handles\n\n\n  var handlepaymentChannel = function handlepaymentChannel(event, newpaymentChannel) {\n    if (newpaymentChannel == \"online\" || newpaymentChannel == \"transfer\") {\n      setServiceStatus(\"created\");\n    }\n\n    setPaymentChannel(newpaymentChannel);\n  };\n\n  var handleInvoiceCheckChange = function handleInvoiceCheckChange(event) {\n    setInvoiceCheck(event.target.value);\n  };\n\n  var handlePaymentDateChange = function handlePaymentDateChange(date) {\n    setSelectedPaymentDate(date);\n  };\n\n  function handleCountryInputs(country_iso) {\n    if (country_iso == \"CL\") {\n      setPersonCheck(\"hidden\");\n      setZipcodeCheck(\"hidden\");\n      setDelegationCheck(\"hidden\");\n      setColonyCheck(\"hidden\");\n      setStateLabel(\"Comuna/Región\");\n      setExtNumberLabel(\"Número\");\n      setIntNumberLabel(\"Depto\");\n      setRUTCheck(\"\");\n    } else {\n      setPersonCheck(\"\");\n      setRUTCheck(\"hidden\");\n      setZipcodeCheck(\"\");\n      setDelegationCheck(\"\");\n      setColonyCheck(\"\");\n      setStateLabel(\"Estado\");\n      setExtNumberLabel(\"Número Exterior\");\n      setIntNumberLabel(\"Número Interior\");\n    }\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    if (!validateForm()) {\n      setLoading(false);\n      return false;\n    }\n\n    if (paymentChannel == \"online\" || paymentChannel == \"transfer\") {\n      setPaymentEmailDialog(true);\n    } else {\n      if (!loading) {\n        setLoading(true);\n      }\n\n      saveService();\n    }\n  }\n\n  function handleServiceTypeChange(e) {\n    setServiceType(e);\n    var serviceTypes = serviceTypeLabels(i18next.language);\n    console.log({\n      serviceTypes: serviceTypes\n    });\n    var serviceTypeKey = Object.keys(serviceTypes).find(function (serviceTypeLabel) {\n      return serviceTypes[serviceTypeLabel].key === e;\n    });\n    setSubcategory('');\n    var subcategories = serviceTypeSubcategories(i18next.language);\n    setSubcategoryOptions(subcategories[serviceTypeKey]);\n\n    if (e === 'Reparaciones en Taller') {\n      if (selectedProductRows.length > 0) {\n        setoggledClearProductsRows(false);\n      } else {\n        setoggledClearProductsRows(true);\n      }\n\n      setProductTableDisabled(false);\n    } else {\n      setoggledClearProductsRows(true);\n      setProductTableDisabled(false);\n    }\n  }\n\n  function handleRequestedChange(e) {\n    var _requestedLabels$find;\n\n    setRequested(e.target.value);\n    var requestedDistributor = ((_requestedLabels$find = requestedLabels(i18next.language).find(function (requested) {\n      return requested.key === 'Distribuidor autorizado';\n    })) === null || _requestedLabels$find === void 0 ? void 0 : _requestedLabels$find.key) || null;\n\n    if (e.target.value === requestedDistributor) {\n      setDistributorCheck('');\n    } else {\n      setDistributorCheck('hidden');\n    }\n  }\n\n  function onServiceChangeFiles(_x) {\n    return _onServiceChangeFiles.apply(this, arguments);\n  }\n\n  function _onServiceChangeFiles() {\n    _onServiceChangeFiles = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(e) {\n      var dT;\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (e.length > 0) {\n                dT = [];\n                e.forEach( /*#__PURE__*/function () {\n                  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(item) {\n                    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n                      while (1) {\n                        switch (_context3.prev = _context3.next) {\n                          case 0:\n                            _context3.next = 2;\n                            return getBase64(item).then(function (encFile) {\n                              dT.push(encFile);\n                              setFiles(dT);\n                            })[\"catch\"](function (error) {\n                              return console.log(\"error\");\n                            });\n\n                          case 2:\n                          case \"end\":\n                            return _context3.stop();\n                        }\n                      }\n                    }, _callee3);\n                  }));\n\n                  return function (_x2) {\n                    return _ref2.apply(this, arguments);\n                  };\n                }());\n              }\n\n            case 1:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n    return _onServiceChangeFiles.apply(this, arguments);\n  }\n\n  ;\n\n  function handleProductRowChange(state) {\n    // setoggledClearProductsRows\n    setoggledClearProductsRows(true);\n    setSelectedProductRows(state.selectedRows);\n    fetchServiceTotal(country, state.selectedRows.map(function (product) {\n      return product.id;\n    }), zipcode, administrative_demarcation === null || administrative_demarcation === void 0 ? void 0 : administrative_demarcation.admin_name_3);\n\n    if (service_type == 'Reparaciones en Taller' && state.selectedRows.length > 0) {\n      setProductTableDisabled(true);\n    }\n  }\n\n  function handlePolicyRowChange(policy) {\n    setCurrentPolicy(policy);\n    setSelectedPoliciesRows(policy.id);\n  }\n\n  function handleConsumableRowChange(state) {\n    if (service_type == 'Mantenimiento') {\n      setConsumableAmount(state.selectedRows.map(function (item) {\n        return item.sub_total_consumable_amount_without_events;\n      }).reduce(function (prev, curr) {\n        return prev + curr;\n      }, 0));\n    } else {\n      setConsumableAmount(0);\n    }\n\n    setSelectedConsumablesRows(state.selectedRows.map(function (consumable_row) {\n      return {\n        amount: consumable_row.sub_total_consumable_amount_without_events,\n        total_boxes: consumable_row.total_boxes_without_events,\n        product_id: consumable_row.consumable.product_id\n      };\n    }));\n  }\n\n  function consumableSelectableRowCriteria(row) {\n    if (selectedConsumablesRows.length > 0) {\n      return selectedConsumablesRows.find(function (product) {\n        return product.product_id === row.consumable.product_id;\n      }) != undefined;\n    } else {\n      return true;\n    }\n  }\n\n  function handleMessage(message, type) {\n    if (type == \"error\") {\n      flash_alert(\"\", t('services.visits.flashAlert.fileExceedLimit'), \"error\");\n    }\n  }\n\n  function getBase64(file) {\n    return new Promise(function (resolve, reject) {\n      var reader = new FileReader();\n      reader.readAsDataURL(file);\n\n      reader.onload = function () {\n        return resolve({\n          uri_64: reader.result,\n          name: file.name,\n          mime: file.type\n        });\n      };\n\n      reader.onerror = function (error) {\n        return reject(error);\n      };\n    });\n  } //////////////////////////////////////////////////////////////////\n\n\n  var redirect_check = [];\n\n  if (redirect) {\n    redirect_check.push( /*#__PURE__*/React.createElement(Redirect, {\n      key: \"redirect-to-customers\",\n      to: \"/customers/\".concat(customer_id, \"/services/\").concat(serviceID, \"/edit_service\"),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1126,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(EditService, {\n      setLoading: setLoading,\n      headers: props.headers,\n      match: props.match,\n      current_user: props.current_user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1126,\n        columnNumber: 113\n      }\n    })));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1131,\n      columnNumber: 5\n    }\n  }, redirect_check, /*#__PURE__*/React.createElement(Paper, {\n    className: \"custom-paper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1134,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1135,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"mdl-navigation__link  back-link back-link\",\n    to: \"/customers/\".concat(customer_id, \"/services/\").concat(serviceID, \"/edit_service\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1136,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1137,\n      columnNumber: 13\n    }\n  }, \"keyboard_arrow_left\"), \" \", t('globalText.back')), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1139,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1140,\n      columnNumber: 13\n    }\n  }, t('customer.showCustomer.visitNumber'), \" \", visit_number, \" - \", t('customer.showCustomer.services'), \" \", serviceNumber)))), /*#__PURE__*/React.createElement(CustomerDetails, {\n    customer_id: customer_id,\n    country_names: country_names_g,\n    country: country,\n    zipcode: zipcode,\n    personCheck: personCheck,\n    selectedPerson: selectedPerson,\n    rut: rut,\n    RUTCheck: RUTCheck,\n    zipcodeCheck: zipcodeCheck,\n    stateLabel: stateLabel,\n    administrative_demarcation: administrative_demarcation,\n    state: state,\n    delegationCheck: delegationCheck,\n    delegation: delegation,\n    colony: colony,\n    street_type: street_type,\n    street_name: street_name,\n    ext_number: ext_number,\n    int_number: int_number,\n    phone: phone,\n    reference: reference,\n    additionalsAddresses: additionalsAddresses,\n    colonyCheck: colonyCheck,\n    extNumberLabel: extNumberLabel,\n    intNumberLabel: intNumberLabel,\n    headers: headers,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1146,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1175,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ServiceInfoForm, {\n    costCenters: costCenters,\n    setSelectedCostCenterId: setSelectedCostCenterId,\n    selectedCostCenterId: selectedCostCenterId,\n    submit_type: \"new_visit\",\n    spare_part_columns: spare_part_columns,\n    requested_spare_parts: props.requested_spare_parts,\n    classes: classes,\n    service_typeErrorMessage: service_typeErrorMessage,\n    service_type: service_type,\n    service_types_g: service_types_g,\n    handleServiceTypeChange: handleServiceTypeChange,\n    subcategoryErrorMessage: subcategoryErrorMessage,\n    subcategory: subcategory,\n    setSubcategory: setSubcategory,\n    subcategoryOptions: subcategory_options,\n    requestedErrorMessage: requestedErrorMessage,\n    requested: requested,\n    handleRequestedChange: handleRequestedChange,\n    requestedBy: requestedLabels(i18next.language),\n    requestChannelErrorMessage: requestChannelErrorMessage,\n    requestChannel: requestChannel,\n    setRequestChannel: setRequestChannel,\n    channels: channels,\n    distributorCheck: distributorCheck,\n    distributorName: distributorName,\n    distributorEmail: distributorEmail,\n    setDistributorName: setDistributorName,\n    setDistributorEmail: setDistributorEmail,\n    policies: policies,\n    country: country,\n    handlePolicyRowChange: handlePolicyRowChange,\n    selectedPolicies: selectedPolicies,\n    products: products,\n    product_columns: product_columns,\n    handleProductRowChange: handleProductRowChange,\n    selectedProductRows: selectedProductRows,\n    consumables: consumables,\n    consumable_columns: consumable_columns,\n    handleConsumableRowChange: handleConsumableRowChange,\n    consumableSelectableRowCriteria: consumableSelectableRowCriteria,\n    background: background,\n    setBackground: setBackground,\n    backgroundErrorMessage: backgroundErrorMessage,\n    onServiceChangeFiles: onServiceChangeFiles,\n    handleMessage: handleMessage,\n    serviceFiles: serviceFiles,\n    setServiceFiles: setServiceFiles,\n    toggledClearProductsRows: toggledClearProductsRows,\n    productTableDisabled: productTableDisabled,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1177,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1229,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Paper, {\n    className: \"custom-paper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1231,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"panel-custom-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1232,\n      columnNumber: 9\n    }\n  }, t('services.visits.instalationAddress')), /*#__PURE__*/React.createElement(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1234,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(ListItem, {\n    key: \"principal\",\n    role: undefined,\n    dense: true,\n    button: true,\n    selected: checked == \"principal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1236,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ListItemIcon, {\n    className: \"service-address-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1237,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    value: \"principal\",\n    control: /*#__PURE__*/React.createElement(Radio, {\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1238,\n        columnNumber: 60\n      }\n    }),\n    label: \"\",\n    checked: checked == \"principal\",\n    disabled: true,\n    tabIndex: -1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1238,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(ListItemText, {\n    id: \"radio-address-list-label-principal\",\n    primary: \"Principal\",\n    secondary: \"\".concat(street_type, \" \").concat(street_name, \", \").concat(ext_number, \" \").concat(int_number, \", \").concat(administrative_demarcation != null ? administrative_demarcation.admin3_admin1 : state).concat(zipcode != \"\" ? \", Código Postal: \" + zipcode : \"\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1243,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(ListItemSecondaryAction, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1248,\n      columnNumber: 13\n    }\n  })), additionalsAddresses.map(function (additional_address) {\n    var labelId = \"radio-address-list-label-\".concat(additional_address.id);\n    return /*#__PURE__*/React.createElement(ListItem, {\n      key: additional_address.id,\n      role: undefined,\n      dense: true,\n      button: true,\n      selected: checked == additional_address.id,\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1255,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(ListItemIcon, {\n      className: \"service-address-label\",\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1256,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(FormControlLabel, {\n      value: additional_address.id,\n      control: /*#__PURE__*/React.createElement(Radio, {\n        color: \"primary\",\n        __self: _this2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 1257,\n          columnNumber: 76\n        }\n      }),\n      label: \"\",\n      checked: checked == additional_address.id,\n      disabled: true,\n      tabIndex: -1,\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1257,\n        columnNumber: 19\n      }\n    })), /*#__PURE__*/React.createElement(ListItemText, {\n      id: labelId,\n      primary: additional_address.name,\n      secondary: \"\".concat(additional_address.street_type, \" \").concat(additional_address.street_name, \", \").concat(additional_address.ext_number, \" \").concat(additional_address.int_number, \", \").concat(additional_address.administrative_demarcation != null ? additional_address.administrative_demarcation.admin3_admin1 : additional_address.state).concat(additional_address.zipcode != \"\" ? \", Código Postal: \" + additional_address.zipcode : \"\"),\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1262,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(ListItemSecondaryAction, {\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1267,\n        columnNumber: 17\n      }\n    }));\n  }))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1276,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Paper, {\n    className: \"custom-paper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1278,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"panel-custom-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1279,\n      columnNumber: 9\n    }\n  }, t('customer.newService.diary.title')), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1280,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1281,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"service-subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1282,\n      columnNumber: 13\n    }\n  }, t('customer.newService.diary.subTitle')), country_change && /*#__PURE__*/React.createElement(NewScheduleDialog, {\n    schedule_type: \"service\",\n    btn_classname: \"\",\n    btn_text: t('customer.newService.diary.calendarButton'),\n    customer_id: customer_id,\n    country: country,\n    selectedProductRows: selectedProductRows,\n    service_type: service_type,\n    subcategory: subcategory,\n    requested: requested,\n    techinicianNumber: techinicianNumber,\n    zipcode: zipcode,\n    administrative_demarcation: administrative_demarcation,\n    setTechinicianNumber: setTechinicianNumber,\n    event: event,\n    setEvent: setEvent,\n    technicians_ids: technicians_ids,\n    setTechniciansIds: setTechniciansIds,\n    saveService: saveService,\n    technicians: technicians,\n    setTechnicians: setTechnicians,\n    totalhours: totalhours,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1284,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(FormHelperText, {\n    className: \"brand-error-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1308,\n      columnNumber: 13\n    }\n  }, eventErrorMessage)), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1310,\n      columnNumber: 11\n    }\n  }, event.start != \"\" && /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1312,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1313,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"service-subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1314,\n      columnNumber: 19\n    }\n  }, t('customer.newService.diary.selectedDate'))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1316,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1317,\n      columnNumber: 19\n    }\n  }, t('customer.newService.diary.dayAndHour')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-scheddule-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1318,\n      columnNumber: 19\n    }\n  }, date_event_format(event.start, event.end))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1320,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1321,\n      columnNumber: 19\n    }\n  }, t('customer.newService.diary.duration')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-scheddule-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1322,\n      columnNumber: 19\n    }\n  }, date_difference_in_hours(event.start, event.end), \" \", pluralize(\"hora\", date_difference_in_hours(event.start, event.end)))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1324,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1325,\n      columnNumber: 19\n    }\n  }, t('customer.newService.diary.technicians')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-scheddule-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1326,\n      columnNumber: 19\n    }\n  }, technicians && technicians.map(function (technician, index) {\n    return /*#__PURE__*/React.createElement(\"span\", {\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1328,\n        columnNumber: 23\n      }\n    }, technician.user && (technician.enterprise != \"\" && technician.enterprise != null ? technician.user.fullname + \" (\" + technician.enterprise + \")\" : technician.user.fullname), index != technicians.length - 1 ? \",\" : \"\", \"\\xA0\");\n  }))))))), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1342,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Paper, {\n    className: \"custom-paper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1344,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"panel-custom-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1345,\n      columnNumber: 9\n    }\n  }, t('customer.newService.paymentService.title')), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1346,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1347,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1348,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1349,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"service-subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1350,\n      columnNumber: 17\n    }\n  }, t('customer.newService.paymentService.subTitle')), /*#__PURE__*/React.createElement(FormControlLabel, {\n    value: noPaymentCheck,\n    control: /*#__PURE__*/React.createElement(Checkbox, {\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1351,\n        columnNumber: 67\n      }\n    }),\n    label: t('customer.newService.paymentService.nopay'),\n    checked: noPaymentCheck,\n    tabIndex: -1,\n    onChange: function onChange(e) {\n      return setNoPaymentCheck(!noPaymentCheck);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1351,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    className: noPaymentCheck ? \"\" : \"hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1356,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1357,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    className: \"MuiFormControl-fullWidth\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1358,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    id: \"noPaymentOption-simple-select-outlined-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1359,\n      columnNumber: 19\n    }\n  }, t('customer.newService.paymentService.reasonForNonPayment')), /*#__PURE__*/React.createElement(Select, {\n    labelId: \"noPaymentOption-simple-select-outlined-label\",\n    id: \"noPaymentOption-simple-select-outlined\",\n    value: noPaymentOption,\n    onChange: function onChange(e) {\n      return setNoPaymentOption(e.target.value);\n    },\n    label: t('customer.newService.paymentService.reasonForNonPayment'),\n    name: \"noPaymentOption\",\n    error: noPaymenErrorMessage != \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1360,\n      columnNumber: 19\n    }\n  }, noPaymentsOptions.map(function (value) {\n    return /*#__PURE__*/React.createElement(MenuItem, {\n      key: \"noPaymentOption-\" + value,\n      value: value,\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1370,\n        columnNumber: 23\n      }\n    }, value);\n  })), /*#__PURE__*/React.createElement(FormHelperText, {\n    className: \"brand-error-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1373,\n      columnNumber: 19\n    }\n  }, noPaymenErrorMessage))), noPaymentOption == 'Pagado en cotización' && /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1378,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FormControl, {\n    variant: \"outlined\",\n    fullWidth: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1379,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(InputLabel, {\n    id: \"assignedQuotation-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1380,\n      columnNumber: 21\n    }\n  }, t('visits.quotes.title')), /*#__PURE__*/React.createElement(Select, {\n    labelId: \"assignedQuotation-label\",\n    value: assignedQuotationId,\n    onChange: handleAssignedQuotation,\n    label: \"Cotizaci\\xF3n\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1381,\n      columnNumber: 21\n    }\n  }, quotations.map(function (quotation) {\n    return /*#__PURE__*/React.createElement(MenuItem, {\n      disabled: !!quotation.assigned_visit_id,\n      key: \"assignedQuotation-\".concat(quotation.id),\n      value: quotation.id,\n      __self: _this2,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1388,\n        columnNumber: 25\n      }\n    }, \"Cotizaci\\xF3n N\\xB0 \".concat(quotation.quotation_number));\n  }))))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    className: noPaymentCheck ? \"hidden\" : \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1395,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1396,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ToggleButtonGroup, {\n    value: paymentChannel,\n    exclusive: true,\n    onChange: handlepaymentChannel,\n    \"aria-label\": \"text paymentChannel\",\n    className: \"service-payment-method-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1397,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(ToggleButton, {\n    className: \"service-payment-method-btn\",\n    value: \"online\",\n    \"aria-label\": \"online\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1404,\n      columnNumber: 19\n    }\n  }, t('customer.newService.paymentService.paymentMethod.online')), /*#__PURE__*/React.createElement(ToggleButton, {\n    className: \"service-payment-method-btn\",\n    value: \"transfer\",\n    \"aria-label\": \"transfer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1408,\n      columnNumber: 19\n    }\n  }, t('customer.newService.paymentService.paymentMethod.transfer')), /*#__PURE__*/React.createElement(ToggleButton, {\n    className: \"service-payment-method-btn\",\n    value: \"phone\",\n    \"aria-label\": \"phone\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1412,\n      columnNumber: 19\n    }\n  }, t('customer.newService.paymentService.paymentMethod.payForphone')), /*#__PURE__*/React.createElement(ToggleButton, {\n    className: \"service-payment-method-btn\",\n    value: \"pay_at_home\",\n    \"aria-label\": \"pay_at_home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1416,\n      columnNumber: 19\n    }\n  }, t('customer.newService.paymentService.paymentMethod.payAtHome')), /*#__PURE__*/React.createElement(ToggleButton, {\n    className: \"service-payment-method-btn\",\n    value: \"bank_deposit\",\n    \"aria-label\": \"bank_deposit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1420,\n      columnNumber: 19\n    }\n  }, t('customer.newService.paymentService.paymentMethod.bankDeposit')))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    className: paymentData.length > 0 ? \"\" : \"hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1425,\n      columnNumber: 15\n    }\n  }, paymentData.length > 0 && paymentData[0].status == \"completed\" ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1427,\n      columnNumber: 84\n    }\n  }, t('customer.newService.paymentService.paymentCompleted')) : \"\"), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    className: paymentChannel == \"phone\" ? \"\" : \"hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1430,\n      columnNumber: 15\n    }\n  }, paymentData.length > 0 && paymentData[0].status != \"completed\" && totalAmount > 0 || paymentData.length < 1 ? /*#__PURE__*/React.createElement(PaymentMethods, {\n    cols: 4,\n    country: country,\n    serviceID: visit ? visit.id : serviceID,\n    customer_id: customer_id,\n    totalAmount: totalAmount,\n    object_class: \"Visita\",\n    onPaymentCallback: function onPaymentCallback() {\n      return saveService(false);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1433,\n      columnNumber: 21\n    }\n  }) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1442,\n      columnNumber: 23\n    }\n  }, t('customer.newService.paymentService.productAndService'))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1445,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CopyToClipboard, {\n    text: paymentLink,\n    onCopy: function onCopy() {\n      return flash_alert(\"Copiado\", \"Se ha copiado el enlace. Puede pegarlo en nueva ventana para verificar.\", \"success\");\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1446,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"a\", {\n    className: \"mdl-navigation__link brand-primary-link \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1448,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1448,\n      columnNumber: 75\n    }\n  }, \"file_copy\"), \" \", t('customer.newService.paymentService.copyPaymentLink')))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1451,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"service-payemnt-method-p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1452,\n      columnNumber: 17\n    }\n  }, t('customer.newService.paymentService.customerBill?')), /*#__PURE__*/React.createElement(FormControlLabel, {\n    value: \"si\",\n    control: /*#__PURE__*/React.createElement(Radio, {\n      checked: invoiceCheck === \"si\",\n      onChange: handleInvoiceCheckChange,\n      value: \"si\",\n      color: \"primary\",\n      name: \"radio-button-invoice-check\",\n      inputProps: {\n        'aria-label': 'Si'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1454,\n        columnNumber: 19\n      }\n    }),\n    label: t('customer.newService.paymentService.yes'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1453,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(FormControlLabel, {\n    value: \"no\",\n    control: /*#__PURE__*/React.createElement(Radio, {\n      checked: invoiceCheck === \"no\",\n      onChange: handleInvoiceCheckChange,\n      value: \"no\",\n      color: \"primary\",\n      name: \"radio-button-invoice-check\",\n      inputProps: {\n        'aria-label': 'No'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1465,\n        columnNumber: 19\n      }\n    }),\n    label: t('customer.newService.paymentService.no'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1464,\n      columnNumber: 17\n    }\n  }), invoiceCheck === \"si\" && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1475,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"service-payemnt-method-p\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1476,\n      columnNumber: 21\n    }\n  }, t('customer.newService.paymentService.generateServiceButton')), /*#__PURE__*/React.createElement(List, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1477,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ListItem, {\n    key: \"principal\",\n    className: \"service-address-list-item\",\n    role: undefined,\n    dense: true,\n    button: true,\n    onClick: handleToggleFN(\"principal\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1478,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(ListItemIcon, {\n    className: \"service-address-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1479,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(FormControlLabel, {\n    value: \"principal\",\n    control: /*#__PURE__*/React.createElement(Radio, {\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 1480,\n        columnNumber: 72\n      }\n    }),\n    label: \"\",\n    checked: checkedFN == \"principal\",\n    tabIndex: -1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1480,\n      columnNumber: 27\n    }\n  })), /*#__PURE__*/React.createElement(ListItemText, {\n    id: \"radio-address-list-label-principal\",\n    primary: \"Principal\",\n    secondary: \"\".concat(street_type_fn, \" \").concat(street_name_fn, \", \").concat(ext_number_fn, \" \").concat(int_number_fn, \", \").concat(administrative_demarcation_fn != null ? administrative_demarcation.admin3_admin1 : state_fn).concat(zipcode_fn != \"\" ? \", Código Postal: \" + zipcode_fn : \"\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1485,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(ListItemSecondaryAction, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1490,\n      columnNumber: 25\n    }\n  })))))), /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 2,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1521,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1522,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1523,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(PaymentEmailDialog, {\n    email: customerEmail,\n    paymentEmailDialog: paymentEmailDialog,\n    setPaymentEmailDialog: setPaymentEmailDialog,\n    loading: loading,\n    setLoading: setLoading,\n    saveService: saveService,\n    paymentEmailAdditional: paymentEmailAdditional,\n    setPaymentEmailAdditional: setPaymentEmailAdditional,\n    isPaymentEmail: isPaymentEmail,\n    setIsPaymentEmail: setIsPaymentEmail,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1524,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: classes.wrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1536,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    id: \"service-save\",\n    disabled: loading,\n    type: \"submit\",\n    variant: \"contained\",\n    color: \"primary\",\n    onClick: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1537,\n      columnNumber: 19\n    }\n  }, t('customer.newService.paymentService.generateServiceButton')), loading && /*#__PURE__*/React.createElement(CircularProgress, {\n    size: 24,\n    className: classes.buttonProgress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1540,\n      columnNumber: 31\n    }\n  }))))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 4,\n    className: \"service-price-table-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1546,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"service-subtitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1547,\n      columnNumber: 13\n    }\n  }, t('customer.newService.paymentService.serviceDetails.title')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1549,\n      columnNumber: 13\n    }\n  }, t('customer.newService.paymentService.serviceDetails.concept')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1550,\n      columnNumber: 13\n    }\n  }, service_type, subcategory != \"\" ? \", \" + subcategory : \"\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1552,\n      columnNumber: 13\n    }\n  }, t('services.visits.payments.paymentData.amount')), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"service-price-table-value\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1553,\n      columnNumber: 13\n    }\n  }, money_format(country, totalAmount), /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    onClick: handleClickOpenTotalDialog,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1554,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"material-icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1555,\n      columnNumber: 17\n    }\n  }, t('globalText.edit')))), /*#__PURE__*/React.createElement(Dialog, {\n    open: openTotalDialog,\n    onClose: handleCloseTotalDialog,\n    \"aria-labelledby\": \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1559,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    id: \"form-dialog-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1560,\n      columnNumber: 15\n    }\n  }, t('services.visits.changeTotalValue')), /*#__PURE__*/React.createElement(DialogContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1561,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(DialogContentText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1562,\n      columnNumber: 17\n    }\n  }, t('services.visits.changeValue')), /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    type: \"number\",\n    variant: \"outlined\",\n    label: t('services.visits.totalService'),\n    name: \"total_service\",\n    value: totalAmount,\n    onChange: function onChange(e) {\n      return setTotalAmount(Number(e.target.value));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1565,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1567,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleCloseTotalDialog,\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1568,\n      columnNumber: 17\n    }\n  }, t('globalText.ok')))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1574,\n      columnNumber: 13\n    }\n  }, t('customer.newService.paymentService.serviceDetails.totalHours'), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1575,\n      columnNumber: 83\n    }\n  }, totalhours)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1579,\n      columnNumber: 13\n    }\n  }, t('customer.newService.paymentService.serviceDetails.hourAmount'), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1580,\n      columnNumber: 83\n    }\n  }, money_format(country, hourAmout))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1583,\n      columnNumber: 13\n    }\n  }, t('customer.newService.paymentService.serviceDetails.feeAmount'), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1584,\n      columnNumber: 82\n    }\n  }, money_format(country, feeAmount))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1587,\n      columnNumber: 13\n    }\n  }, \"Refacciones \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1588,\n      columnNumber: 27\n    }\n  }, money_format(country, sparePartsAmount))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1591,\n      columnNumber: 13\n    }\n  }, t('customer.newService.paymentService.serviceDetails.consumables'), \" \", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1592,\n      columnNumber: 84\n    }\n  }, money_format(country, consumableAmount))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1595,\n      columnNumber: 13\n    }\n  }, t('customer.newService.paymentService.serviceDetails.laborAmount'), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1596,\n      columnNumber: 83\n    }\n  }, money_format(country, laborAmount))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1599,\n      columnNumber: 13\n    }\n  }, t('customer.newService.paymentService.serviceDetails.viaticAmount'), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1600,\n      columnNumber: 84\n    }\n  }, money_format(country, viaticAmout))), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1603,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1604,\n      columnNumber: 13\n    }\n  }, t('customer.newService.paymentService.serviceDetails.subTotalAmount'), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1605,\n      columnNumber: 86\n    }\n  }, money_format(country, subtotalAmount))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1608,\n      columnNumber: 13\n    }\n  }, t('customer.newService.paymentService.serviceDetails.ivaAmount'), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1609,\n      columnNumber: 81\n    }\n  }, money_format(country, ivaAmount))), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1612,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1614,\n      columnNumber: 13\n    }\n  }, t('customer.newService.paymentService.serviceDetails.totalAmount'), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pull-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1615,\n      columnNumber: 83\n    }\n  }, money_format(country, Number(totalAmount)))), /*#__PURE__*/React.createElement(MuiPickersUtilsProvider, {\n    utils: DateFnsUtils,\n    locale: esLocale,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1619,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(KeyboardDatePicker, {\n    className: \"payment-date-input\",\n    id: \"date-payment-dialog\",\n    label: t('customer.newService.paymentService.serviceDetails.paydayLimit'),\n    format: \"dd/MM/yyyy\",\n    value: selectedPaymentDate,\n    onChange: handlePaymentDateChange,\n    KeyboardButtonProps: {\n      'aria-label': 'change date'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1620,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(FormHelperText, {\n    className: \"brand-error-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1631,\n      columnNumber: 15\n    }\n  }, selectedPaymentDateErrorMessage))))));\n}\n\nvar structuredSelector = createStructuredSelector({\n  requested_spare_parts: function requested_spare_parts(state) {\n    return state.requested_spare_parts;\n  },\n  spare_parts: function spare_parts(state) {\n    return state.spare_parts;\n  },\n  current_user: function current_user(state) {\n    return state.current_user;\n  }\n});\nvar mapDispatchToProps = {\n  getRequestedSpareParts: getRequestedSpareParts\n};\nexport default connect(structuredSelector, mapDispatchToProps)(NewVisit);","map":{"version":3,"sources":["/usr/src/app/javascript/components/services/visits/NewVisit.jsx"],"names":["React","useState","useEffect","ReactDOM","axios","CostCenterApi","Link","Redirect","connect","createStructuredSelector","flash_alert","CustomerDetails","NewScheduleDialog","PaymentEmailDialog","ServiceInfoForm","Paper","Grid","country_names_g","street_types_cl_g","csrf","headers","money_format","date_event_format","date_format_without_time","date_difference_in_hours","api_token","site_url","pluralize","InputLabel","TextField","FormControl","MenuItem","Select","EditService","createStyles","makeStyles","CircularProgress","Radio","FormControlLabel","FormHelperText","List","ListItem","ListItemIcon","ListItemSecondaryAction","ListItemText","Checkbox","Button","ToggleButton","ToggleButtonGroup","DateFnsUtils","esLocale","MuiPickersUtilsProvider","KeyboardTimePicker","KeyboardDatePicker","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Image","PaymentMethods","CopyToClipboard","DeleteSparePartDialog","EditSparePartDialog","noPaymentsOptions","useTranslation","i18next","serviceTypeLabels","serviceTypeSubcategories","requestedLabels","service_types_g","inst_options","main_options","repair_options","mp_options","repair_t_options","delivery_options","policy_options","requested_by","channels","product_columns","name","t","selector","hide","cell","row","product","taxons","sortable","tnr","reinstalation_date","instalation_date","discontinued","warranty","consumable_columns","GET_REQUESTED_SPARE_PARTS_REQUEST","GET_REQUESTED_SPARE_PARTS_SUCCESS","getRequestedSpareParts","service_id","dispatch","type","fetch","then","response","json","getRequestedSparePartsSuccess","error","console","log","NewVisit","props","useStyles","theme","previewChip","minWidth","maxWidth","wrapper","margin","spacing","position","buttonProgress","top","left","marginTop","marginLeft","classes","costCenters","setCostCenters","selectedCostCenterId","setSelectedCostCenterId","newVisit","setNewVisit","quotations","setQuotations","assignedQuotationId","setAssignedQuotationId","customerNames","setCustomerFirstname","customerLastname","setCustomerLastname","customerSurname","setCustomerSurname","customerEmail","setCustomerEmail","customer_id","setCustomerId","zipcode","setZipcode","state","setState","delegation","setDelegation","colony","setColony","street_type","setStreettype","street_name","setStreetName","ext_number","setExtNumber","int_number","setIntNumber","phone","setPhone","reference","setReference","selectedPerson","setSelectedPerson","country","setCountry","countryIVA","setCountryIVA","rut","setRut","administrative_demarcation","setAdministrativeDemarcation","zipcode_fn","setZipcodeFn","state_fn","setStateFn","delegation_fn","setDelegationFn","colony_fn","setColonyFn","street_type_fn","setStreettypeFn","street_name_fn","setStreetNameFn","ext_number_fn","setExtNumberFn","int_number_fn","setIntNumberFn","phone_fn","setPhoneFn","administrative_demarcation_fn","setAdministrativeDemarcationFn","additionalsAddresses","setAdditionalsAddresses","personCheck","setPersonCheck","RUTCheck","setRUTCheck","zipcodeCheck","setZipcodeCheck","delegationCheck","setDelegationCheck","stateLabel","setStateLabel","colonyCheck","setColonyCheck","extNumberLabel","setExtNumberLabel","intNumberLabel","setIntNumberLabel","country_change","setCountryChange","redirect","setRedirect","firstLoad","setFirstLoad","loading","setLoading","serviceID","setServiceID","service_type","setServiceType","subcategory","setSubcategory","requested","setRequested","requestChannel","setRequestChannel","subcategory_options","setSubcategoryOptions","serviceNumber","setServiceNumber","serviceStatusLabel","setServiceStatusLabel","ibs_number","setIBSNumber","paymentFiles","setPaymentFiles","serviceStatus","setServiceStatus","serviceFiles","setServiceFiles","serviceUpdated","setServiceUpdated","start","end","event","setEvent","technicians","setTechnicians","policies","setPolicies","currentPolicy","setCurrentPolicy","selectedPolicies","setSelectedPoliciesRows","technicians_ids","setTechniciansIds","techinicianNumber","setTechinicianNumber","hourAmout","setHourAmout","viaticAmout","setViaticAmout","sparePartsAmount","setSparePartsAmount","feeAmount","setFeeAmount","feeAmountIncrement","setFeeAmountIncrement","consumableAmount","setConsumableAmount","laborAmount","setLaborAmount","totalhours","setTotalhours","ivaAmount","setIVAAmount","subtotalAmount","setSubtotalAmount","totalAmount","setTotalAmount","noPaymentCheck","setNoPaymentCheck","noPaymentOption","setNoPaymentOption","Date","selectedPaymentDate","setSelectedPaymentDate","paymentData","setPaymentData","paymentLink","setPaymentLink","paymentLinkBoolean","setPaymentLinkBoolean","from","setFrom","principal_technician","setPrincipalTechnician","service_technicians","setServiceTechnicians","distributorName","setDistributorName","distributorEmail","setDistributorEmail","distributorCheck","setDistributorCheck","products","setProducts","selectedProductRows","setSelectedProductRows","background","setBackground","files","setFiles","consumables","setConsumables","selectedConsumables","setSelectedConsumables","selectedConsumablesRows","setSelectedConsumablesRows","service_typeErrorMessage","setServiceTypeErrorMessage","subcategoryErrorMessage","setSubcategoryErrorMessage","requestedErrorMessage","setRequestedErrorMessage","requestChannelErrorMessage","setRequestChannelErrorMessage","backgroundErrorMessage","setBackgroundErrorMessage","eventErrorMessage","setEventErrorMessage","noPaymenErrorMessage","setNoPaymenErrorMessage","selectedPaymentDateErrorMessage","setSelectedPaymentDateErrorMessage","checked","setChecked","handleToggle","value","checkedFN","setCheckedFN","handleToggleFN","paymentChannel","setPaymentChannel","invoiceCheck","setInvoiceCheck","openTotalDialog","setOpenTotalDialog","paymentEmailAdditional","setPaymentEmailAdditional","isPaymentEmail","setIsPaymentEmail","paymentEmailDialog","setPaymentEmailDialog","toggledClearProductsRows","setoggledClearProductsRows","productTableDisabled","setProductTableDisabled","visit","setVisit","visit_number","setVisitNumber","handleClickOpenTotalDialog","updateAssignQuotation","assignedId","quotation","find","id","spare_parts_amount","labor_amount","viatic_amount","fetchServiceTotal","map","admin_name_3","handleAssignedQuotation","target","currentValue","handleCloseTotalDialog","spare_part_columns","grow","spare_part","quantity","requested_quantity","serviceCallbacks","fetchData","fetchServiceData","userId","match","params","getAllCostCenters","costCentersFetch","data","names","lastname","surname","email","person_type","iso","iva","additional_addresses","handleCountryInputs","total_amount","handleServiceTypeChange","number","status_label","request_channel","technicians_number","hour_amount","fee_amount","total_hours","cost_center_id","distributor_name","distributor_email","new_visit","assigned_quotation_id","customer_products","filter","customer_product","status","no_payment","payment_channel","payment_date","no_payment_reason","invoice","file_resources","payment_resources","calendar_events","length","service_products","item","amount","reduce","prev","curr","consumable_row","String","total_boxes","product_id","fetchVisitPayments","visits","policy_id","policy","fetchPolicyTotal","sub_total_consumable_amount_without_events","total_boxes_without_events","consumable","process","env","RAILS_ENV","saveService","policy_new","policy_customer_products","policy_customer_product","viatic_price","items_price","labor_price","total_price","country_code","products_ids","zipcode_t","administrative_demarcation_name_t","from_consumables","from_policy","event_local","time_diff","administrative_demarcation_name","viatic_value","quotation_id","get","total_technicians","fee_amount_increment","subtotal_amount","iva_amount","items","object_id","object_class","validateForm","messages","push","forEach","element","redirect_param","schedule_visit","body","FormData","set","product_row","file","append","JSON","stringify","post","e","key","handlepaymentChannel","newpaymentChannel","handleInvoiceCheckChange","handlePaymentDateChange","date","country_iso","handleSubmit","preventDefault","serviceTypes","language","serviceTypeKey","Object","keys","serviceTypeLabel","subcategories","handleRequestedChange","requestedDistributor","onServiceChangeFiles","dT","getBase64","encFile","handleProductRowChange","selectedRows","handlePolicyRowChange","handleConsumableRowChange","consumableSelectableRowCriteria","undefined","handleMessage","message","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","uri_64","result","mime","onerror","redirect_check","current_user","requested_spare_parts","admin3_admin1","additional_address","labelId","technician","index","user","enterprise","fullname","assigned_visit_id","quotation_number","Number","structuredSelector","spare_parts","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport ReactDOM from 'react-dom'\nimport axios from 'axios';\nimport * as CostCenterApi from 'api/cost_center'\nimport {Link} from 'react-router-dom'\nimport {Redirect} from \"react-router-dom\";\nimport {connect} from \"react-redux\"\nimport {createStructuredSelector} from \"reselect\"\nimport {flash_alert} from 'components/App';\nimport CustomerDetails from \"components/customers/CustomerDetails\";\nimport NewScheduleDialog from \"components/services/NewScheduleDialog\";\nimport PaymentEmailDialog from \"components/services/PaymentEmailDialog\";\nimport ServiceInfoForm from \"components/services/forms/ServiceInfoForm\";\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport {country_names_g, street_types_cl_g} from 'components/customers/CustomerForm';\nimport {csrf, headers, money_format, date_event_format, date_format_without_time, date_difference_in_hours, api_token, site_url} from \"constants/csrf\"\nimport pluralize from 'pluralize';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport TextField from '@material-ui/core/TextField';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport EditService from \"components/services/EditService\";\nimport {createStyles, makeStyles} from '@material-ui/core/styles';\n// Button loading\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Radio from '@material-ui/core/Radio';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Button from '@material-ui/core/Button';\n// Toggle buttons\nimport ToggleButton from '@material-ui/lab/ToggleButton';\nimport ToggleButtonGroup from '@material-ui/lab/ToggleButtonGroup';\n// Dates\nimport DateFnsUtils from '@date-io/date-fns';\nimport esLocale from \"date-fns/locale/es\";\nimport {\n  MuiPickersUtilsProvider,\n  KeyboardTimePicker,\n  KeyboardDatePicker,\n} from '@material-ui/pickers';\n\n// Dialog\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n// Image\nimport Image from 'material-ui-image'\n// Payment Methods\nimport PaymentMethods from 'components/payments/PaymentMethods';\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\nimport DeleteSparePartDialog from \"components/services/DeleteSparePartDialog\";\nimport EditSparePartDialog from \"components/services/EditSparePartDialog\";\n\nimport {noPaymentsOptions} from \"constants/csrf\";\n// Translation\nimport { useTranslation } from 'react-i18next';\nimport i18next from 'i18next';\nimport { serviceTypeLabels, serviceTypeSubcategories, requestedLabels } from 'constants/services'\n\nconst service_types_g = [\"Instalación\", \"Mantenimiento\", \"Reparación\", \"Home Program\", \"Reparaciones en Taller\", \"Entregas/Despachos\", \"Póliza de Mantenimiento\"]\n\n\nconst inst_options = [\"Profesional\", \"Doméstico\", \"Reinstalación\"]\nconst main_options = [\"Mantenimiento Regular\", \"Certificado de servicio doméstico\", \"Certificado de mantenimiento Profesional\", \"Certificado de mantenimiento Doméstico\"]\nconst repair_options = [\"Profesional\", \"Doméstico\", \"Garantía de reparación previa - Profesional\", \"Garantía de reparación previa - Doméstico\", \"Garantía de Manufactura\", \"Garantía de instalación - Profesional\", \"Garantía de instalación - Doméstico\", \"Cortesía - Cargo a ventas Profesional\", \"Cortesía - Cargo a ventas Doméstico\", \"Cortesía - Cargo a Servicio\"]\nconst mp_options = [\"No existen sub-categorías\"]\nconst repair_t_options = [\"Option 1\", \"Option 2\"]\nconst delivery_options = [\"No existen sub-categorías\"]\nconst policy_options = [\"No existen sub-categorías\"]\n\nconst requested_by = [\"Cliente directo\", \"Distribuidor autorizado\"]\n\nconst channels = [\"Teléfono\", \"App Clientes\", \"Web\", \"Redes sociales\", \"Correo\", \"Partners B2B\", \"eCommerce\"]\n\nconst product_columns = [\n  {\n    name: i18next.t('globalTables.customerProductColumns.family'),\n    selector: 'product.taxons',\n    hide: 'md',\n    cell: row => (\n      <span>\n        {(row.product.taxons[0] == null ? \"-\" : row.product.taxons[0].name)}\n      </span>\n    ),\n  },\n  {\n    name: i18next.t('globalTables.customerProductColumns.subFamily'),\n    selector: 'product.taxons',\n    hide: 'md',\n    cell: row => (\n      <span>\n        {(row.product.taxons[1] == null ? \"-\" : row.product.taxons[1].name)}\n      </span>\n    ),\n  },\n  {\n    name: i18next.t('globalTables.customerProductColumns.id'),\n    selector: 'serial_id',\n    sortable: true\n  },\n  {\n    name: i18next.t('globalTables.customerProductColumns.tnr'),\n    selector: 'product.tnr',\n    sortable: true,\n    cell: row => (\n      <span>\n        {(row.product.tnr == \"\" ? \"-\" : row.product.tnr)}\n      </span>\n    ),\n  },\n  {\n    name: i18next.t('globalTables.customerProductColumns.name'),\n    selector: 'product.name',\n    sortable: true,\n    hide: 'md',\n    cell: row => (\n      <span>\n        {(row.product.name == \"\" ? \"-\" : row.product.name)}\n      </span>\n    ),\n  },\n  {\n    name: i18next.t('globalTables.customerProductColumns.instalationDate'),\n    selector: 'instalation_date',\n    sortable: true,\n    hide: 'md',\n    cell: row => (\n      <span>\n        {(row.reinstalation_date == null ? (row.instalation_date == null ? \"No\" : date_format_without_time(row.instalation_date)) : date_format_without_time(row.reinstalation_date) + \" reinstalado\")}\n      </span>\n    ),\n  },\n  {\n    name: i18next.t('globalTables.customerProductColumns.discontinuedRow.discontinued'),\n    selector: 'discontinued',\n    sortable: true,\n    hide: 'md',\n    cell: row => (\n      <span>\n        {(row.discontinued ? i18next.t('globalTables.customerProductColumns.discontinuedRow.yes') : i18next.t('globalTables.customerProductColumns.discontinuedRow.no'))}\n      </span>\n    ),\n  },\n  {\n    name: i18next.t('globalTables.customerProductColumns.warrantyRow.warranty'),\n    selector: 'warranty',\n    sortable: true,\n    hide: 'md',\n    cell: row => (\n      <span>\n        {((row.warranty == null ? i18next.t('globalTables.customerProductColumns.warrantyRow.no') : i18next.t('globalTables.customerProductColumns.warrantyRow.valid') + date_format_without_time(row.warranty)))}\n      </span>\n    ),\n  },\n  {\n    name: i18next.t('globalTables.productsColumns.policy'),\n    selector: 'policy',\n    sortable: true,\n    hide: 'md',\n  },\n  {\n    name: i18next.t('globalTables.productsColumns.status'),\n    selector: 'status',\n    sortable: true,\n    hide: 'md',\n  }\n];\n\n\nconst consumable_columns = [\n  {\n    name: i18next.t('globalTables.customerProductColumns.tnr'),\n    selector: 'consumable.product.tnr',\n    sortable: true\n  },\n  {\n    name: i18next.t('globalTables.customerProductColumns.name'),\n    selector: 'consumable.name',\n    sortable: true,\n    hide: 'sm',\n  },\n  {\n    name: i18next.t('globalTables.productsColumns.requiredQuantity'),\n    selector: 'total_boxes_without_events',\n    sortable: true\n  }\n];\n\n\n\nconst GET_REQUESTED_SPARE_PARTS_REQUEST = \"GET_REQUESTED_SPARE_PARTS_REQUEST\";\nconst GET_REQUESTED_SPARE_PARTS_SUCCESS = \"GET_REQUESTED_SPARE_PARTS_SUCCESS\";\n\nfunction getRequestedSpareParts(service_id) {\n\n  return dispatch => {\n    dispatch({type: GET_REQUESTED_SPARE_PARTS_REQUEST});\n    return fetch(`/api/v1/services/${service_id}/requested_spare_parts`)\n      .then(response => response.json())\n      .then(json => dispatch(getRequestedSparePartsSuccess(json)))\n      .catch(error => console.log(error));\n  };\n};\n\nexport function getRequestedSparePartsSuccess(json) {\n\n  return {\n    type: GET_REQUESTED_SPARE_PARTS_SUCCESS,\n    json\n  };\n};\n\n\n\n\nfunction NewVisit(props) {\n  const useStyles = makeStyles(theme => createStyles({\n    previewChip: {\n      minWidth: 160,\n      maxWidth: 210\n    },\n    wrapper: {\n      margin: theme.spacing(1),\n      position: 'relative',\n    },\n    buttonProgress: {\n      position: 'absolute',\n      top: '50%',\n      left: '50%',\n      marginTop: -12,\n      marginLeft: -12,\n    },\n  }));\n\n  const classes = useStyles();\n  const {t} = useTranslation();\n  const [costCenters, setCostCenters] = useState([])\n  const [selectedCostCenterId, setSelectedCostCenterId] = useState(0)\n  const [newVisit, setNewVisit] = useState({})\n  const [quotations, setQuotations] = useState([])\n  const [assignedQuotationId, setAssignedQuotationId] = useState(0)\n\n  // Customer Info\n  const [customerNames, setCustomerFirstname] = useState(\"\");\n  const [customerLastname, setCustomerLastname] = useState(\"\");\n  const [customerSurname, setCustomerSurname] = useState(\"\");\n  const [customerEmail, setCustomerEmail] = useState(\"\");\n\n  // Customer \n  const [customer_id, setCustomerId] = useState(\"\");\n  // Ship Address\n  const [zipcode, setZipcode] = useState(\"\");\n  const [state, setState] = useState(\"\");\n  const [delegation, setDelegation] = useState(\"\");\n  const [colony, setColony] = useState(\"\");\n  const [street_type, setStreettype] = useState(\"\");\n  const [street_name, setStreetName] = useState(\"\");\n  const [ext_number, setExtNumber] = useState(\"\");\n  const [int_number, setIntNumber] = useState(\"\");\n  const [phone, setPhone] = useState(\"\");\n  const [reference, setReference] = useState(\"\");\n  const [selectedPerson, setSelectedPerson] = useState(\"\");\n  const [country, setCountry] = useState(\"MX\");\n  const [countryIVA, setCountryIVA] = useState(0.16);\n\n  const [rut, setRut] = useState(\"\");\n  const [administrative_demarcation, setAdministrativeDemarcation] = useState({});\n  // Bill Address\n  const [zipcode_fn, setZipcodeFn] = useState(\"\");\n  const [state_fn, setStateFn] = useState(\"\");\n  const [delegation_fn, setDelegationFn] = useState(\"\");\n  const [colony_fn, setColonyFn] = useState(\"\");\n  const [street_type_fn, setStreettypeFn] = useState(\"\");\n  const [street_name_fn, setStreetNameFn] = useState(\"\");\n  const [ext_number_fn, setExtNumberFn] = useState(\"\");\n  const [int_number_fn, setIntNumberFn] = useState(\"\");\n  const [phone_fn, setPhoneFn] = useState(\"\");\n  const [administrative_demarcation_fn, setAdministrativeDemarcationFn] = useState({});\n  // ADDITIONALS ADDRESS\n  const [additionalsAddresses, setAdditionalsAddresses] = useState([]);\n  // CHECKS\n  const [personCheck, setPersonCheck] = useState(\"\");\n  const [RUTCheck, setRUTCheck] = useState(\"hidden\");\n  const [zipcodeCheck, setZipcodeCheck] = useState(\"\");\n  const [delegationCheck, setDelegationCheck] = useState(\"\");\n  const [stateLabel, setStateLabel] = useState(\"Estado\");\n  const [colonyCheck, setColonyCheck] = useState(\"\");\n  const [extNumberLabel, setExtNumberLabel] = useState(\"Número Exterior\");\n  const [intNumberLabel, setIntNumberLabel] = useState(\"Número Interior\");\n  const [country_change, setCountryChange] = useState(false);\n  // Additional Info\n  const [redirect, setRedirect] = useState(false);\n  const [firstLoad, setFirstLoad] = useState(false);\n  const [loading, setLoading] = React.useState(false);\n  // Service info\n  const [serviceID, setServiceID] = useState(\"\");\n  const [service_type, setServiceType] = useState(\"\");\n  const [subcategory, setSubcategory] = useState(\"\");\n  const [requested, setRequested] = useState(\"\");\n  const [requestChannel, setRequestChannel] = useState(\"\");\n  const [subcategory_options, setSubcategoryOptions] = useState([]);\n  const [serviceNumber, setServiceNumber] = useState(\"\");\n  const [serviceStatusLabel, setServiceStatusLabel] = useState(\"\");\n  const [ibs_number, setIBSNumber] = useState(\"\");\n  const [paymentFiles, setPaymentFiles] = useState([]);\n  //const [servicePriceData, setServicePriceData] = useState([]);\n  const [serviceStatus, setServiceStatus] = useState(\"new\");\n  const [serviceFiles, setServiceFiles] = useState([]);\n  const [serviceUpdated, setServiceUpdated] = useState(false);\n  const [event, setEvent] = useState({start: \"\", end: \"\"});\n  const [technicians, setTechnicians] = useState([]);\n  const [policies, setPolicies] = useState([]);\n  const [currentPolicy, setCurrentPolicy] = useState(\"\");\n  const [selectedPolicies, setSelectedPoliciesRows] = useState(\"\");\n  const [technicians_ids, setTechniciansIds] = useState(\"\");\n  const [techinicianNumber, setTechinicianNumber] = useState(1);\n  const [hourAmout, setHourAmout] = useState(0);\n  const [viaticAmout, setViaticAmout] = useState(0);\n  const [sparePartsAmount, setSparePartsAmount] = useState(0)\n  const [feeAmount, setFeeAmount] = useState(0);\n  const [feeAmountIncrement, setFeeAmountIncrement] = useState(0);\n  const [consumableAmount, setConsumableAmount] = useState(0);\n  const [laborAmount, setLaborAmount] = useState(0);\n  const [totalhours, setTotalhours] = useState(\"\");\n  const [ivaAmount, setIVAAmount] = useState(0);\n  const [subtotalAmount, setSubtotalAmount] = useState(0);\n  const [totalAmount, setTotalAmount] = useState(0);\n  const [noPaymentCheck, setNoPaymentCheck] = useState(false);\n  const [noPaymentOption, setNoPaymentOption] = useState(\"\");\n  const [selectedPaymentDate, setSelectedPaymentDate] = React.useState(new Date());\n  const [paymentData, setPaymentData] = useState([]);\n  const [paymentLink, setPaymentLink] = useState(\"\");\n  const [paymentLinkBoolean, setPaymentLinkBoolean] = useState(false);\n  const [from, setFrom] = useState(\"app_web\");\n\n  const [principal_technician, setPrincipalTechnician] = useState('');\n  const [service_technicians, setServiceTechnicians] = useState([]);\n\n  // Distributor\n  const [distributorName, setDistributorName] = useState(\"\");\n  const [distributorEmail, setDistributorEmail] = useState(\"\");\n  const [distributorCheck, setDistributorCheck] = useState(\"hidden\");\n\n  // Products\n  const [products, setProducts] = useState([]);\n  const [selectedProductRows, setSelectedProductRows] = useState([]);\n  const [background, setBackground] = useState(\"\");\n  const [files, setFiles] = useState([]);\n  // Comsumable\n  const [consumables, setConsumables] = useState([]);\n  const [selectedConsumables, setSelectedConsumables] = useState([]);\n  const [selectedConsumablesRows, setSelectedConsumablesRows] = useState([]);\n\n  // Form validation\n  const [service_typeErrorMessage, setServiceTypeErrorMessage] = useState(\"\");\n  const [subcategoryErrorMessage, setSubcategoryErrorMessage] = useState(\"\");\n  const [requestedErrorMessage, setRequestedErrorMessage] = useState(\"\");\n  const [requestChannelErrorMessage, setRequestChannelErrorMessage] = useState(\"\");\n  const [backgroundErrorMessage, setBackgroundErrorMessage] = useState(\"\");\n  const [eventErrorMessage, setEventErrorMessage] = useState(\"\");\n  const [noPaymenErrorMessage, setNoPaymenErrorMessage] = useState(\"\");\n  const [selectedPaymentDateErrorMessage, setSelectedPaymentDateErrorMessage] = useState(\"\");\n  // Dirección checks\n  const [checked, setChecked] = React.useState(\"principal\");\n  const handleToggle = (value) => () => {\n    setChecked(value);\n  };\n  const [checkedFN, setCheckedFN] = React.useState(\"principal\");\n  const handleToggleFN = (value) => () => {\n    setCheckedFN(value);\n  };\n\n  // Toggle butons\n  const [paymentChannel, setPaymentChannel] = React.useState('online');\n  const [invoiceCheck, setInvoiceCheck] = React.useState(\"no\");\n\n  // Change total Dialog\n  const [openTotalDialog, setOpenTotalDialog] = React.useState(false);\n\n  ///////////////////////////////////////////////////////////////////////\n  // PaymentDialog\n  const [paymentEmailAdditional, setPaymentEmailAdditional] = useState(\"\");\n  const [isPaymentEmail, setIsPaymentEmail] = useState(false);\n  const [paymentEmailDialog, setPaymentEmailDialog] = React.useState(false);\n\n  const [toggledClearProductsRows, setoggledClearProductsRows] = useState(true)\n  const [productTableDisabled, setProductTableDisabled] = useState(false)\n\n  // VISIT\n  const [visit, setVisit] = useState({});\n  const [visit_number, setVisitNumber] = useState(1);\n\n  const handleClickOpenTotalDialog = () => {\n    setOpenTotalDialog(true);\n  };\n\n  function updateAssignQuotation(assignedId) {\n    const quotation = quotations.find(quotation => quotation.id === assignedId)\n    setFeeAmount(0)\n    // setHourAmout(0)\n    // setConsumableAmount(quotation?.spare_parts_amount || consumableAmount)\n    setSparePartsAmount(quotation?.spare_parts_amount)\n    setLaborAmount(quotation.labor_amount)\n    setViaticAmout(quotation.viatic_amount)\n    setFeeAmount(0)\n  }\n\n  useEffect(() => {\n    if (!assignedQuotationId) return;\n    if (noPaymentOption != 'Pagado en cotización') return;\n\n    fetchServiceTotal(country, selectedProductRows.map((product) => product.id), zipcode, administrative_demarcation.admin_name_3, true)\n    \n  }, [assignedQuotationId, paymentChannel])\n\n  useEffect(() => {\n    if (noPaymentCheck) return;\n    setAssignedQuotationId(0)\n    fetchServiceTotal(country, selectedProductRows.map((product) => product.id), zipcode, administrative_demarcation.admin_name_3, true)\n   }, [noPaymentCheck, noPaymentOption])\n\n  function handleAssignedQuotation(event) {\n    setAssignedQuotationId(event.target.value)\n    updateAssignQuotation(event.target.value)\n\n    console.log({currentValue: event.target.value});\n  }\n\n  const handleCloseTotalDialog = () => {\n    setOpenTotalDialog(false);\n  };\n\n  const spare_part_columns = [\n    {\n      name: i18next.t('globalTables.customerProductColumns.tnr'),\n      selector: 'spare_part.tnr',\n      sortable: true,\n      hide: 'sm',\n    },\n    {\n      name: i18next.t('globalTables.customerProductColumns.name'),\n      selector: 'spare_part.name',\n      sortable: true,\n      hide: 'md',\n    },\n    {\n      name: i18next.t('globalTables.sparePartColumnsNoActions.quantity'),\n      selector: 'quantity',\n      sortable: true,\n      hide: 'md',\n    },\n    {\n      name: i18next.t('globalTables.sparePartColumns.actions'),\n      selector: 'id',\n      grow: true,\n      minWidth: \"190px\",\n      cell: row => (\n        <span>\n          <EditSparePartDialog key={\"EditSparePartDialog\" + row.id} service_id={row.service_id} service_spare_part_id={row.id} tnr={row.spare_part.tnr} name={row.spare_part.name} quantity={row.quantity} requested_quantity={row.requested_quantity} from={\"prediagnosis\"} headers={headers} callbacks={serviceCallbacks} />\n          <DeleteSparePartDialog key={\"DeleteSparePartDialog\" + row.id} service_id={row.service_id} service_spare_part_id={row.id} tnr={row.spare_part.tnr} name={row.spare_part.name} from={\"prediagnosis\"} headers={headers} callbacks={serviceCallbacks} />\n        </span>\n      ),\n    }\n  ];\n\n  ///////////////////////////////////////////////////////////////////////\n  // Efects\n  //////////////////////////////////////////////////////////////////////\n  useEffect(() => {\n\n    fetchData();\n    fetchServiceData();\n  }, []);\n\n  async function fetchData() {\n    let userId = props.match.params.id;\n    const costCentersFetch = await CostCenterApi.getAllCostCenters()\n    setCostCenters(costCentersFetch.data)\n    return fetch(`/api/v1/customers/${userId}`)\n      .then(response => response.json())\n      .then(json => {\n        console.log(json);\n\n        setCustomerId(json.data.id)\n        setCustomerFirstname(json.data.names)\n        setCustomerLastname(json.data.lastname)\n        setCustomerSurname(json.data.surname)\n        setCustomerEmail(json.data.email)\n        setZipcode(json.data.zipcode)\n        setState(json.data.state)\n        setDelegation(json.data.delegation)\n        setColony(json.data.colony)\n        setStreettype(json.data.street_type)\n        setStreetName(json.data.street_name)\n        setExtNumber(json.data.ext_number)\n        setIntNumber(json.data.int_number)\n        setPhone(json.data.phone)\n        setReference(json.data.reference)\n        setSelectedPerson(json.data.person_type)\n        setZipcodeFn(json.data.zipcode_fn)\n        setStateFn(json.data.state_fn)\n        setDelegationFn(json.data.delegation_fn)\n        setColonyFn(json.data.colony_fn)\n        setStreettypeFn(json.data.street_type_fn)\n        setStreetNameFn(json.data.street_name_fn)\n        setExtNumberFn(json.data.ext_number_fn)\n        setIntNumberFn(json.data.int_number_fn)\n        setPhoneFn(json.data.phone_fn)\n\n        if (json.data.country != null) {\n          setCountry(json.data.country.iso)\n          setCountryChange(true)\n          setCountryIVA(json.data.country.iva)\n        }\n        setAdministrativeDemarcation(json.data.administrative_demarcation)\n        setAdministrativeDemarcationFn(json.data.administrative_demarcation_fn)\n        setRut(json.data.rut)\n        if (json.data.additional_addresses != null) {\n          setAdditionalsAddresses(json.data.additional_addresses)\n        }\n        setPolicies(json.data.policies)\n        // HANDLRE COUNTRY INFO\n        handleCountryInputs(json.data.country.iso)\n\n      })\n  }\n  async function fetchServiceData() {\n    let service_id = props.match.params.service_id;\n    return fetch(`/api/v1/services/${service_id}`)\n      .then(response => response.json())\n      .then(json => {\n\n        // Handle service data\n        setTotalAmount(json.total_amount)\n        setFirstLoad(true)\n        if (json.service_type) {\n          setServiceType(json.service_type)\n          handleServiceTypeChange(json.service_type)\n        }\n        if (json.subcategory) {\n          setSubcategory(json.subcategory)\n        }\n\n        setServiceID(json.id)\n        setServiceNumber(json.number)\n        setServiceStatusLabel(json.status_label)\n\n        setRequested(json.requested)\n        setRequestChannel(json.request_channel)\n        setTechinicianNumber(json.technicians_number)\n        setHourAmout(json.hour_amount)\n        setFeeAmount(json.fee_amount)\n        setTotalhours(json.total_hours)\n        setSelectedCostCenterId(json.cost_center_id)\n        setDistributorName(json.distributor_name)\n        setDistributorEmail(json.distributor_email)\n        setQuotations(json.quotations)\n        setAssignedQuotationId(json.new_visit.assigned_quotation_id)\n        console.log({assigned_quotation_id: json.new_visit.assigned_quotation_id});\n\n        if (json.requested) {\n          setDistributorCheck(json.requested != \"Cliente directo\" ? \"\" : \"hidden\")\n        }\n        setSelectedProductRows(json.customer_products.filter(customer_product => customer_product.status != \"Servicio completado\"));\n\n        setBackground(json.background)\n        setNoPaymentCheck(json.no_payment)\n        setPaymentChannel(json.payment_channel)\n        setSelectedPaymentDate(json.payment_date)\n        setNoPaymentOption(json.no_payment_reason)\n        setInvoiceCheck(json.invoice ? \"si\" : \"No\")\n        setProducts(json.customer_products)\n        setServiceFiles(json.file_resources)\n        setPaymentFiles(json.payment_resources)\n        setPrincipalTechnician(json.principal_technician)\n        setIBSNumber(json.ibs_number)\n\n\n\n        if (json.calendar_events.length > 0) {\n          setTechnicians(json.technicians)\n          //setEvent({start: json.calendar_events[0].start_date, end: json.calendar_events[0].finish_date})\n          setServiceTechnicians(json.service_technicians)\n\n        }\n\n        setSelectedConsumables(json.service_products)\n        setConsumableAmount(json.service_products.map(item => item.amount).reduce((prev, curr) => prev + curr, 0))\n        setSelectedConsumablesRows(json.service_products.map(function (consumable_row) {\n          return ({amount: String(consumable_row.amount), total_boxes: String(consumable_row.quantity), product_id: String(consumable_row.product_id)});\n        }));\n\n        setVisit(json.new_visit)\n        setTotalAmount(json.new_visit.total_amount)\n        setHourAmout(json.new_visit.hour_amount)\n        setFeeAmount(json.new_visit.fee_amount)\n        fetchVisitPayments((json.new_visit ? json.new_visit.id : json.id), \"Visita\")\n        if (json.visits.length > 0) {\n          setVisitNumber(json.visits.length + 1)\n        }\n\n\n        if (json.policy_id) {\n          setSelectedPoliciesRows(json.policy_id)\n          setCurrentPolicy(policies.find(policy => policy.id === json.policy_id))\n        } else {\n          setSelectedPoliciesRows(policies[0].id)\n          setCurrentPolicy(policies[0])\n        }\n\n      })\n  }\n\n\n\n  useEffect(() => {\n    if (noPaymentOption == 'Pagado en cotización') return\n\n    if (selectedProductRows) {\n      fetchServiceTotal(country, selectedProductRows.map((product) => product.id), zipcode, administrative_demarcation.admin_name_3, true)\n    }\n    fetchPolicyTotal(currentPolicy)\n\n  }, [service_type, selectedConsumablesRows, paymentChannel]);\n\n  useEffect(() => {\n    if (!serviceUpdated && service_type == 'Mantenimiento') {\n      setConsumableAmount(consumables.map(item => item.sub_total_consumable_amount_without_events).reduce((prev, curr) => prev + curr, 0))\n      setSelectedConsumablesRows(consumables.map(function (consumable_row) {\n        return ({amount: consumable_row.sub_total_consumable_amount_without_events, total_boxes: consumable_row.total_boxes_without_events, product_id: consumable_row.consumable.product_id});\n      }));\n    } else {\n      setConsumableAmount(0)\n    }\n  }, [consumables]);\n\n  useEffect(() => {\n    setPaymentLink(`${site_url(process.env.RAILS_ENV)}/payments?object_id=${(visit ? visit.id : serviceID)}&object_class=Visita&customer_id=${customer_id}&amount=${totalAmount}`)\n    props.getRequestedSpareParts(serviceID);\n  }, [serviceID]);\n\n\n  useEffect(() => {\n    if (isPaymentEmail) {\n      setPaymentEmailDialog(false);\n      if (!loading) {\n        setLoading(true);\n      }\n      saveService();\n    }\n  }, [isPaymentEmail]);\n\n  useEffect(() => {\n    if (!!assignedQuotationId) return\n\n    if (event.start != \"\") {\n      fetchServiceTotal(country, selectedProductRows.map((product) => product.id), zipcode, administrative_demarcation.admin_name_3, true, null, event)\n    }\n  }, [event]);\n\n  useEffect(() => {\n    fetchPolicyTotal(currentPolicy)\n  }, [currentPolicy]);\n\n\n  useEffect(() => {\n\n  }, [visit]);\n\n  useEffect(() => {\n    if (selectedPolicies) {\n      setPolicies(policies.filter(policy => policy.id == selectedPolicies))\n    }\n  }, [selectedPolicies]);\n\n\n  function serviceCallbacks() {\n    fetchData();\n    fetchServiceData();\n  }\n\n  //////////////////////////////////////////////////////////////////\n  /// Functions\n  function fetchPolicyTotal(policy_new) {\n    if (service_type == 'Póliza de Mantenimiento') {\n      if (policy_new) {\n        setSelectedProductRows(policy_new.policy_customer_products.map((policy_customer_product) => policy_customer_product.customer_product))\n        fetchServiceTotal(country, policy_new.policy_customer_products.map((policy_customer_product) => policy_customer_product.customer_product.id), zipcode, administrative_demarcation.admin_name_3, true, true)\n        setHourAmout(0)\n        setFeeAmount(policy_new.viatic_price)\n        setConsumableAmount(policy_new.items_price)\n        setLaborAmount(policy_new.labor_price)\n        setSubtotalAmount(policy_new.total_price)\n        setIVAAmount(policy_new.total_price * countryIVA)\n        setTotalAmount(policy_new.total_price * (countryIVA + 1))\n      }\n    }\n  }\n\n  function fetchServiceTotal(country_code, products_ids, zipcode_t, administrative_demarcation_name_t, from_consumables = false, from_policy = false, event_local = null) {\n    console.log(\"Calculo el total\")\n    console.log(event_local)\n    if (event_local) {\n      var time_diff = date_difference_in_hours(event.start, event.end)\n      console.log(time_diff)\n    }\n\n    if (products_ids.length > 0) {\n      const params = {\n        country: `${country_code}`,\n        products_ids: `${products_ids}`,\n        service_type: `${service_type}`,\n        subcategory: `${subcategory}`,\n        zipcode: `${zipcode_t}`,\n        administrative_demarcation_name: `${administrative_demarcation_name_t}`,\n        viatic_value: viaticAmout,\n        fee_amount: feeAmount,\n        labor_price: laborAmount,\n        quotation_id: assignedQuotationId \n      }\n\n      if (event_local) {\n        params.time_diff = time_diff\n      }\n      return axios.get(`/api/v1/services/${serviceID}/total_price`, {params})\n        .then(({data: json})=> {\n          if (json.data) {\n            setTechinicianNumber(json.data.total_technicians)\n            setTotalhours(json.data.total_hours)\n\n\n            if (!from_policy) {\n\n              setViaticAmout(json.data.viatic_value)\n\n              setHourAmout(json.data.hour_amount)\n              setFeeAmount(json.data.fee_amount)\n              // setSparePartsAmount(json.data.spare_parts_amount)\n              setLaborAmount(json.data.labor_price)\n              if (service_type == 'Home Program' || (service_type == 'Reparación' && subcategory == \"Profesional\")) {\n                setFeeAmountIncrement(json.data.fee_amount_increment)\n                if (time_diff && time_diff > 0) {\n                  setTotalhours(time_diff)\n                }\n\n              }\n            }\n            if (!firstLoad) {\n              if (service_type == 'Póliza de Mantenimiento') {\n                //setSubtotalAmount(json.data.total_amount + consumableAmount)\n                //setIVAAmount((json.data.total_amount + consumableAmount) * json.data.iva )\n                //setTotalAmount((json.data.total_amount + consumableAmount) * (1+ json.data.iva))\n              } else {\n                setSubtotalAmount(json.data.subtotal_amount + consumableAmount)\n                setIVAAmount((json.data.subtotal_amount + consumableAmount) * countryIVA)\n                setTotalAmount(json.data.total_amount + consumableAmount)\n              }\n            } else {\n              if (!from_policy) {\n                setIVAAmount(json.data.iva_amount)\n                setSubtotalAmount(json.data.subtotal_amount)\n                if (totalAmount != 0) {\n                  setTotalAmount(json.data.total_amount)\n                }\n              }\n            }\n            setFirstLoad(false)\n            if (!from_consumables) {\n              setConsumables(json.consumables.data.items)\n            }\n          } else {\n            console.log(\"No hay precio.\")\n          }\n        })\n        .catch(error => console.log(error));\n    }\n  }\n\n\n  function fetchVisitPayments(object_id, object_class) {\n    return fetch(`/api/v1/payments?object_id=${object_id}&object_class=${object_class}`)\n      .then(response => response.json())\n      .then(json => {\n        if (json.data) {\n          if (json.data.length > 0 && json.data[0].status == \"completed\") {\n            setServiceStatus(\"created\")\n          }\n          setPaymentData(json.data)\n\n\n        } else {\n          console.log(\"No hay precio.\")\n        }\n      })\n      .catch(error => console.log(error));\n  }\n\n  function validateForm() {\n    let messages = [];\n\n    if (selectedProductRows.length == 0) {\n      messages.push(t('customer.newService.flashAlert.selectedProductRows'))\n    }\n    if (service_type == \"\" || service_type == null) {\n      messages.push(\"Debe seleccionar el tipo de servicio a solicitar\")\n      setServiceTypeErrorMessage(t('customer.newService.flashAlert.serviceType'))\n    }\n    if (subcategory == \"\" || subcategory == null) {\n      messages.push(\"Debe seleccionar la subcategoria de servicio a solicitar\")\n      setSubcategoryErrorMessage(t('customer.newService.flashAlert.subCategory'))\n    }\n    if (requested == \"\" || requested == null) {\n      messages.push(\"Debe indicar como fue solicitado el servicio\")\n      setRequestedErrorMessage(t('customer.newService.flashAlert.requested'))\n    }\n    if (requestChannel == \"\" || requestChannel == null) {\n      messages.push(\"Debe indicar el canal de la solicitud\")\n      setRequestChannelErrorMessage(t('customer.newService.flashAlert.requestChannel'))\n    }\n\n    if ((background == \"\" || background == null) && service_type != 'Póliza de Mantenimiento') {\n      messages.push(t('customer.newService.flashAlert.indicateProblem'))\n      setBackgroundErrorMessage(\"Debe indicar antecedentes del problema\")\n    }\n\n    if (event.start == \"\" || event.start == null) {\n      messages.push(t('customer.newService.flashAlert.startDate'))\n      setEventErrorMessage(\"Debe seleccionar una fecha\")\n\n    }\n\n    if (noPaymentCheck) {\n      if (noPaymentOption == \"\" || noPaymentOption == null) {\n        messages.push(t('customer.newService.flashAlert.noPaymentOption'))\n        setNoPaymenErrorMessage(\"Debe seleccionar una opcción de no pago\")\n\n      }\n\n    } else {\n      if (selectedPaymentDate == \"\" || selectedPaymentDate == null) {\n        messages.push(t('customer.newService.flashAlert.selectedPaymentDate'))\n        setSelectedPaymentDateErrorMessage(\"Debe seleccionar fecha limite de pago\")\n\n      }\n\n    }\n\n    if (service_type == 'Póliza de Mantenimiento' && selectedPolicies == \"\") {\n      messages.push(t('customer.newService.flashAlert.selectedPolicies'))\n    }\n\n    messages.forEach(element => {\n      flash_alert(t('customer.newService.flashAlert.attention'), element, \"warning\")\n    });\n\n    if (messages.length > 0) {\n      return false;\n    } else {\n      return true;\n    }\n  }\n\n  function saveService(redirect_param = true, schedule_visit) {\n    var body = new FormData();\n    body.set('service_id', serviceID);\n    body.set('customer_id', customer_id);\n    if (visit) {\n      body.set('visit_id', visit.id);\n    }\n    body.set('address', checked);\n\n    if (redirect_param && noPaymentOption == 'Pagado en cotización') {\n      body.set('assigned_quotation_id', assignedQuotationId)\n    }\n\n    body.set('spare_parts_amount', sparePartsAmount);\n    body.set('address_fn', checkedFN);\n    body.set('service_type', service_type);\n    body.set('subcategory', subcategory);\n    body.set('requested', requested);\n    body.set('request_channel', requestChannel);\n    body.set('distributor_name', distributorName);\n    body.set('distributor_email', distributorEmail);\n    body.set('customer_products_id', selectedProductRows.map(function (product_row) {\n      return (product_row.id);\n    }));\n\n\n\n    // Service Totals\n    body.set('technicians_number', techinicianNumber);\n    body.set('hour_amount', hourAmout);\n    body.set('fee_amount', feeAmount);\n    body.set('labor_amount', laborAmount);\n    body.set('viatic_amount', viaticAmout);\n    body.set('subtotal_amount', subtotalAmount);\n    body.set('iva_amount', ivaAmount);\n    body.set('total_hours', totalhours);\n    body.set('total_amount', totalAmount);\n\n\n    body.set('background', background);\n    body.set('no_payment', noPaymentCheck);\n    body.set('payment_channel', paymentChannel);\n    body.set('payment_date', selectedPaymentDate);\n    body.set('no_payment_reason', noPaymentOption);\n    body.set('invoice', (invoiceCheck === \"si\" ? true : false));\n    body.set('status', (schedule_visit ? schedule_visit : serviceStatus));\n    body.set('event_start', event.start);\n    body.set('event_end', event.end);\n    body.set('technicians_ids', technicians_ids);\n    body.set('payment_state', ((paymentData.length > 0 && paymentData[0].status == \"completed\") ? \"paid\" : \"pending\"));\n    body.set('customerEmail', customerEmail);\n    body.set('paymentEmailAdditional', paymentEmailAdditional);\n    body.set('isPaymentEmail', isPaymentEmail);\n    body.set('from', from);\n\n    if (service_type == 'Póliza de Mantenimiento') {\n      body.set('policy_id', selectedPolicies);\n    }\n\n    files.forEach((file) => {\n      body.append('images[]', JSON.stringify(file));\n    });\n\n    if (consumables) {\n      body.append('consumables[]', \"{}\");\n    }\n\n    selectedConsumablesRows.forEach((consumable) => {\n      body.append('consumables[]', JSON.stringify(consumable));\n    });\n\n    return axios.post(`/api/v1/services/${serviceID}/visits`, body, {headers: headers})\n      .then(response => {\n        if (redirect_param) {\n          flash_alert(t('customer.showCustomer.flashAlert.success'), t('customer.showCustomer.flashAlert.updateService'), \"success\")\n        }\n        setRedirect(redirect_param);\n      })\n      .catch(e => {\n        if (e.response.data) {\n          console.log(e.response)\n          setLoading(false);\n          for (var key in e.response.data) {\n            flash_alert(\"Error\", e.response.data[key], \"danger\")\n          }\n        }\n      });\n  }\n\n\n  //////////////////////////////////////////////////////////////////\n  /// Handles\n\n  const handlepaymentChannel = (event, newpaymentChannel) => {\n    if (newpaymentChannel == \"online\" || newpaymentChannel == \"transfer\") {\n      setServiceStatus(\"created\")\n    }\n    setPaymentChannel(newpaymentChannel);\n  };\n  const handleInvoiceCheckChange = (event) => {\n    setInvoiceCheck(event.target.value);\n  };\n\n  const handlePaymentDateChange = (date) => {\n    setSelectedPaymentDate(date);\n  };\n\n\n  function handleCountryInputs(country_iso) {\n    if (country_iso == \"CL\") {\n      setPersonCheck(\"hidden\");\n      setZipcodeCheck(\"hidden\");\n      setDelegationCheck(\"hidden\");\n      setColonyCheck(\"hidden\");\n      setStateLabel(\"Comuna/Región\");\n      setExtNumberLabel(\"Número\");\n      setIntNumberLabel(\"Depto\");\n      setRUTCheck(\"\");\n    } else {\n      setPersonCheck(\"\");\n      setRUTCheck(\"hidden\");\n      setZipcodeCheck(\"\");\n      setDelegationCheck(\"\");\n      setColonyCheck(\"\");\n      setStateLabel(\"Estado\");\n      setExtNumberLabel(\"Número Exterior\");\n      setIntNumberLabel(\"Número Interior\");\n    }\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    if (!validateForm()) {\n      setLoading(false);\n      return false;\n    }\n    if (paymentChannel == \"online\" || paymentChannel == \"transfer\") {\n      setPaymentEmailDialog(true)\n    } else {\n      if (!loading) {\n        setLoading(true);\n      }\n      saveService();\n    }\n  }\n\n  function handleServiceTypeChange(e) {\n    setServiceType(e)\n    const serviceTypes = serviceTypeLabels(i18next.language)\n    console.log({serviceTypes})\n    const serviceTypeKey = Object.keys(serviceTypes).find(serviceTypeLabel => serviceTypes[serviceTypeLabel].key === e)\n    setSubcategory('')\n    const subcategories = serviceTypeSubcategories(i18next.language)\n    setSubcategoryOptions(subcategories[serviceTypeKey])\n\n    if (e === 'Reparaciones en Taller') {\n      if (selectedProductRows.length > 0) {\n        setoggledClearProductsRows(false)\n      } else {\n        setoggledClearProductsRows(true)\n      }\n      setProductTableDisabled(false)\n    } else {\n      setoggledClearProductsRows(true)\n      setProductTableDisabled(false)\n    }\n  }\n\n  function handleRequestedChange(e) {\n    setRequested(e.target.value)\n    const requestedDistributor = requestedLabels(i18next.language).find(requested => requested.key === 'Distribuidor autorizado')?.key || null\n    if (e.target.value === requestedDistributor) {\n      setDistributorCheck('')\n    } else {\n      setDistributorCheck('hidden')\n    }\n  }\n\n  async function onServiceChangeFiles(e) {\n    if (e.length > 0) {\n      const dT = [];\n      e.forEach(async function (item) {\n\n        await getBase64(item)\n          .then((encFile) => {\n            dT.push(encFile)\n            setFiles(dT);\n          }).catch(error => console.log(\"error\"));\n\n      });\n\n    }\n  };\n\n  function handleProductRowChange(state) {\n    // setoggledClearProductsRows\n    setoggledClearProductsRows(true)\n    setSelectedProductRows(state.selectedRows)\n    fetchServiceTotal(country, state.selectedRows.map((product) => product.id), zipcode, administrative_demarcation?.admin_name_3)\n    if (service_type == 'Reparaciones en Taller' && state.selectedRows.length > 0) {\n      setProductTableDisabled(true)\n    }\n  }\n\n  function handlePolicyRowChange(policy) {\n    setCurrentPolicy(policy);\n    setSelectedPoliciesRows(policy.id);\n  }\n\n  function handleConsumableRowChange(state) {\n    if (service_type == 'Mantenimiento') {\n      setConsumableAmount(state.selectedRows.map(item => item.sub_total_consumable_amount_without_events).reduce((prev, curr) => prev + curr, 0))\n    } else {\n      setConsumableAmount(0)\n    }\n    setSelectedConsumablesRows(state.selectedRows.map(function (consumable_row) {\n      return ({amount: consumable_row.sub_total_consumable_amount_without_events, total_boxes: consumable_row.total_boxes_without_events, product_id: consumable_row.consumable.product_id});\n    }));\n  }\n\n  function consumableSelectableRowCriteria(row) {\n    if (selectedConsumablesRows.length > 0) {\n      return selectedConsumablesRows.find(product => product.product_id === row.consumable.product_id) != undefined;\n    } else {\n      return true;\n    }\n  }\n\n\n  function handleMessage(message, type) {\n    if (type == \"error\") {\n      flash_alert(\"\", t('services.visits.flashAlert.fileExceedLimit'), \"error\")\n    }\n  }\n\n  function getBase64(file) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(file);\n      reader.onload = () => resolve({\n        uri_64: reader.result,\n        name: file.name,\n        mime: file.type,\n      });\n      reader.onerror = error => reject(error);\n    });\n  }\n\n  //////////////////////////////////////////////////////////////////\n\n  let redirect_check = []\n  if (redirect) {\n    redirect_check.push(\n      <Redirect key=\"redirect-to-customers\" to={`/customers/${customer_id}/services/${serviceID}/edit_service`}><EditService setLoading={setLoading} headers={props.headers} match={props.match} current_user={props.current_user} /></Redirect>\n    );\n  }\n\n  return (\n    <React.Fragment>\n      {redirect_check}\n\n      <Paper className=\"custom-paper\">\n        <Grid container spacing={3}>\n          <Link className=\"mdl-navigation__link  back-link back-link\" to={`/customers/${customer_id}/services/${serviceID}/edit_service`}>\n            <i className=\"material-icons\">keyboard_arrow_left</i> {t('globalText.back')}\n          </Link>\n          <Grid item xs={12}>\n            <h1>{t('customer.showCustomer.visitNumber')} {visit_number} - {t('customer.showCustomer.services')} {serviceNumber}</h1>\n          </Grid>\n        </Grid>\n\n      </Paper>\n\n      <CustomerDetails\n        customer_id={customer_id}\n        country_names={country_names_g}\n        country={country}\n        zipcode={zipcode}\n        personCheck={personCheck}\n        selectedPerson={selectedPerson}\n        rut={rut}\n        RUTCheck={RUTCheck}\n        zipcodeCheck={zipcodeCheck}\n        stateLabel={stateLabel}\n        administrative_demarcation={administrative_demarcation}\n        state={state}\n        delegationCheck={delegationCheck}\n        delegation={delegation}\n        colony={colony}\n        street_type={street_type}\n        street_name={street_name}\n        ext_number={ext_number}\n        int_number={int_number}\n        phone={phone}\n        reference={reference}\n        additionalsAddresses={additionalsAddresses}\n        colonyCheck={colonyCheck}\n        extNumberLabel={extNumberLabel}\n        intNumberLabel={intNumberLabel}\n        headers={headers}\n      />\n\n      <br />\n\n      <ServiceInfoForm\n        costCenters={costCenters}\n        setSelectedCostCenterId={setSelectedCostCenterId}\n        selectedCostCenterId={selectedCostCenterId}\n        submit_type=\"new_visit\"\n        spare_part_columns={spare_part_columns}\n        requested_spare_parts={props.requested_spare_parts}\n        classes={classes}\n        service_typeErrorMessage={service_typeErrorMessage}\n        service_type={service_type}\n        service_types_g={service_types_g}\n        handleServiceTypeChange={handleServiceTypeChange}\n        subcategoryErrorMessage={subcategoryErrorMessage}\n        subcategory={subcategory}\n        setSubcategory={setSubcategory}\n        subcategoryOptions={subcategory_options}\n        requestedErrorMessage={requestedErrorMessage}\n        requested={requested}\n        handleRequestedChange={handleRequestedChange}\n        requestedBy={requestedLabels(i18next.language)}\n        requestChannelErrorMessage={requestChannelErrorMessage}\n        requestChannel={requestChannel}\n        setRequestChannel={setRequestChannel}\n        channels={channels}\n        distributorCheck={distributorCheck}\n        distributorName={distributorName}\n        distributorEmail={distributorEmail}\n        setDistributorName={setDistributorName}\n        setDistributorEmail={setDistributorEmail}\n        policies={policies}\n        country={country}\n        handlePolicyRowChange={handlePolicyRowChange}\n        selectedPolicies={selectedPolicies}\n        products={products}\n        product_columns={product_columns}\n        handleProductRowChange={handleProductRowChange}\n        selectedProductRows={selectedProductRows}\n        consumables={consumables}\n        consumable_columns={consumable_columns}\n        handleConsumableRowChange={handleConsumableRowChange}\n        consumableSelectableRowCriteria={consumableSelectableRowCriteria}\n        background={background}\n        setBackground={setBackground}\n        backgroundErrorMessage={backgroundErrorMessage}\n        onServiceChangeFiles={onServiceChangeFiles}\n        handleMessage={handleMessage}\n        serviceFiles={serviceFiles}\n        setServiceFiles={setServiceFiles}\n        toggledClearProductsRows={toggledClearProductsRows}\n        productTableDisabled={productTableDisabled}\n  />\n\n      <br />\n\n      <Paper className=\"custom-paper\">\n        <h1 className=\"panel-custom-title\">{t('services.visits.instalationAddress')}</h1>\n\n        <List>\n\n          <ListItem key=\"principal\" role={undefined} dense button selected={checked == \"principal\"}>\n            <ListItemIcon className=\"service-address-label\">\n              <FormControlLabel value=\"principal\" control={<Radio color=\"primary\" />} label=\"\" checked={checked == \"principal\"} disabled\n                tabIndex={-1}\n              />\n\n            </ListItemIcon>\n            <ListItemText\n              id={\"radio-address-list-label-principal\"}\n              primary={\"Principal\"}\n              secondary={`${street_type} ${street_name}, ${ext_number} ${int_number}, ${administrative_demarcation != null ? administrative_demarcation.admin3_admin1 : state}${zipcode != \"\" ? (\", Código Postal: \" + zipcode) : \"\"}`}\n            />\n            <ListItemSecondaryAction>\n\n            </ListItemSecondaryAction>\n          </ListItem>\n          {additionalsAddresses.map((additional_address) => {\n            const labelId = `radio-address-list-label-${additional_address.id}`;\n            return (\n              <ListItem key={additional_address.id} role={undefined} dense button selected={checked == additional_address.id}>\n                <ListItemIcon className=\"service-address-label\">\n                  <FormControlLabel value={additional_address.id} control={<Radio color=\"primary\" />} label=\"\" checked={checked == additional_address.id} disabled\n                    tabIndex={-1}\n                  />\n\n                </ListItemIcon>\n                <ListItemText\n                  id={labelId}\n                  primary={additional_address.name}\n                  secondary={`${additional_address.street_type} ${additional_address.street_name}, ${additional_address.ext_number} ${additional_address.int_number}, ${additional_address.administrative_demarcation != null ? additional_address.administrative_demarcation.admin3_admin1 : additional_address.state}${additional_address.zipcode != \"\" ? (\", Código Postal: \" + additional_address.zipcode) : \"\"}`}\n                />\n                <ListItemSecondaryAction>\n\n                </ListItemSecondaryAction>\n              </ListItem>\n            );\n          })}\n        </List>\n      </Paper>\n\n      <br />\n\n      <Paper className=\"custom-paper\">\n        <h1 className=\"panel-custom-title\">{t('customer.newService.diary.title')}</h1>\n        <Grid container spacing={2}>\n          <Grid item xs={12} sm={6}>\n            <p className=\"service-subtitle\">{t('customer.newService.diary.subTitle')}</p>\n            {(country_change) &&\n              <NewScheduleDialog\n                schedule_type=\"service\"\n                btn_classname={\"\"}\n                btn_text={t('customer.newService.diary.calendarButton')}\n                customer_id={customer_id}\n                country={country}\n                selectedProductRows={selectedProductRows}\n                service_type={service_type}\n                subcategory={subcategory}\n                requested={requested}\n                techinicianNumber={techinicianNumber}\n                zipcode={zipcode}\n                administrative_demarcation={administrative_demarcation}\n                setTechinicianNumber={setTechinicianNumber}\n                event={event}\n                setEvent={setEvent}\n                technicians_ids={technicians_ids}\n                setTechniciansIds={setTechniciansIds}\n                saveService={saveService}\n                technicians={technicians}\n                setTechnicians={setTechnicians}\n                totalhours={totalhours}\n              />\n            }\n            <FormHelperText className=\"brand-error-message\">{eventErrorMessage}</FormHelperText>\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            {event.start != \"\" &&\n              <Grid container spacing={2}>\n                <Grid item xs={12}>\n                  <p className=\"service-subtitle\">{t('customer.newService.diary.selectedDate')}</p>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <span className=\"service-price-table-label\">{t('customer.newService.diary.dayAndHour')}</span>\n                  <span className=\"service-scheddule-value\">{date_event_format(event.start, event.end)}</span>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <span className=\"service-price-table-label\">{t('customer.newService.diary.duration')}</span>\n                  <span className=\"service-scheddule-value\">{date_difference_in_hours(event.start, event.end)} {pluralize(\"hora\", date_difference_in_hours(event.start, event.end))}</span>\n                </Grid>\n                <Grid item xs={12}>\n                  <span className=\"service-price-table-label\">{t('customer.newService.diary.technicians')}</span>\n                  <span className=\"service-scheddule-value\">\n                    {technicians && technicians.map((technician, index) => (\n                      <span>\n                        {technician.user && ((technician.enterprise != \"\" && technician.enterprise != null) ? technician.user.fullname + \" (\" + technician.enterprise + \")\" : technician.user.fullname)}{index != technicians.length - 1 ? \",\" : \"\"}&nbsp;\n                      </span>\n                    ))}\n                  </span>\n                </Grid>\n\n              </Grid>\n\n            }\n          </Grid>\n        </Grid>\n      </Paper>\n\n      <br />\n\n      <Paper className=\"custom-paper\">\n        <h1 className=\"panel-custom-title\">{t('customer.newService.paymentService.title')}</h1>\n        <Grid container spacing={2}>\n          <Grid item xs={12} sm={8}>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <p className=\"service-subtitle\">{t('customer.newService.paymentService.subTitle')}</p>\n                <FormControlLabel value={noPaymentCheck} control={<Checkbox color=\"primary\" />} label={t('customer.newService.paymentService.nopay')} checked={noPaymentCheck}\n                  tabIndex={-1} onChange={(e) => setNoPaymentCheck(!noPaymentCheck)}\n                />\n              </Grid>\n            </Grid>\n            <Grid container spacing={2} className={noPaymentCheck ? \"\" : \"hidden\"}>\n              <Grid item xs={12}>\n                <FormControl variant=\"outlined\" className=\"MuiFormControl-fullWidth\">\n                  <InputLabel id=\"noPaymentOption-simple-select-outlined-label\">{t('customer.newService.paymentService.reasonForNonPayment')}</InputLabel>\n                  <Select\n                    labelId=\"noPaymentOption-simple-select-outlined-label\"\n                    id=\"noPaymentOption-simple-select-outlined\"\n                    value={noPaymentOption}\n                    onChange={(e) => setNoPaymentOption(e.target.value)}\n                    label={t('customer.newService.paymentService.reasonForNonPayment')}\n                    name=\"noPaymentOption\"\n                    error={noPaymenErrorMessage != \"\"}\n                  >\n                    {noPaymentsOptions.map((value) => (\n                      <MenuItem key={\"noPaymentOption-\" + value} value={value}>{value}</MenuItem>\n                    ))}\n                  </Select>\n                  <FormHelperText className=\"brand-error-message\">{noPaymenErrorMessage}</FormHelperText>\n                </FormControl>\n              </Grid>\n              {\n                noPaymentOption == 'Pagado en cotización' &&\n                <Grid item xs={12}>\n                  <FormControl variant=\"outlined\" fullWidth>\n                    <InputLabel id=\"assignedQuotation-label\">{t('visits.quotes.title')}</InputLabel>\n                    <Select\n                      labelId=\"assignedQuotation-label\"\n                      value={assignedQuotationId}\n                      onChange={handleAssignedQuotation}\n                      label=\"Cotización\"\n                    >\n                      {quotations.map((quotation) => (\n                        <MenuItem disabled={!!quotation.assigned_visit_id} key={`assignedQuotation-${quotation.id}`} value={quotation.id}>{`Cotización N° ${quotation.quotation_number}`}</MenuItem>\n                      ))}\n                    </Select>\n                  </FormControl>\n                </Grid>\n              }\n            </Grid>\n            <Grid container spacing={2} className={noPaymentCheck ? \"hidden\" : \"\"}>\n              <Grid item xs={12}>\n                <ToggleButtonGroup\n                  value={paymentChannel}\n                  exclusive\n                  onChange={handlepaymentChannel}\n                  aria-label=\"text paymentChannel\"\n                  className=\"service-payment-method-group\"\n                >\n                  <ToggleButton className=\"service-payment-method-btn\" value=\"online\" aria-label=\"online\">\n                    {t('customer.newService.paymentService.paymentMethod.online')}\n                  </ToggleButton>\n\n                  <ToggleButton className=\"service-payment-method-btn\" value=\"transfer\" aria-label=\"transfer\">\n                    {t('customer.newService.paymentService.paymentMethod.transfer')}\n                  </ToggleButton>\n\n                  <ToggleButton className=\"service-payment-method-btn\" value=\"phone\" aria-label=\"phone\">\n                    {t('customer.newService.paymentService.paymentMethod.payForphone')}\n                  </ToggleButton>\n\n                  <ToggleButton className=\"service-payment-method-btn\" value=\"pay_at_home\" aria-label=\"pay_at_home\">\n                    {t('customer.newService.paymentService.paymentMethod.payAtHome')}\n                  </ToggleButton>\n\n                  <ToggleButton className=\"service-payment-method-btn\" value=\"bank_deposit\" aria-label=\"bank_deposit\">\n                    {t('customer.newService.paymentService.paymentMethod.bankDeposit')}\n                  </ToggleButton>\n                </ToggleButtonGroup>\n              </Grid>\n              <Grid item xs={12} className={paymentData.length > 0 ? \"\" : \"hidden\"}>\n                {\n                  paymentData.length > 0 && paymentData[0].status == \"completed\" ? <p>{t('customer.newService.paymentService.paymentCompleted')}</p> : \"\"\n                }\n              </Grid>\n              <Grid item xs={12} className={paymentChannel == \"phone\" ? \"\" : \"hidden\"}>\n                {\n                  (paymentData.length > 0 && paymentData[0].status != \"completed\" && totalAmount > 0) || paymentData.length < 1 ?\n                    <PaymentMethods\n                      cols={4}\n                      country={country}\n                      serviceID={(visit ? visit.id : serviceID)}\n                      customer_id={customer_id}\n                      totalAmount={totalAmount}\n                      object_class={\"Visita\"}\n                      onPaymentCallback={() => saveService(false)}\n                    />\n                    : <p>{t('customer.newService.paymentService.productAndService')}</p>\n                }\n              </Grid>\n              <Grid item xs={12}>\n                <CopyToClipboard text={paymentLink}\n                  onCopy={() => flash_alert(\"Copiado\", \"Se ha copiado el enlace. Puede pegarlo en nueva ventana para verificar.\", \"success\")}>\n                  <a className=\"mdl-navigation__link brand-primary-link \"><i className=\"material-icons\">file_copy</i> {t('customer.newService.paymentService.copyPaymentLink')}</a>\n                </CopyToClipboard>\n              </Grid>\n              <Grid item xs={12}>\n                <p className=\"service-payemnt-method-p\">{t('customer.newService.paymentService.customerBill?')}</p>\n                <FormControlLabel value=\"si\" control={\n                  <Radio\n                    checked={invoiceCheck === \"si\"}\n                    onChange={handleInvoiceCheckChange}\n                    value={\"si\"}\n                    color=\"primary\"\n                    name=\"radio-button-invoice-check\"\n                    inputProps={{'aria-label': 'Si'}}\n                  />\n                } label={t('customer.newService.paymentService.yes')} />\n\n                <FormControlLabel value=\"no\" control={\n                  <Radio\n                    checked={invoiceCheck === \"no\"}\n                    onChange={handleInvoiceCheckChange}\n                    value={\"no\"}\n                    color=\"primary\"\n                    name=\"radio-button-invoice-check\"\n                    inputProps={{'aria-label': 'No'}}\n                  />\n                } label={t('customer.newService.paymentService.no')} />\n                {invoiceCheck === \"si\" &&\n                  <div>\n                    <p className=\"service-payemnt-method-p\">{t('customer.newService.paymentService.generateServiceButton')}</p>\n                    <List>\n                      <ListItem key=\"principal\" className=\"service-address-list-item\" role={undefined} dense button onClick={handleToggleFN(\"principal\")}>\n                        <ListItemIcon className=\"service-address-label\">\n                          <FormControlLabel value=\"principal\" control={<Radio color=\"primary\" />} label=\"\" checked={checkedFN == \"principal\"}\n                            tabIndex={-1}\n                          />\n\n                        </ListItemIcon>\n                        <ListItemText\n                          id={\"radio-address-list-label-principal\"}\n                          primary={\"Principal\"}\n                          secondary={`${street_type_fn} ${street_name_fn}, ${ext_number_fn} ${int_number_fn}, ${administrative_demarcation_fn != null ? administrative_demarcation.admin3_admin1 : state_fn}${zipcode_fn != \"\" ? (\", Código Postal: \" + zipcode_fn) : \"\"}`}\n                        />\n                        <ListItemSecondaryAction>\n\n                        </ListItemSecondaryAction>\n                      </ListItem>\n                      {/*additionalsAddresses.map((additional_address) => {\n                                            const labelId = `radio-address-list-label-${additional_address_fn.id}`;\n                                            return (\n                                            <ListItem key={additional_address.id} role={undefined} dense button onClick={handleToggle(additional_address.id)}>\n                                                <ListItemIcon className=\"service-address-label\">\n                                                <FormControlLabel value={additional_address.id} control={<Radio color=\"primary\"/>} label=\"\" checked={checked == additional_address.id}\n                                                    tabIndex={-1}\n                                                />\n                                                \n                                                </ListItemIcon>\n                                                <ListItemText \n                                                    id={labelId}\n                                                    primary={additional_address.name}\n                                                    secondary={`${additional_address.street_type} ${additional_address.street_name}, ${additional_address.ext_number} ${additional_address.int_number}, ${additional_address.administrative_demarcation != null ?  additional_address.administrative_demarcation.admin3_admin1 : additional_address.state}${additional_address.zipcode != \"\" ? (\", Código Postal: \" + additional_address.zipcode) : \"\" }`} \n                                                />\n                                                <ListItemSecondaryAction>\n                                                \n                                                </ListItemSecondaryAction>\n                                            </ListItem>\n                                            );\n                                        })*/}\n                    </List>\n                  </div>\n                }\n              </Grid>\n\n            </Grid>\n            <Grid container spacing={2}>\n              <Grid item xs={12}>\n                <br />\n                <PaymentEmailDialog\n                  email={customerEmail}\n                  paymentEmailDialog={paymentEmailDialog}\n                  setPaymentEmailDialog={setPaymentEmailDialog}\n                  loading={loading}\n                  setLoading={setLoading}\n                  saveService={saveService}\n                  paymentEmailAdditional={paymentEmailAdditional}\n                  setPaymentEmailAdditional={setPaymentEmailAdditional}\n                  isPaymentEmail={isPaymentEmail}\n                  setIsPaymentEmail={setIsPaymentEmail}\n                />\n                <div className={classes.wrapper}>\n                  <Button id=\"service-save\" disabled={loading} type=\"submit\" variant=\"contained\" color=\"primary\" onClick={handleSubmit}>\n                    {t('customer.newService.paymentService.generateServiceButton')}\n                  </Button>\n                  {loading && <CircularProgress size={24} className={classes.buttonProgress} />}\n                </div>\n\n              </Grid>\n            </Grid>\n          </Grid>\n          <Grid item xs={12} sm={4} className=\"service-price-table-container\">\n            <p className=\"service-subtitle\">{t('customer.newService.paymentService.serviceDetails.title')}</p>\n\n            <span className=\"service-price-table-label\">{t('customer.newService.paymentService.serviceDetails.concept')}</span>\n            <span className=\"service-price-table-value\">{service_type}{subcategory != \"\" ? (\", \" + subcategory) : \"\"}</span>\n\n            <span className=\"service-price-table-label\">{t('services.visits.payments.paymentData.amount')}</span>\n            <span className=\"service-price-table-value\">{money_format(country, totalAmount)}\n              <Button color=\"primary\" onClick={handleClickOpenTotalDialog}>\n                <i className=\"material-icons\">{t('globalText.edit')}</i>\n              </Button>\n            </span>\n\n            <Dialog open={openTotalDialog} onClose={handleCloseTotalDialog} aria-labelledby=\"form-dialog-title\">\n              <DialogTitle id=\"form-dialog-title\">{t('services.visits.changeTotalValue')}</DialogTitle>\n              <DialogContent>\n                <DialogContentText>\n                  {t('services.visits.changeValue')}\n                </DialogContentText>\n                <TextField fullWidth type=\"number\" variant=\"outlined\" label={t('services.visits.totalService')} name=\"total_service\" value={totalAmount} onChange={(e) => setTotalAmount(Number(e.target.value))} />\n              </DialogContent>\n              <DialogActions>\n                <Button onClick={handleCloseTotalDialog} color=\"primary\">\n                  {t('globalText.ok')}\n                </Button>\n              </DialogActions>\n            </Dialog>\n\n            <p>\n              {t('customer.newService.paymentService.serviceDetails.totalHours')} <span className=\"pull-right\">{totalhours}</span>\n            </p>\n\n\n            <p>\n              {t('customer.newService.paymentService.serviceDetails.hourAmount')} <span className=\"pull-right\">{money_format(country, hourAmout)}</span>\n            </p>\n\n            <p>\n              {t('customer.newService.paymentService.serviceDetails.feeAmount')} <span className=\"pull-right\">{money_format(country, feeAmount)}</span>\n            </p>\n\n            <p>\n              Refacciones <span className=\"pull-right\">{money_format(country, sparePartsAmount)}</span>\n            </p>\n\n            <p>\n              {t('customer.newService.paymentService.serviceDetails.consumables')} <span className=\"pull-right\">{money_format(country, consumableAmount)}</span>\n            </p>\n\n            <p>\n              {t('customer.newService.paymentService.serviceDetails.laborAmount')}<span className=\"pull-right\">{money_format(country, laborAmount)}</span>\n            </p>\n\n            <p>\n              {t('customer.newService.paymentService.serviceDetails.viaticAmount')}<span className=\"pull-right\">{money_format(country, viaticAmout)}</span>\n            </p>\n\n            <hr />\n            <p>\n              {t('customer.newService.paymentService.serviceDetails.subTotalAmount')}<span className=\"pull-right\">{money_format(country, subtotalAmount)}</span>\n            </p>\n\n            <p>\n              {t('customer.newService.paymentService.serviceDetails.ivaAmount')}<span className=\"pull-right\">{money_format(country, ivaAmount)}</span>\n            </p>\n\n            <hr />\n\n            <p>\n              {t('customer.newService.paymentService.serviceDetails.totalAmount')}<span className=\"pull-right\">{money_format(country, Number(totalAmount))}</span>\n            </p>\n\n\n            <MuiPickersUtilsProvider utils={DateFnsUtils} locale={esLocale}>\n              <KeyboardDatePicker\n                className=\"payment-date-input\"\n                id=\"date-payment-dialog\"\n                label={t('customer.newService.paymentService.serviceDetails.paydayLimit')}\n                format=\"dd/MM/yyyy\"\n                value={selectedPaymentDate}\n                onChange={handlePaymentDateChange}\n                KeyboardButtonProps={{\n                  'aria-label': 'change date',\n                }}\n              />\n              <FormHelperText className=\"brand-error-message\">{selectedPaymentDateErrorMessage}</FormHelperText>\n\n\n\n            </MuiPickersUtilsProvider>\n          </Grid>\n        </Grid>\n\n      </Paper>\n\n\n\n\n\n    </React.Fragment>\n  );\n\n}\n\nconst structuredSelector = createStructuredSelector({\n  requested_spare_parts: state => state.requested_spare_parts,\n  spare_parts: state => state.spare_parts,\n  current_user: state => state.current_user,\n});\nconst mapDispatchToProps = {getRequestedSpareParts};\nexport default connect(structuredSelector, mapDispatchToProps)(NewVisit)\n"]},"metadata":{},"sourceType":"module"}