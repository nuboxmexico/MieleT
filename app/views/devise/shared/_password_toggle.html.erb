<script>
var toggler = document.getElementsByClassName("<%= toggler%>")
var <%= visibility_off %> = document.getElementById("<%= visibility_off %>")
var <%= visibility %> = document.getElementById("<%= visibility %>")
var <%= password%> = document.getElementById('<%= password %>');

changePassword = (password_l, visibility_l, visibility_off_l) => {
    visibility_l.classList.toggle("hidden")
    visibility_off_l.classList.toggle("hidden")
    
    if (password_l.type == 'password') {
        password_l.setAttribute('type', 'text');
    } else {
        password_l.setAttribute('type', 'password');
    }
}

toggler = Array.from(toggler)
toggler.map(function (toggle) {
	return toggle.addEventListener("click", () => changePassword(<%= password %>, <%= visibility %>, <%= visibility_off %>));
});
</script>