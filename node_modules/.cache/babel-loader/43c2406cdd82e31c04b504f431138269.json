{"ast":null,"code":"var _jsxFileName = \"/usr/src/app/javascript/components/services/quotations/QuotationProductWarranty.jsx\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]; if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { connect } from \"react-redux\";\nimport { createStructuredSelector } from \"reselect\";\nimport { flash_alert } from 'components/App';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport Link from '@material-ui/core/Link';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport TextField from '@material-ui/core/TextField';\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport { useTranslation } from \"react-i18next\";\nimport { csrf, headers, headers_www_form, money_format, product_price, date_event_format, date_format_without_time, date_difference_in_hours, api_token, site_url, payment_channel_label } from \"constants/csrf\";\n\nfunction QuotationProductWarranty(props) {\n  var _useTranslation = useTranslation('translation', {\n    keyPrefix: 'services.quotes.detailsTab'\n  }),\n      t = _useTranslation.t;\n\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      quotation = _useState2[0],\n      setQuotation = _useState2[1];\n\n  var _useState3 = useState(0.0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      laborAmout = _useState4[0],\n      setLaborAmount = _useState4[1];\n\n  var _useState5 = useState(null),\n      _useState6 = _slicedToArray(_useState5, 2),\n      warranty = _useState6[0],\n      setWarranty = _useState6[1];\n\n  var _useState7 = useState(props.country),\n      _useState8 = _slicedToArray(_useState7, 2),\n      country = _useState8[0],\n      setCountry = _useState8[1];\n\n  var _useState9 = useState(props.zipcode),\n      _useState10 = _slicedToArray(_useState9, 2),\n      zipcode = _useState10[0],\n      setZipcode = _useState10[1];\n\n  var _useState11 = useState(props.administrative_demarcation),\n      _useState12 = _slicedToArray(_useState11, 2),\n      administrative_demarcation = _useState12[0],\n      setAdministrativeDemarcation = _useState12[1];\n\n  useEffect(function () {\n    if (props.quotation) {\n      setQuotation(props.quotation);\n    }\n  }, [props.quotation]);\n  useEffect(function () {\n    props.setCustomerProductWarrantyFromChild(props.customer_product.id, warranty, laborAmout);\n  }, [laborAmout]);\n  useEffect(function () {\n    if (props.customer_product) {\n      if (props.customer_product_warranties) {\n        var quotation_product = props.customer_product_warranties.find(function (quotation_customer_product) {\n          return quotation_customer_product.id == props.customer_product.id;\n        });\n\n        if (quotation_product) {\n          setWarranty(quotation_product.warranty != \"No\" && quotation_product.warranty != \"f\" && quotation_product.warranty != false);\n        } else {\n          setWarranty(props.customer_product.warranty != null);\n        }\n      } else {\n        setWarranty(props.customer_product.warranty != null);\n      }\n    }\n  }, [props.customer_product, props.customer_product_warranties]);\n  useEffect(function () {\n    if (warranty == false) {\n      fetchServiceTotalForProduct(country, props.customer_product.id, zipcode, administrative_demarcation.admin_name_3);\n    }\n  }, [warranty]);\n\n  function handleWarrantyChange(e) {\n    setWarranty(!warranty);\n\n    if (!warranty) {\n      setLaborAmount(0);\n      props.setCustomerProductWarrantyFromChild(props.customer_product.id, true, 0);\n    }\n  }\n\n  function fetchServiceTotalForProduct(country_code, products_ids, zipcode_t, administrative_demarcation_name_t) {\n    if (products_ids) {\n      return fetch(\"/api/v1/services/\".concat(props.serviceID, \"/total_price?country=\").concat(country_code, \"&products_ids=\").concat(products_ids, \"&service_type=\").concat(props.service_type, \"&zipcode=\").concat(zipcode_t, \"&administrative_demarcation_name=\").concat(administrative_demarcation_name_t)).then(function (response) {\n        return response.json();\n      }).then(function (json) {\n        if (json.data) {\n          //setTotalhours(json.data.total_hours)\n          //setViaticAmout(json.data.viatic_value)\n          //setHourAmout(json.data.hour_amount)\n          //setFeeAmount(json.data.fee_amount)\n          setLaborAmount(json.data.labor_price);\n          props.setCustomerProductWarrantyFromChild(props.customer_product.id, false, json.data.labor_price);\n        } else {\n          console.log(\"No hay precio.\");\n        }\n      })[\"catch\"](function (error) {\n        return console.log(error);\n      });\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    container: true,\n    spacing: 1,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"mdl-navigation__link pull-right \",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(TextField, {\n    fullWidth: true,\n    variant: \"outlined\",\n    type: \"number\",\n    InputProps: {\n      shrink: true,\n      inputProps: {\n        min: 1\n      }\n    },\n    label: t('laborAmount'),\n    name: \"laborAmout\",\n    value: laborAmout,\n    onChange: function onChange(e) {\n      return setLaborAmount(e.target.value);\n    },\n    disabled: warranty,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(Grid, {\n    item: true,\n    xs: 12,\n    sm: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"mdl-navigation__link pull-right warranty-check\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Checkbox, {\n    color: \"primary\",\n    checked: warranty,\n    onClick: function onClick(e) {\n      return handleWarrantyChange(e);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 25\n    }\n  }), \"\\xA0\", /*#__PURE__*/React.createElement(\"span\", {\n    className: \"quotation-product-name quotation-product-labor-price\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 25\n    }\n  }, t('messageWarranty#1'), \" \", /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 121\n    }\n  }, t('messageWarranty#2')))))));\n}\n\nvar structuredSelector = createStructuredSelector({});\nvar mapDispatchToProps = {};\nexport default connect(structuredSelector, mapDispatchToProps)(QuotationProductWarranty);","map":{"version":3,"sources":["/usr/src/app/javascript/components/services/quotations/QuotationProductWarranty.jsx"],"names":["React","useState","useEffect","axios","connect","createStructuredSelector","flash_alert","InputLabel","FormControl","MenuItem","Select","Link","Checkbox","TextField","createStyles","makeStyles","CircularProgress","Paper","Grid","Button","useTranslation","csrf","headers","headers_www_form","money_format","product_price","date_event_format","date_format_without_time","date_difference_in_hours","api_token","site_url","payment_channel_label","QuotationProductWarranty","props","keyPrefix","t","quotation","setQuotation","laborAmout","setLaborAmount","warranty","setWarranty","country","setCountry","zipcode","setZipcode","administrative_demarcation","setAdministrativeDemarcation","setCustomerProductWarrantyFromChild","customer_product","id","customer_product_warranties","quotation_product","find","quotation_customer_product","fetchServiceTotalForProduct","admin_name_3","handleWarrantyChange","e","country_code","products_ids","zipcode_t","administrative_demarcation_name_t","fetch","serviceID","service_type","then","response","json","data","labor_price","console","log","error","shrink","inputProps","min","target","value","structuredSelector","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { connect } from \"react-redux\"\nimport { createStructuredSelector } from \"reselect\";\nimport { flash_alert } from 'components/App';\n\n\nimport InputLabel from '@material-ui/core/InputLabel';\nimport FormControl from '@material-ui/core/FormControl';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport Link from '@material-ui/core/Link';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport TextField from '@material-ui/core/TextField';\n\nimport { createStyles, makeStyles } from '@material-ui/core/styles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Paper from '@material-ui/core/Paper';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button'\nimport {useTranslation} from \"react-i18next\"\n\n\nimport {csrf, headers, headers_www_form, money_format, product_price, date_event_format, date_format_without_time, date_difference_in_hours, api_token, site_url, payment_channel_label} from \"constants/csrf\"\n\n\n\nfunction QuotationProductWarranty(props){\n    const { t } = useTranslation('translation', { keyPrefix: 'services.quotes.detailsTab' });\n    const [quotation, setQuotation] = useState({});\n    const [laborAmout, setLaborAmount] = useState(0.0);\n    const [warranty, setWarranty] = useState(null);\n    \n    const [country, setCountry] = useState(props.country);\n    const [zipcode, setZipcode] = useState(props.zipcode);\n    const [administrative_demarcation, setAdministrativeDemarcation] = useState(props.administrative_demarcation);\n\n    useEffect(() => {\n        if(props.quotation){\n            setQuotation(props.quotation)\n        }\n    }, [props.quotation]);\n\n\n    useEffect(() => {\n        props.setCustomerProductWarrantyFromChild(props.customer_product.id, warranty, laborAmout)\n    }, [laborAmout]);\n    \n    useEffect(() => {\n        if(props.customer_product){\n            if(props.customer_product_warranties){\n                let quotation_product = props.customer_product_warranties.find(quotation_customer_product => quotation_customer_product.id == props.customer_product.id)\n            \n                if(quotation_product){\n                    setWarranty(quotation_product.warranty != \"No\" && quotation_product.warranty != \"f\" && quotation_product.warranty != false)\n                }else{\n                    setWarranty(props.customer_product.warranty != null)\n                }\n            }else{\n                setWarranty(props.customer_product.warranty != null)\n            }\n                    \n        }\n    }, [props.customer_product, props.customer_product_warranties]);\n    \n    useEffect(() => {\n       \n        if(warranty == false){\n            fetchServiceTotalForProduct(country, props.customer_product.id, zipcode, administrative_demarcation.admin_name_3)\n        \n        }\n    }, [warranty]);\n\n\n    \n\n    function handleWarrantyChange(e){\n        setWarranty(!warranty)\n        if(!warranty){\n            setLaborAmount(0)\n            props.setCustomerProductWarrantyFromChild(props.customer_product.id, true, 0)\n        }\n    }\n    \n\n    function fetchServiceTotalForProduct(country_code, products_ids, zipcode_t, administrative_demarcation_name_t){\n        if (products_ids){\n            return fetch(`/api/v1/services/${props.serviceID}/total_price?country=${country_code}&products_ids=${products_ids}&service_type=${props.service_type}&zipcode=${zipcode_t}&administrative_demarcation_name=${administrative_demarcation_name_t}`)\n            .then(response => response.json())\n            .then(json => {\n                if(json.data){\n                    //setTotalhours(json.data.total_hours)\n                    //setViaticAmout(json.data.viatic_value)\n                    //setHourAmout(json.data.hour_amount)\n                    //setFeeAmount(json.data.fee_amount)\n                    setLaborAmount(json.data.labor_price)\n                    props.setCustomerProductWarrantyFromChild(props.customer_product.id, false, json.data.labor_price)\n                }else{\n                    console.log(\"No hay precio.\")\n                }\n            })\n            .catch(error => console.log(error));\n        }\n    }\n    \n\treturn (\n\t\t<React.Fragment>\n            <Grid container spacing={1}>\n                <Grid item xs={12} sm={6}>\n                    <span className=\"mdl-navigation__link pull-right \">\n                        <TextField\n                            fullWidth\n                            variant=\"outlined\"\n                            type=\"number\"\n                            InputProps={{ shrink: true, inputProps: { min: 1} }} \n                            label={t('laborAmount')} name=\"laborAmout\" \n                            value={laborAmout} onChange={(e) => setLaborAmount(e.target.value)} \n                            disabled={warranty}/>\n                    </span>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                    <span className=\"mdl-navigation__link pull-right warranty-check\">\n                        <Checkbox color=\"primary\" checked={warranty} onClick={(e) => handleWarrantyChange(e)} />\n                        &nbsp;\n                        <span className=\"quotation-product-name quotation-product-labor-price\">{t('messageWarranty#1')} <strong>{t('messageWarranty#2')}</strong></span>\n                    </span>\n                </Grid>\n            \n            </Grid>\n\t\t</React.Fragment>\n\t);\n  \n}\n\nconst structuredSelector = createStructuredSelector({\n});\nconst mapDispatchToProps = {};\n\nexport default connect(structuredSelector, mapDispatchToProps)(QuotationProductWarranty)\n\n"]},"metadata":{},"sourceType":"module"}